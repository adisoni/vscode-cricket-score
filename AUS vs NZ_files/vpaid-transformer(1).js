/*!
 * v0.19.29 (c) 2019
 *
 * Includes:
 * - https://www.npmjs.com/package/bowser
 * - https://www.npmjs.com/package/camelcase
 * - https://www.npmjs.com/package/classlist
 * - https://www.npmjs.com/package/delay
 * - https://www.npmjs.com/package/es6-error
 * - https://www.npmjs.com/package/event-target-shim
 * - https://www.npmjs.com/package/iab-vast-error
 * - https://www.npmjs.com/package/iab-vast-loader
 * - https://www.npmjs.com/package/json-stringify-safe
 * - https://www.npmjs.com/package/p-defer
 * - https://www.npmjs.com/package/p-finally
 * - https://www.npmjs.com/package/promise-queue
 * - https://www.npmjs.com/package/protochain
 * - https://www.npmjs.com/package/querystring
 * - https://www.npmjs.com/package/raf
 * - https://www.npmjs.com/package/rx.disposables
 * - https://www.npmjs.com/package/serialize-error
 * - https://www.npmjs.com/package/unfetch
 * - https://www.npmjs.com/package/upper-case-first
 */
!function(){function t(t,e){return t(e={exports:{}},e.exports),e.exports}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}function n(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}function r(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t;n=r});this.resolve=x(e);this.reject=x(n)}function u(t){return null==t?null:Object.getPrototypeOf(Object(t))}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Function.prototype.$asyncbind=function t(e,n){"use strict";function r(){return i.apply(e,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:t,enumerable:!1,configurable:!0,writable:!0});t.trampoline||(t.trampoline=function(t,e,n,r,i){return function o(s){for(;s;){if(s.then){s=s.then(o,r);return i?void 0:s}try{if(s.pop){if(s.length)return s.pop()?e.call(t):s;s=n}else s=s.call(t)}catch(t){return r(t)}}}});if(!t.LazyThenable){t.LazyThenable=function(){function t(t){return t&&t instanceof Object&&"function"==typeof t.then}function e(n,r,i){try{var o=i?i(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));t(o)?o.then(function(t){e(n,t)},function(t){n.reject(t)}):n.resolve(o)}catch(t){n.reject(t)}}function n(t){}function r(){}function i(n,i){var o=new r;try{this._resolver(function(r){return t(r)?r.then(n,i):e(o,r,n)},function(t){e(o,t,i)})}catch(t){e(o,t,i)}return o}function o(t){this._resolver=t;this.then=i}r.prototype={resolve:n,reject:n,then:function(t,e){this.resolve=t;this.reject=e}};o.resolve=function(t){return o.isThenable(t)?t:{then:function(e){return e(t)}}};o.isThenable=t;return o}();t.EagerThenable=t.Thenable=(t.EagerThenableFactory=function(t){function e(t){if(t){var e=this;t(function(t){e.resolve(t)},function(t){e.reject(t)})}}function n(t,e){if("function"==typeof t.y)try{var n=t.y.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.resolve(e)}function r(t,e){if("function"==typeof t.n)try{var n=t.n.call(void 0,e);t.p.resolve(n)}catch(e){t.p.reject(e)}else t.p.reject(e)}t=t||"object"==typeof Vn&&Vn.nextTick||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,0)};var i=function(){function e(){for(;n.length-r;){try{n[r]()}catch(t){}n[r++]=void 0;if(r===i){n.splice(0,i);r=0}}}var n=[],r=0,i=1024;return function(i){n.push(i);n.length-r==1&&t(e)}}();e.prototype={resolve:function(t){if(void 0===this.state){if(t===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var e=this;if(t&&("function"==typeof t||"object"==typeof t))try{var r=0,o=t.then;if("function"==typeof o){o.call(t,function(t){r++||e.resolve(t)},function(t){r++||e.reject(t)});return}}catch(t){r||this.reject(t);return}this.state=n;this.v=t;e.c&&i(function(){for(var r=0,i=e.c.length;r<i;r++)n(e.c[r],t)})}},reject:function(t){if(void 0===this.state){this.state=r;this.v=t;var e=this.c;e&&i(function(){for(var n=0,i=e.length;n<i;n++)r(e[n],t)})}},then:function(t,n){var r=new e,o={y:t,n:n,p:r};if(void 0===this.state)this.c?this.c.push(o):this.c=[o];else{var s=this.state,u=this.v;i(function(){s(o,u)})}return r}};e.resolve=function(t){if(t&&t instanceof e)return t;var n=new e;n.resolve(t);return n};e.reject=function(t){if(t&&t instanceof e)return t;var n=new e;n.reject(t);return n};e.version="2.3.3-nodent";return e})()}var i=this;switch(n){case!0:return new t.Thenable(r);case 0:return new t.LazyThenable(r);case void 0:r.then=r;return r;default:return function(){try{return i.apply(e,arguments)}catch(t){return n(t)}}}};var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),f=t(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),h=(f.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),d=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},v=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=l.document,g=h(m)&&h(m.createElement),y=function(t){return g?m.createElement(t):{}},_=!v&&!p(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),b=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,k={f:v?Object.defineProperty:function(t,e,n){d(t);e=b(e,!0);d(n);if(_)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");"value"in n&&(t[e]=n.value);return t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=v?function(t,e,n){return k.f(t,e,A(1,n))}:function(t,e,n){t[e]=n;return t},E={}.hasOwnProperty,P=function(t,e){return E.call(t,e)},I=0,T=Math.random(),C=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++I+T).toString(36))},O=t(function(t){var e=C("src"),n=Function.toString,r=(""+n).split("toString");f.inspectSource=function(t){return n.call(t)};(t.exports=function(t,n,i,o){var s="function"==typeof i;s&&(P(i,"name")||S(i,"name",n));if(t[n]!==i){s&&(P(i,e)||S(i,e,t[n]?""+t[n]:r.join(String(n))));if(t===l)t[n]=i;else if(o)t[n]?t[n]=i:S(t,n,i);else{delete t[n];S(t,n,i)}}})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),x=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},D=function(t,e,n){x(t);if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},N=function(t,e,n){var r,i,o,s,u=t&N.F,a=t&N.G,c=t&N.S,h=t&N.P,d=t&N.B,p=a?l:c?l[e]||(l[e]={}):(l[e]||{}).prototype,v=a?f:f[e]||(f[e]={}),m=v.prototype||(v.prototype={});a&&(n=e);for(r in n){o=((i=!u&&p&&void 0!==p[r])?p:n)[r];s=d&&i?D(o,l):h&&"function"==typeof o?D(Function.call,o):o;p&&O(p,r,o,t&N.U);v[r]!=o&&S(v,r,s);h&&m[r]!=o&&(m[r]=o)}};l.core=f;N.F=1;N.G=2;N.S=4;N.P=8;N.B=16;N.W=32;N.U=64;N.R=128;var R=N,M={}.toString,j=function(t){return M.call(t).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==j(t)?t.split(""):Object(t)},V=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},L=function(t){return F(V(t))},U=Math.ceil,W=Math.floor,H=function(t){return isNaN(t=+t)?0:(t>0?W:U)(t)},z=Math.min,G=function(t){return t>0?z(H(t),9007199254740991):0},B=Math.max,q=Math.min,Q=t(function(t){var e=l["__core-js_shared__"]||(l["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:f.version,mode:"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),$=Q("keys"),K=function(t){return $[t]||($[t]=C(t))},J=function(t,e,n){for(var r=L(t),i=G(r.length),o=function(t,e){return(t=H(t))<0?B(t+e,0):q(t,e)}(n,i);i>o;o++)if(o in r&&r[o]===e)return o||0;return-1},X=K("IE_PROTO"),Y=function(t,e){var n,r=L(t),i=0,o=[];for(n in r)n!=X&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~J(o,n)||o.push(n));return o},Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return Y(t,Z)},et={f:Object.getOwnPropertySymbols},nt={f:{}.propertyIsEnumerable},rt=function(t){return Object(V(t))},it=Object.assign,ot=!it||p(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";t[n]=7;r.split("").forEach(function(t){e[t]=t});return 7!=it({},t)[n]||Object.keys(it({},e)).join("")!=r})?function(t,e){for(var n=rt(t),r=arguments.length,i=1,o=et.f,s=nt.f;r>i;)for(var u,a=F(arguments[i++]),c=o?tt(a).concat(o(a)):tt(a),l=c.length,f=0;l>f;)s.call(a,u=c[f++])&&(n[u]=a[u]);return n}:it;R(R.S+R.F,"Object",{assign:ot});var st=t(function(t){var e=C("meta"),n=k.f,r=0,i=Object.isExtensible||function(){return!0},o=!p(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!P(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){o&&u.NEED&&i(t)&&!P(t,e)&&s(t);return t}}}),ut=(st.KEY,st.NEED,st.fastKey,st.getWeak,st.onFreeze,t(function(t){var e=Q("wks"),n=l.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:C)("Symbol."+t))}).store=e})),at=k.f,ct=ut("toStringTag"),lt=function(t,e,n){t&&!P(t=n?t:t.prototype,ct)&&at(t,ct,{configurable:!0,value:e})},ft={f:ut},ht=k.f,dt=function(t){var e=f.Symbol||(f.Symbol=l.Symbol||{});"_"==t.charAt(0)||t in e||ht(e,t,{value:ft.f(t)})},pt=Array.isArray||function(t){return"Array"==j(t)},vt=v?Object.defineProperties:function(t,e){d(t);for(var n,r=tt(e),i=r.length,o=0;i>o;)k.f(t,n=r[o++],e[n]);return t},mt=l.document,gt=mt&&mt.documentElement,yt=K("IE_PROTO"),_t=function(){},bt=function(){var t,e=y("iframe"),n=Z.length;e.style.display="none";gt.appendChild(e);e.src="javascript:";(t=e.contentWindow.document).open();t.write("<script>document.F=Object<\/script>");t.close();bt=t.F;for(;n--;)delete bt.prototype[Z[n]];return bt()},wt=Object.create||function(t,e){var n;if(null!==t){_t.prototype=d(t);n=new _t;_t.prototype=null;n[yt]=t}else n=bt();return void 0===e?n:vt(n,e)},kt=Z.concat("length","prototype"),At={f:Object.getOwnPropertyNames||function(t){return Y(t,kt)}},St=At.f,Et={}.toString,Pt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],It={f:function(t){return Pt&&"[object Window]"==Et.call(t)?function(t){try{return St(t)}catch(t){return Pt.slice()}}(t):St(L(t))}},Tt=Object.getOwnPropertyDescriptor,Ct={f:v?Tt:function(t,e){t=L(t);e=b(e,!0);if(_)try{return Tt(t,e)}catch(t){}if(P(t,e))return A(!nt.f.call(t,e),t[e])}},Ot=st.KEY,xt=Ct.f,Dt=k.f,Nt=It.f,Rt=l.Symbol,Mt=l.JSON,jt=Mt&&Mt.stringify,Ft=ut("_hidden"),Vt=ut("toPrimitive"),Lt={}.propertyIsEnumerable,Ut=Q("symbol-registry"),Wt=Q("symbols"),Ht=Q("op-symbols"),zt=Object.prototype,Gt="function"==typeof Rt,Bt=l.QObject,qt=!Bt||!Bt.prototype||!Bt.prototype.findChild,Qt=v&&p(function(){return 7!=wt(Dt({},"a",{get:function(){return Dt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=xt(zt,e);r&&delete zt[e];Dt(t,e,n);r&&t!==zt&&Dt(zt,e,r)}:Dt,$t=function(t){var e=Wt[t]=wt(Rt.prototype);e._k=t;return e},Kt=Gt&&"symbol"==typeof Rt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Rt},Jt=function(t,e,n){t===zt&&Jt(Ht,e,n);d(t);e=b(e,!0);d(n);if(P(Wt,e)){if(n.enumerable){P(t,Ft)&&t[Ft][e]&&(t[Ft][e]=!1);n=wt(n,{enumerable:A(0,!1)})}else{P(t,Ft)||Dt(t,Ft,A(1,{}));t[Ft][e]=!0}return Qt(t,e,n)}return Dt(t,e,n)},Xt=function(t,e){d(t);for(var n,r=function(t){var e=tt(t),n=et.f;if(n)for(var r,i=n(t),o=nt.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e}(e=L(e)),i=0,o=r.length;o>i;)Jt(t,n=r[i++],e[n]);return t},Yt=function(t){var e=Lt.call(this,t=b(t,!0));return!(this===zt&&P(Wt,t)&&!P(Ht,t))&&(!(e||!P(this,t)||!P(Wt,t)||P(this,Ft)&&this[Ft][t])||e)},Zt=function(t,e){t=L(t);e=b(e,!0);if(t!==zt||!P(Wt,e)||P(Ht,e)){var n=xt(t,e);!n||!P(Wt,e)||P(t,Ft)&&t[Ft][e]||(n.enumerable=!0);return n}},te=function(t){for(var e,n=Nt(L(t)),r=[],i=0;n.length>i;)P(Wt,e=n[i++])||e==Ft||e==Ot||r.push(e);return r},ee=function(t){for(var e,n=t===zt,r=Nt(n?Ht:L(t)),i=[],o=0;r.length>o;)!P(Wt,e=r[o++])||n&&!P(zt,e)||i.push(Wt[e]);return i};if(!Gt){O((Rt=function(){if(this instanceof Rt)throw TypeError("Symbol is not a constructor!");var t=C(arguments.length>0?arguments[0]:void 0),e=function(n){this===zt&&e.call(Ht,n);P(this,Ft)&&P(this[Ft],t)&&(this[Ft][t]=!1);Qt(this,t,A(1,n))};v&&qt&&Qt(zt,t,{configurable:!0,set:e});return $t(t)}).prototype,"toString",function(){return this._k});Ct.f=Zt;k.f=Jt;At.f=It.f=te;nt.f=Yt;et.f=ee;v&&O(zt,"propertyIsEnumerable",Yt,!0);ft.f=function(t){return $t(ut(t))}}R(R.G+R.W+R.F*!Gt,{Symbol:Rt});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)ut(ne[re++]);for(var ie=tt(ut.store),oe=0;ie.length>oe;)dt(ie[oe++]);R(R.S+R.F*!Gt,"Symbol",{for:function(t){return P(Ut,t+="")?Ut[t]:Ut[t]=Rt(t)},keyFor:function(t){if(!Kt(t))throw TypeError(t+" is not a symbol!");for(var e in Ut)if(Ut[e]===t)return e},useSetter:function(){qt=!0},useSimple:function(){qt=!1}});R(R.S+R.F*!Gt,"Object",{create:function(t,e){return void 0===e?wt(t):Xt(wt(t),e)},defineProperty:Jt,defineProperties:Xt,getOwnPropertyDescriptor:Zt,getOwnPropertyNames:te,getOwnPropertySymbols:ee});Mt&&R(R.S+R.F*(!Gt||p(function(){var t=Rt();return"[null]"!=jt([t])||"{}"!=jt({a:t})||"{}"!=jt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);n=e=r[1];if((h(e)||void 0!==t)&&!Kt(t)){pt(e)||(e=function(t,e){"function"==typeof n&&(e=n.call(this,t,e));if(!Kt(e))return e});r[1]=e;return jt.apply(Mt,r)}}});Rt.prototype[Vt]||S(Rt.prototype,Vt,Rt.prototype.valueOf);lt(Rt,"Symbol");lt(Math,"Math",!0);lt(l.JSON,"JSON",!0);var se=ut("unscopables"),ue=Array.prototype;null==ue[se]&&S(ue,se,{});var ae=function(t){ue[se][t]=!0},ce=function(t,e){return{value:e,done:!!t}},le={},fe={};S(fe,ut("iterator"),function(){return this});var he=function(t,e,n){t.prototype=wt(fe,{next:A(1,n)});lt(t,e+" Iterator")},de=K("IE_PROTO"),pe=Object.prototype,ve=Object.getPrototypeOf||function(t){t=rt(t);return P(t,de)?t[de]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pe:null},me=ut("iterator"),ge=!([].keys&&"next"in[].keys()),ye=function(){return this},_e=function(t,e,n,r,i,o,s){he(n,e,r);var u,a,c,l=function(t){if(!ge&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h="values"==i,d=!1,p=t.prototype,v=p[me]||p["@@iterator"]||i&&p[i],m=v||l(i),g=i?h?l("entries"):m:void 0,y="Array"==e&&p.entries||v;if(y&&(c=ve(y.call(new t)))!==Object.prototype&&c.next){lt(c,f,!0);"function"!=typeof c[me]&&S(c,me,ye)}if(h&&v&&"values"!==v.name){d=!0;m=function(){return v.call(this)}}(ge||d||!p[me])&&S(p,me,m);le[e]=m;le[f]=ye;if(i){u={values:h?m:l("values"),keys:o?m:l("keys"),entries:g};if(s)for(a in u)a in p||O(p,a,u[a]);else R(R.P+R.F*(ge||d),e,u)}return u},be=_e(Array,"Array",function(t,e){this._t=L(t);this._i=0;this._k=e},function(){var t=this._t,e=this._k,n=this._i++;if(!t||n>=t.length){this._t=void 0;return ce(1)}return ce(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");le.Arguments=le.Array;ae("keys");ae("values");ae("entries");for(var we=ut("iterator"),ke=ut("toStringTag"),Ae=le.Array,Se={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ee=tt(Se),Pe=0;Pe<Ee.length;Pe++){var Ie,Te=Ee[Pe],Ce=Se[Te],Oe=l[Te],xe=Oe&&Oe.prototype;if(xe){xe[we]||S(xe,we,Ae);xe[ke]||S(xe,ke,Te);le[Te]=Ae;if(Ce)for(Ie in be)xe[Ie]||O(xe,Ie,be[Ie],!0)}}var De,Ne,Re=ut("toStringTag"),Me="Arguments"==j(function(){return arguments}()),je=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Re))?n:Me?j(e):"Object"==(r=j(e))&&"function"==typeof e.callee?"Arguments":r},Fe={};Fe[ut("toStringTag")]="z";Fe+""!="[object z]"&&O(Object.prototype,"toString",function(){return"[object "+je(this)+"]"},!0);De=(f.Object||{}).keys||Object.keys,Ne={keys:function(t){return tt(rt(t))}},R(R.S+R.F*p(function(){De(1)}),"Object",Ne);var Ve,Le=-2,Ue={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog",AdError:"AdError"},We={adLinear:{defaultValue:!0},adWidth:{defaultValue:Le},adHeight:{defaultValue:Le},adExpanded:{defaultValue:!1},adSkippableState:{defaultValue:!1},adRemainingTime:{defaultValue:Le},adDuration:{defaultValue:Le},adVolume:{writable:!0,defaultValue:Le},adCompanions:{defaultValue:""},adIcons:{defaultValue:!1}},He={initAd:"initAd",resizeAd:"resizeAd",startAd:"startAd",stopAd:"stopAd",pauseAd:"pauseAd",resumeAd:"resumeAd",expandAd:"expandAd",collapseAd:"collapseAd",skipAd:"skipAd"};(Ve={})[He.initAd]=[Ue.AdLoaded],Ve[He.resizeAd]=[Ue.AdSizeChange],Ve[He.startAd]=[Ue.AdStarted],Ve[He.stopAd]=[Ue.AdStopped],Ve[He.pauseAd]=[Ue.AdPaused],Ve[He.resumeAd]=[Ue.AdPlaying],Ve[He.expandAd]=[Ue.AdExpandedChange],Ve[He.collapseAd]=[Ue.AdExpandedChange],Ve[He.skipAd]=[Ue.AdSkipped,Ue.AdStopped];var ze,Ge=[Ue.AdLoaded,Ue.AdStarted,Ue.AdStopped,Ue.AdSkipped,Ue.AdImpression,Ue.AdVideoStart,Ue.AdVideoFirstQuartile,Ue.AdVideoMidpoint,Ue.AdVideoThirdQuartile,Ue.AdVideoComplete,Ue.AdError],Be=[He.initAd,He.startAd,He.stopAd,He.skipAd],qe=[Ue.AdVideoStart,Ue.AdVideoFirstQuartile,Ue.AdVideoMidpoint,Ue.AdVideoThirdQuartile,Ue.AdVideoComplete],Qe=((ze={})[Ue.AdSkipped]=["skip"],ze[Ue.AdStarted]=["creativeView"],ze[Ue.AdImpression]=["impression"],ze[Ue.AdVideoStart]=["start"],ze[Ue.AdVideoFirstQuartile]=["firstQuartile"],ze[Ue.AdVideoMidpoint]=["midpoint"],ze[Ue.AdVideoThirdQuartile]=["thirdQuartile"],ze[Ue.AdVideoComplete]=["complete"],ze[Ue.AdUserAcceptInvitation]=["acceptInvitation"],ze[Ue.AdUserMinimize]=["collapse","playerCollapse"],ze[Ue.AdUserClose]=["close","closeLinear"],ze[Ue.AdPaused]=["pause"],ze[Ue.AdPlaying]=["resume"],ze[Ue.AdExpandedChange]=["expand","playerExpand"],ze[Ue.AdError]=["error"],ze),$e=[Ue.AdStopped,Ue.AdError],Ke=function(t){return null!=t&&"function"==typeof t.then},Je=["before","after"],Xe=Object.keys(Ue).map(function(t){return Ue[t]}),Ye=function(t,e,n){var r=ut(t),i=n(V,r,""[t]),o=i[0],s=i[1];if(p(function(){var e={};e[r]=function(){return 7};return 7!=""[t](e)})){O(String.prototype,t,o);S(RegExp.prototype,r,2==e?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}},Ze=ut("match"),tn=function(t){var e;return h(t)&&(void 0!==(e=t[Ze])?!!e:"RegExp"==j(t))};Ye("split",2,function(t,e,n){var r=tn,i=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];n=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return i.call(n,t,e);var u,a,c,l,f,h=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,d+"g");s||(u=new RegExp("^"+m.source+"$(?!\\s)",d));for(;a=m.exec(n);){if((c=a.index+a[0].length)>p){h.push(n.slice(p,a.index));!s&&a.length>1&&a[0].replace(u,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(a[f]=void 0)});a.length>1&&a.index<n.length&&o.apply(h,a.slice(1));l=a[0].length;p=c;if(h.length>=v)break}m.lastIndex===a.index&&m.lastIndex++}p===n.length?!l&&m.test("")||h.push(""):h.push(n.slice(p));return h.length>v?h.slice(0,v):h}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]});Ye("replace",2,function(t,e,n){return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]});var en=/"/g,nn=function(t,e,n,r){var i=String(V(t)),o="<"+e;""!==n&&(o+=" "+n+'="'+String(r).replace(en,"&quot;")+'"');return o+">"+i+"</"+e+">"};!function(t,e){var n={};n.blink=function(t){return function(){return t(this,"blink","","")}}(nn);R(R.P+R.F*p(function(){var t="".blink('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}();Ye("match",1,function(t,e,n){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]});var rn=k.f,on=Function.prototype,sn=/^\s*function ([^ (]*)/;"name"in on||v&&rn(on,"name",{configurable:!0,get:function(){try{return(""+this).match(sn)[1]}catch(t){return""}}});var un,an=t(function(t){e=c,n=function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,s=e(/(ipod|iphone|ipad)/i).toLowerCase(),u=!/like android/i.test(t)&&/android/i.test(t),a=/nexus\s*[0-6]\s*/i.test(t),c=!a&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),h=/sailfish/i.test(t),d=/tizen/i.test(t),p=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),g=!s&&!f&&/macintosh/i.test(t),y=!u&&!h&&!d&&!p&&/linux/i.test(t),_=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),k=!w&&/[^-]mobi/i.test(t),A=/xbox/i.test(t);if(/opera/i.test(t))i={name:"Opera",opera:o,version:b||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)};else if(/opr\/|opios/i.test(t))i={name:"Opera",opera:o,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b};else if(/SamsungBrowser/i.test(t))i={name:"Samsung Internet for Android",samsungBrowser:o,version:b||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/Whale/i.test(t))i={name:"NAVER Whale browser",whale:o,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)};else if(/MZBrowser/i.test(t))i={name:"MZ Browser",mzbrowser:o,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)};else if(/coast/i.test(t))i={name:"Opera Coast",coast:o,version:b||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)};else if(/focus/i.test(t))i={name:"Focus",focus:o,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)};else if(/yabrowser/i.test(t))i={name:"Yandex Browser",yandexbrowser:o,version:b||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/ucbrowser/i.test(t))i={name:"UC Browser",ucbrowser:o,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)};else if(/mxios/i.test(t))i={name:"Maxthon",maxthon:o,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)};else if(/epiphany/i.test(t))i={name:"Epiphany",epiphany:o,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)};else if(/puffin/i.test(t))i={name:"Puffin",puffin:o,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)};else if(/sleipnir/i.test(t))i={name:"Sleipnir",sleipnir:o,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)};else if(/k-meleon/i.test(t))i={name:"K-Meleon",kMeleon:o,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)};else if(v){i={name:"Windows Phone",osname:"Windows Phone",windowsphone:o};if(_){i.msedge=o;i.version=_}else{i.msie=o;i.version=e(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(t))i={name:"Internet Explorer",msie:o,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(l)i={name:"Chrome",osname:"Chrome OS",chromeos:o,chromeBook:o,chrome:o,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/edg([ea]|ios)/i.test(t))i={name:"Microsoft Edge",msedge:o,version:_};else if(/vivaldi/i.test(t))i={name:"Vivaldi",vivaldi:o,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||b};else if(h)i={name:"Sailfish",osname:"Sailfish OS",sailfish:o,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(t))i={name:"SeaMonkey",seamonkey:o,version:e(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel|fxios/i.test(t)){i={name:"Firefox",firefox:o,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)){i.firefoxos=o;i.osname="Firefox OS"}}else if(f)i={name:"Amazon Silk",silk:o,version:e(/silk\/(\d+(\.\d+)?)/i)};else if(/phantom/i.test(t))i={name:"PhantomJS",phantom:o,version:e(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/slimerjs/i.test(t))i={name:"SlimerJS",slimer:o,version:e(/slimerjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t))i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:o,version:b||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(p){i={name:"WebOS",osname:"WebOS",webos:o,version:b||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(t)&&(i.touchpad=o)}else if(/bada/i.test(t))i={name:"Bada",osname:"Bada",bada:o,version:e(/dolfin\/(\d+(\.\d+)?)/i)};else if(d)i={name:"Tizen",osname:"Tizen",tizen:o,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b};else if(/qupzilla/i.test(t))i={name:"QupZilla",qupzilla:o,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b};else if(/chromium/i.test(t))i={name:"Chromium",chromium:o,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b};else if(/chrome|crios|crmo/i.test(t))i={name:"Chrome",chrome:o,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(u)i={name:"Android",version:b};else if(/safari|applewebkit/i.test(t)){i={name:"Safari",safari:o};b&&(i.version=b)}else if(s){i={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"};b&&(i.version=b)}else i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:o,version:e(/googlebot\/(\d+(\.\d+))/i)||b}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)};if(!i.msedge&&/(apple)?webkit/i.test(t)){if(/(apple)?webkit\/537\.36/i.test(t)){i.name=i.name||"Blink";i.blink=o}else{i.name=i.name||"Webkit";i.webkit=o}!i.version&&b&&(i.version=b)}else if(!i.opera&&/gecko\//i.test(t)){i.name=i.name||"Gecko";i.gecko=o;i.version=i.version||e(/gecko\/(\d+(\.\d+)?)/i)}if(i.windowsphone||!u&&!i.silk){if(!i.windowsphone&&s){i[s]=o;i.ios=o;i.osname="iOS"}else if(g){i.mac=o;i.osname="macOS"}else if(A){i.xbox=o;i.osname="Xbox"}else if(m){i.windows=o;i.osname="Windows"}else if(y){i.linux=o;i.osname="Linux"}}else{i.android=o;i.osname="Android"}var S="";i.windows?S=function(t){switch(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}():i.windowsphone?S=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?S=(S=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?S=(S=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):u?S=e(/android[ \/-](\d+(\.\d+)*)/i):i.webos?S=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?S=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?S=e(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(S=e(/tizen[\/\s](\d+(\.\d+)*)/i));S&&(i.osversion=S);var E=!i.windows&&S.split(".")[0];w||c||"ipad"==s||u&&(3==E||E>=4&&!k)||i.silk?i.tablet=o:(k||"iphone"==s||"ipod"==s||u||a||i.blackberry||i.webos||i.bada)&&(i.mobile=o);i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===r([i.version,"1.0"])||i.mzbrowser&&1===r([i.version,"6.0"])||i.focus&&1===r([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=o:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=o:i.x=o;return i}function e(t){return t.split(".").length}function n(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function r(t){for(var r=Math.max(e(t[0]),e(t[1])),i=n(t,function(t){var i=r-e(t);return n((t+=new Array(i+1).join(".0")).split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(e,n,i){var o=s;if("string"==typeof n){i=n;n=void 0}void 0===n&&(n=!1);i&&(o=t(i));var u=""+o.version;for(var a in e)if(e.hasOwnProperty(a)&&o[a]){if("string"!=typeof e[a])throw new Error("Browser version in the minVersion map should be a string: "+a+": "+String(e));return r([u,e[a]])<0}return n}var o=!0,s=t("undefined"!=typeof navigator&&navigator.userAgent||"");s.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in s)return!0}return!1};s.isUnsupportedBrowser=i;s.compareVersions=r;s.check=function(t,e,n){return!i(t,e,n)};s._detect=t;s.detect=t;return s},t.exports?t.exports=n():e.bowser=n();var e,n}),cn=["dns-prefetch","preconnect","prefetch","preload"],ln={},fn=cn.reverse();(un=document.createElement("link")).relList&&un.relList.supports?cn.forEach(function(t){ln[t]=un.relList.supports(t)}):Object.assign(ln,{"dns-prefetch":an.check({msie:"10",msedge:"12"},!0),prefetch:an.check({msie:"11",msedge:"12"},!0),preload:an.check({msedge:"17"},!0)});var hn=function(t){return!!ln[t]},dn=function(t,e,n){void 0===e&&(e=document);void 0===n&&(n=null);if(null!=t&&null!=t.href&&null!=t.rel){t.rel=function(t,e){void 0===e&&(e=null);if(null==e){var n=fn.indexOf(t);n>=0&&(e=fn.slice(n+1))}if(null!=e)for(var r=0;r<e.length&&!hn(t);)t=e[r++];return hn(t)?t:null}(t.rel,n);if(null!=t.rel){if("dns-prefetch"===t.rel||"preconnect"===t.rel){t.href=function(t){var e=t.indexOf("//");if(e<0)return null;var n=t.indexOf("/",e+2);return n<0?t:t.substr(0,n)}(t.href);delete t.as;delete t.type}else"prefetch"!==t.rel&&"preload"!==t.rel||(t.href=(i=(r=t.href).indexOf("#"))<0?r:r.substr(0,i));var r,i,o=e.createElement("link");Object.assign(o,t);e.head.appendChild(o)}}},pn=function(){var t=d(this),e="";t.global&&(e+="g");t.ignoreCase&&(e+="i");t.multiline&&(e+="m");t.unicode&&(e+="u");t.sticky&&(e+="y");return e};v&&"g"!=/./g.flags&&k.f(RegExp.prototype,"flags",{configurable:!0,get:pn});var vn=/./.toString,mn=function(t){O(RegExp.prototype,"toString",t,!0)};p(function(){return"/a/b"!=vn.call({source:"a",flags:"b"})})?mn(function(){var t=d(this);return"/".concat(t.source,"/","flags"in t?t.flags:!v&&t instanceof RegExp?pn.call(t):void 0)}):"toString"!=vn.name&&mn(function(){return vn.call(this)});var gn=function(){return""+(1e9+Math.floor(9e9*Math.random()))},yn=function(){return""+(new Date).getTime().toString(36)+gn().toString(16).substring(1)},_n=Symbol("name"),bn=Symbol("view"),wn="cb_",kn=function(){function t(t,e){void 0===e&&(e=null);var n,r;switch(typeof t){case"object":n=t.name;r=t.callback;break;case"string":n=t;break;case"function":r=t}null==n&&(n=wn+yn());this[_n]=n;null!=e&&null!=e.defaultView&&(e=e.defaultView);this[bn]=null!=e?e:window;null!=r&&(this.callback=r)}var e=t.prototype;e.remove=function(){this.exists&&delete this[bn][this.name]};e.invoke=function(){this.exists&&this.callback.apply(this,arguments)};n(t,[{key:"name",get:function(){return this[_n]}},{key:"exists",get:function(){return null!=this.callback}},{key:"callback",get:function(){return null!=this[bn]&&"function"==typeof this[bn][this.name]?this[bn][this.name]:null},set:function(t){null!=this[bn]&&(this[bn][this.name]=t)}}]);return t}(),An=function(t,e){d(t);if(!h(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Sn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=D(Function.call,Ct.f(Object.prototype,"__proto__").set,2))(t,[]);e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){An(t,r);e?t.__proto__=r:n(t,r);return t}}({},!1):void 0),check:An};R(R.S,"Object",{setPrototypeOf:Sn.set});var En,Pn,In,Tn=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0});Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0});if(Error.hasOwnProperty("captureStackTrace")){Error.captureStackTrace(n,n.constructor);return o(n)}Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0});return n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,function(t){function e(){t.apply(this,arguments)}e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t;return e}(Error));return e}(),Cn=function(t){function e(e){var n;(n=t.call(this,e)||this).name="CancelError";return n}r(e,t);return e}(Tn),On=function(t,e,n,r){try{return r?e(d(n)[0],n[1]):e(n)}catch(e){var i=t.return;void 0!==i&&d(i.call(t));throw e}},xn=ut("iterator"),Dn=Array.prototype,Nn=function(t){return void 0!==t&&(le.Array===t||Dn[xn]===t)},Rn=ut("iterator"),Mn=f.getIteratorMethod=function(t){if(null!=t)return t[Rn]||t["@@iterator"]||le[je(t)]},jn=t(function(t){var e={},n={},r=t.exports=function(t,r,i,o,s){var u,a,c,l,f=s?function(){return t}:Mn(t),h=D(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(Nn(f)){for(u=G(t.length);u>p;p++)if((l=r?h(d(a=t[p])[0],a[1]):h(t[p]))===e||l===n)return l}else for(c=f.call(t);!(a=c.next()).done;)if((l=On(c,h,a.value,r))===e||l===n)return l};r.BREAK=e;r.RETURN=n}),Fn=ut("species"),Vn=l.process,Ln=l.setImmediate,Un=l.clearImmediate,Wn=l.MessageChannel,Hn=l.Dispatch,zn=0,Gn={},Bn=function(){var t=+this;if(Gn.hasOwnProperty(t)){var e=Gn[t];delete Gn[t];e()}},qn=function(t){Bn.call(t.data)};if(!Ln||!Un){Ln=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);Gn[++zn]=function(){!function(t,e,n){switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3])}t.apply(void 0,e)}("function"==typeof t?t:Function(t),e)};En(zn);return zn};Un=function(t){delete Gn[t]};if("process"==j(Vn))En=function(t){Vn.nextTick(D(Bn,t,1))};else if(Hn&&Hn.now)En=function(t){Hn.now(D(Bn,t,1))};else if(Wn){In=(Pn=new Wn).port2;Pn.port1.onmessage=qn;En=D(In.postMessage,In,1)}else if(l.addEventListener&&"function"==typeof postMessage&&!l.importScripts){En=function(t){l.postMessage(t+"","*")};l.addEventListener("message",qn,!1)}else En="onreadystatechange"in y("script")?function(t){gt.appendChild(y("script")).onreadystatechange=function(){gt.removeChild(this);Bn.call(t)}}:function(t){setTimeout(D(Bn,t,1),0)}}var Qn={set:Ln,clear:Un},$n=Qn.set,Kn=l.MutationObserver||l.WebKitMutationObserver,Jn=l.process,Xn=l.Promise,Yn="process"==j(Jn),Zn={f:function(t){return new s(t)}},tr=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},er=l.navigator,nr=er&&er.userAgent||"",rr=ut("species"),ir=function(t){var e=l[t];v&&e&&!e[rr]&&k.f(e,rr,{configurable:!0,get:function(){return this}})},or=ut("iterator"),sr=!1;try{[7][or]().return=function(){sr=!0}}catch(t){}var ur,ar,cr,lr,fr=function(t,e){if(!e&&!sr)return!1;var n=!1;try{var r=[7],i=r[or]();i.next=function(){return{done:n=!0}};r[or]=function(){return i};t(r)}catch(t){}return n},hr=Qn.set,dr=function(){var t,e,n,r=function(){var r,i;Yn&&(r=Jn.domain)&&r.exit();for(;t;){i=t.fn;t=t.next;try{i()}catch(r){t?n():e=void 0;throw r}}e=void 0;r&&r.enter()};if(Yn)n=function(){Jn.nextTick(r)};else if(!Kn||l.navigator&&l.navigator.standalone)if(Xn&&Xn.resolve){var i=Xn.resolve(void 0);n=function(){i.then(r)}}else n=function(){$n.call(l,r)};else{var o=!0,s=document.createTextNode("");new Kn(r).observe(s,{characterData:!0});n=function(){s.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i);if(!t){t=i;n()}e=i}}(),pr=l.TypeError,vr=l.process,mr=vr&&vr.versions,gr=mr&&mr.v8||"",yr=l.Promise,_r="process"==je(vr),br=function(){},wr=ar=Zn.f,kr=!!function(){try{var t=yr.resolve(1),e=(t.constructor={})[ut("species")]=function(t){t(br,br)};return(_r||"function"==typeof PromiseRejectionEvent)&&t.then(br)instanceof e&&0!==gr.indexOf("6.6")&&-1===nr.indexOf("Chrome/66")}catch(t){}}(),Ar=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},Sr=function(t,e){if(!t._n){t._n=!0;var n=t._c;dr(function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,u=i?e.ok:e.fail,a=e.resolve,c=e.reject,l=e.domain;try{if(u){if(!i){2==t._h&&Ir(t);t._h=1}if(!0===u)n=r;else{l&&l.enter();n=u(r);if(l){l.exit();s=!0}}n===e.promise?c(pr("Promise-chain cycle")):(o=Ar(n))?o.call(n,a,c):a(n)}else c(r)}catch(t){l&&!s&&l.exit();c(t)}};n.length>o;)s(n[o++]);t._c=[];t._n=!1;e&&!t._h&&Er(t)})}},Er=function(t){hr.call(l,function(){var e,n,r,i=t._v,o=Pr(t);if(o){e=tr(function(){_r?vr.emit("unhandledRejection",i,t):(n=l.onunhandledrejection)?n({promise:t,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)});t._h=_r||Pr(t)?2:1}t._a=void 0;if(o&&e.e)throw e.v})},Pr=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ir=function(t){hr.call(l,function(){var e;_r?vr.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},Tr=function(t){var e=this;if(!e._d){e._d=!0;(e=e._w||e)._v=t;e._s=2;e._a||(e._a=e._c.slice());Sr(e,!0)}},Cr=function(t){var e,n=this;if(!n._d){n._d=!0;n=n._w||n;try{if(n===t)throw pr("Promise can't be resolved itself");if(e=Ar(t))dr(function(){var r={_w:n,_d:!1};try{e.call(t,D(Cr,r,1),D(Tr,r,1))}catch(t){Tr.call(r,t)}});else{n._v=t;n._s=1;Sr(n,!1)}}catch(t){Tr.call({_w:n,_d:!1},t)}}};if(!kr){yr=function(t){!function(t,e,n,r){if(!(t instanceof yr)||"_h"in t)throw TypeError("Promise: incorrect invocation!")}(this);x(t);ur.call(this);try{t(D(Cr,this,1),D(Tr,this,1))}catch(t){Tr.call(this,t)}};(ur=function(t){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1}).prototype=function(t,e,n){for(var r in e)O(t,r,e[r],void 0);return t}(yr.prototype,{then:function(t,e){var n,r,i,o=wr((n=yr,void 0===(i=d(this).constructor)||null==(r=d(i)[Fn])?n:x(r)));o.ok="function"!=typeof t||t;o.fail="function"==typeof e&&e;o.domain=_r?vr.domain:void 0;this._c.push(o);this._a&&this._a.push(o);this._s&&Sr(this,!1);return o.promise},catch:function(t){return this.then(void 0,t)}});cr=function(){var t=new ur;this.promise=t;this.resolve=D(Cr,t,1);this.reject=D(Tr,t,1)};Zn.f=wr=function(t){return t===yr||t===lr?new cr(t):ar(t)}}R(R.G+R.W+R.F*!kr,{Promise:yr});lt(yr,"Promise");ir("Promise");lr=f.Promise;R(R.S+R.F*!kr,"Promise",{reject:function(t){var e=wr(this);(0,e.reject)(t);return e.promise}});R(R.S+R.F*!kr,"Promise",{resolve:function(t){return function(t,e){d(t);if(h(e)&&e.constructor===t)return e;var n=Zn.f(t);(0,n.resolve)(e);return n.promise}(this,t)}});R(R.S+R.F*!(kr&&fr(function(t){yr.all(t).catch(br)})),"Promise",{all:function(t){var e=this,n=wr(e),r=n.resolve,i=n.reject,o=tr(function(){var n=[],o=0,s=1;jn(t,!1,function(t){var u=o++,a=!1;n.push(void 0);s++;e.resolve(t).then(function(t){if(!a){a=!0;n[u]=t;--s||r(n)}},i)});--s||r(n)});o.e&&i(o.v);return n.promise},race:function(t){var e=this,n=wr(e),r=n.reject,i=tr(function(){jn(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});i.e&&r(i.v);return n.promise}});_e(String,"String",function(t){this._t=String(t);this._i=0},function(){var t,e,n,r,i,o,s,u=this._t,a=this._i;if(a>=u.length)return{value:void 0,done:!0};t=(e=a,i=String(V(u)),o=H(e),s=i.length,o<0||o>=s?"":(n=i.charCodeAt(o))<55296||n>56319||o+1===s||(r=i.charCodeAt(o+1))<56320||r>57343?i.charAt(o):i.slice(o,o+2));this._i+=t.length;return{value:t,done:!1}});var Or=function(){var t={};t.promise=new Promise(function(e,n){t.resolve=e;t.reject=n});return t},xr=Or,Dr=Or;xr.default=Dr;var Nr=function(t,e){var n=xr(),r=function r(){t.removeEventListener(e,r);n.resolve()};t.addEventListener(e,r);n.promise.cancel=function(){t.removeEventListener(e,r);n.reject(new Error("Canceled"))};return n.promise},Rr=function(){},Mr=function(t){return new Promise(function(e,n){var r,i,o,s,u=function(t){return function(e){try{r.cancel();i.cancel();return t&&t.call(this,e)}catch(t){return n(t)}}.bind(this)}.bind(this);void 0===t&&(t=document);if(null!=t.body)return e();r=(o=t,s="body",function(t,e){var n=xr(),r=setInterval(function(){null!=o[s]&&n.resolve()},20);n.promise.cancel=function(){clearInterval(r);n.reject(new Error("Canceled"))};return n.promise}());i=Nr(t,"DOMContentLoaded");r.catch(Rr);i.catch(Rr);var a=function(){try{return e()}catch(t){return n(t)}},c=function(t){try{throw t}catch(t){return u(n)(t)}};try{return Promise.resolve(Promise.race([r,i])).then(function(t){try{return u(a)()}catch(t){return c(t)}},c)}catch(t){c(t)}})},jr=function(t,e){if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");e=Object.assign({pascalCase:!1},e);var n;if(0===(t=Array.isArray(t)?t.map(function(t){return t.trim()}).filter(function(t){return t.length}).join("-"):t.trim()).length)return"";if(1===t.length)return e.pascalCase?t.toUpperCase():t.toLowerCase();t!==t.toLowerCase()&&(t=function(t){for(var e=!1,n=!1,r=!1,i=0;i<t.length;i++){var o=t[i];if(e&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o){t=t.slice(0,i)+"-"+t.slice(i);e=!1;r=n;n=!0;i++}else if(n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o){t=t.slice(0,i-1)+"-"+t.slice(i-1);r=n;n=!1;e=!0}else{e=o.toLowerCase()===o&&o.toUpperCase()!==o;r=n;n=o.toUpperCase()===o&&o.toLowerCase()!==o}}return t}(t));return n=t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()}).replace(/\d+(\w|$)/g,function(t){return t.toUpperCase()}),e.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n},Fr=jr,Vr=jr;Fr.default=Vr;var Lr=function(t,e,n){t.setAttribute(e,n)},Ur=function(t,e,n){t[e]=Fr(n)},Wr=function(t,e,n){void 0===n&&(n=!1);if(null!=t&&null!=t.style){var r=n?"important":"";Object.keys(e).forEach(function(n){t.style.setProperty(n,e[n],r)})}},Hr=function(t,e,n,r,i){void 0===i&&(i=!1);return function(t,e,n,r,i,o){void 0===o&&(o=!1);var s=t.createElementNS("http://www.w3.org/2000/svg",n);null!=r&&function(t,e){var n="function"==typeof t.setAttribute?Lr:Ur;Object.keys(e).forEach(function(r){n(t,r,e[r])})}(s,r);null!=i&&Wr(s,i,o);return s}(t,0,e,n,r,i)},zr=function(){var t=new Error("Delay aborted");t.name="AbortError";return t},Gr=function(t){var e=t.clearTimeout,n=void 0===e?clearTimeout:e,r=t.setTimeout,i=void 0===r?setTimeout:r,o=t.willResolve;return function(t,e){var r,s,u,a=void 0===e?{}:e,c=a.value,l=a.signal;if(l&&l.aborted)return Promise.reject(zr());var f=function(){n(r);u(zr())},h=function(){l&&l.removeEventListener("abort",f)},d=new Promise(function(e,n){s=function(){h();o?e(c):n(c)};u=n;r=i(s,t)});l&&l.addEventListener("abort",f,{once:!0});d.clear=function(){n(r);r=null;h();s()};return d}},Br=Gr({willResolve:!0});Br.reject=Gr({willResolve:!1});Br.createWithTimers=function(t){var e=t.clearTimeout,n=t.setTimeout,r=Gr({clearTimeout:e,setTimeout:n,willResolve:!0});r.reject=Gr({clearTimeout:e,setTimeout:n,willResolve:!1});return r};var qr=Br,Qr=Br;qr.default=Qr;var $r=function(t){return new Promise(function(e,n){function r(){return null==t.contentWindow||null==t.contentWindow.document?Promise.resolve(qr(100)).then(function(t){try{return r}catch(t){return n(t)}},n):[1]}function i(){return e()}var o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,n);try{if(t.pop){if(t.length)return t.pop()?i.call(this):t;t=r}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(r)})},Kr=Symbol("data"),Jr=function(){function t(t){this[Kr]=Object.create(null)}var e=t.prototype;e._get=function(t){return this[Kr][t]};e._put=function(t,e){this[Kr][t]=e};e._putAll=function(t){for(var e=Object.keys(t),n=0;n<e.length;++n){var r=e[n],i=t[r];this._put(r,i)}};return t}(),Xr=Symbol("listeners"),Yr=function(){function t(){this[Xr]=[]}var e=t.prototype;e.add=function(t,e,n,r){void 0===r&&(r=null);null!=r&&(n=n.bind(r));t.addEventListener(e,n);this[Xr].push({target:t,type:e,listener:n});return this};e.addMany=function(t,e,n){var r=this;void 0===n&&(n=null);Object.keys(e).forEach(function(i){return r.add(t,i,e[i],n)});return this};e.removeAll=function(){this[Xr].slice(0).forEach(function(t){var e=t.target,n=t.type,r=t.listener;e.removeEventListener(n,r)});return this};n(t,[{key:"count",get:function(){return this[Xr].length}}]);return t}(),Zr=l.Reflect,ti=Zr&&Zr.ownKeys||function(t){var e=At.f(d(t)),n=et.f;return n?e.concat(n(t)):e},ei=function(t,e,n){e in t?k.f(t,e,A(0,n)):t[e]=n};R(R.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=L(t),i=Ct.f,o=ti(r),s={},u=0;o.length>u;)void 0!==(n=i(r,e=o[u++]))&&ei(s,e,n);return s}});var ni=function(t,e){var n={enumerable:!1,writable:!1,value:t[e]};Object.defineProperty(t,e,n)},ri=function(t){if("undefined"!=typeof URL&&URL instanceof Function)return new URL(t).hostname;var e=document.createElement("a");e.href=t;return e.hostname},ii=function(t){return function(e){e=""+e;for(;e.length<t;)e="0"+e;return e}},oi=ii(2),si=ii(3),ui=(ut("species"),function(t,e,n){for(var r,i=rt(t),o=F(i),s=D(e,n,3),u=G(o.length),a=0;u>a;a++)if(s(r=o[a],a,i))return r}),ai=!0;"find"in[]&&Array(1).find(function(){ai=!1});R(R.P+R.F*ai,"Array",{find:function(t){return ui(this,t,arguments.length>1?arguments[1]:void 0)}});ae("find");var ci=function(t){var e=function(t){var e=null;try{e=performance.getEntriesByType("resource").find(function(e){return e.name===t})}catch(t){}return e}(t);if(null==e)return null;var n=e.domainLookupStart,r=e.domainLookupEnd,i=e.connectStart,o=e.connectEnd,s=e.secureConnectionStart,u=e.requestStart,a=e.responseStart,c=e.responseEnd,l={dns:Math.round(r-n),tcpHandshake:Math.round(o-i),response:Math.round(c-a),requestStartUntilResponseEnd:Math.round(c-u)};s>0&&(l.secureConnection=Math.round(o-s));return l},li=function(t,e,n){void 0===e&&(e=null);void 0===n&&(n=document);return new Promise(function(r,i){var o=n.createElement("script");o.addEventListener("load",function(){return r(o)});o.addEventListener("error",function(){return i(new Error("Failed to insert "+t))});o.src=t;o.crossOrigin=e;n.getElementsByTagName("head")[0].appendChild(o)})},fi=ut("match"),hi="".startsWith;R(R.P+R.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{e[fi]=!1;return!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=function(t,e,n){if(tn(e))throw TypeError("String#startsWith doesn't accept regex!");return String(V(t))}(this,t),n=G(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return hi?hi.call(e,r,n):e.slice(n,n+r.length)===r}});var di,pi=/^(?:application|text)\/xml\+vast$/i,vi=/^(?:application|text)\/(?:x-)?javascript$/i,mi=/^video\//i,gi=function(t){return null==t||""===t},yi=function(t){var e=t.type;return"VPAID"===t.apiFramework&&vi.test(e)},_i=[{eval:function(t){var e=t.type,n=t.apiFramework;return gi(n)&&pi.test(e)},result:"vast"},{eval:yi,result:"vpaid"},{eval:function(t){var e=t.type,n=t.apiFramework;return gi(n)&&mi.test(e)},result:"video"}],bi=function(t){return _i.reduce(function(e,n){return n.eval(t)?n.result:e},null)},wi=function(t){var e=0,n=null;return function(){if(0===e)try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=t.apply(this,i);e=1}catch(t){n=t;e=2}if(2===e)throw n;return n}},ki=function(){return(new Date).getTime()},Ai={tr:{regexp:/[\u0069]/g,map:{i:"Ä°"}},az:{regexp:/[\u0069]/g,map:{i:"Ä°"}},lt:{regexp:/[\u0069\u006A\u012F]\u0307|\u0069\u0307[\u0300\u0301\u0303]/g,map:{"iÌ":"I","jÌ":"J","Ä¯Ì":"Ä®","iÌÌ":"Ã","iÌÌ":"Ã","iÌÌ":"Ä¨"}}},Si=function(t,e){return null==t?"":function(t,e){var n=Ai[e];t=null==t?"":String(t);n&&(t=t.replace(n.regexp,function(t){return n.map[t]}));return t.toUpperCase()}((t=String(t)).charAt(0),e)+t.substr(1)},Ei=function(){function t(t,e,n){this.options=n=n||{};this.pendingPromises=0;this.maxPendingPromises=void 0!==t?t:1/0;this.maxQueuedPromises=void 0!==e?e:1/0;this.queue=[]}var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},n=function(){};t.configure=function(t){e=t};t.prototype.add=function(t){var r=this;return new e(function(e,i,o){if(r.queue.length>=r.maxQueuedPromises)i(new Error("Queue limit reached"));else{r.queue.push({promiseGenerator:t,resolve:e,reject:i,notify:o||n});r._dequeue()}})};t.prototype.getPendingLength=function(){return this.pendingPromises};t.prototype.getQueueLength=function(){return this.queue.length};t.prototype._dequeue=function(){var t=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var n,r=this.queue.shift();if(!r){this.options.onEmpty&&this.options.onEmpty();return!1}try{this.pendingPromises++;(n=r.promiseGenerator(),n&&"function"==typeof n.then?n:new e(function(t){t(n)})).then(function(e){t.pendingPromises--;r.resolve(e);t._dequeue()},function(e){t.pendingPromises--;r.reject(e);t._dequeue()},function(t){r.notify(t)})}catch(e){t.pendingPromises--;r.reject(e);t._dequeue()}return!0};return t}(),Pi=Symbol("plugins"),Ii=Symbol("queue"),Ti=Symbol("logger"),Ci=function(){function t(){this[Pi]=[];this[Ii]=new Ei(1);this.dispose=wi(this.dispose)}var e=t.prototype;e.addPlugin=function(t){this[Pi].push(t)};e.dispose=function(){var t=this;return Promise.all(this._runStageHooks("dispose",[])).then(function(){return t[Ti].info("Plugin disposal finished")})};e.runPhase=function(t,e,n,r){return new Promise(function(i,o){var s=this;void 0===r&&(r=null);return i(this[Ii].add(function(){return new Promise(function(i,o){return i(s._runPhase0(t,e,n,r))})}))}.bind(this))};e.runPhaseSync=function(t,e,n,r){var i=Si(t);this._runStageHooks("before"+i+"Sync",e);var o=n.apply(void 0,e);this._runStage("after"+i,[].concat(e,[o])).catch(r);return o};e._runPhase0=function(t,e,n,r){return new Promise(function(i,o){var s,u,a;if(null!=r&&r())return o(new Error("Phase "+t+" canceled"));s=Si(t);var c=function(){try{u=n.apply(void 0,e);return Promise.resolve(new Promise(function(t,e){return Ke(u)?Promise.resolve(u).then(t,e):t(u)})).then(function(t){try{a=t;return Promise.resolve(this._runStage("after"+s,[].concat(e,[u]))).then(function(t){try{return i(a)}catch(t){return o(t)}},o)}catch(t){return o(t)}}.bind(this),o)}catch(t){return o(t)}}.bind(this),l=function(t){try{if(t instanceof Cn)return i(null);throw t}catch(t){return o(t)}};try{return Promise.resolve(this._runStage("before"+s,e)).then(function(t){try{return c()}catch(t){return l(t)}},l)}catch(t){l(t)}}.bind(this))};e._runStage=function(t,e){return new Promise(function(n,r){return n(Promise.all(this._runStageHooks(t,e)))}.bind(this))};e._runStageHooks=function(t,e){return this[Pi].filter(function(e){return null!=e[t]}).map(function(n){return n[t].apply(n,e)}).filter(Ke)};n(t,[{key:"plugins",get:function(){return this[Pi].slice()}}]);return t}(),Oi=function(t,e){e=e||function(){};return t.then(function(t){return new Promise(function(t){t(e())}).then(function(){return t})},function(t){return new Promise(function(t){t(e())}).then(function(){throw t})})},xi=function(t){return function(){var e=ki(),n=Oi(t.apply(void 0,arguments),function(){var t=ki();n.time=t-e});return n}},Di=function(t,e,n){void 0===n&&(n="Timed out");var r=qr.reject(e,{value:new Error(n)});r.catch(Rr);return Oi(Promise.race([t,r]),function(){r.clear()})},Ni=[].sort,Ri=[1,2,3];R(R.P+R.F*(p(function(){Ri.sort(void 0)})||!p(function(){Ri.sort(null)})||!(di=Ni,di&&p(function(){di.call(null)}))),"Array",{sort:function(t){return void 0===t?Ni.call(rt(this)):Ni.call(rt(this),x(t))}});var Mi=nt.f,ji=function(t){for(var e,n=L(t),r=tt(n),i=r.length,o=0,s=[];i>o;)Mi.call(n,e=r[o++])&&s.push([e,n[e]]);return s};R(R.S,"Object",{entries:function(t){return ji(t)}});var Fi,Vi,Li=/^[^:]+:\/\/tpc\.googlesyndication\.com\/pagead\/js\/loader/,Ui=/^[^:]+:\/\/imasdk\.googleapis\.com\/js\/sdkloader\/vpaid_adapter\.js\b/,Wi=Math.sqrt(2),Hi=["video/3gpp"],zi=((Fi={}).vpaid=1,Fi.video=2,Fi.vast=3,Fi),Gi=function(t){return t.width*t.height},Bi=function(t){return t.reduce(function(t,e){return Gi(e)<Gi(t)?e:t})},qi=function(t){return t.reduce(function(t,e){return Gi(e)>Gi(t)?e:t})},Qi=function(t,e){for(var n=e.selector,r=e.filter,i=null,o=0;o<t.length&&null==i;){var s=t[o].filter(r);s.length>0&&(i=n(s));++o}return i},$i=function(t){return t>0?t:1/0},Ki=function(t,e,n,r){var i=function(t,e,n){for(var r={},i=0;i<t.length;++i){var o=t[i].type;r.hasOwnProperty(o)||(r[o]=e.canPlayType(o))}for(var s={},u=0;u<n.length;++u)s[n[u]]=[];for(var a=0;a<t.length;++a){var c=t[a],l=r[c.type];null!=s[l]&&s[l].push(c)}return s}(t,n,["probably"].concat(r?["maybe"]:[])),o=i.probably,s=void 0===o?[]:o,u=i.maybe,a=void 0===u?[]:u;if(s.length+a.length===0)return null;for(var c=null,l=0;l<e.length&&null==c;){c=Qi([s,a],e[l]);++l}return c},Ji=((Vi={}).vast=function(t){return t[0]},Vi.vpaid=function(t){return function(t){var e=t.filter(yi);return e.length>0?qi(e):null}(t)},Vi.video=function(t,e,n){var r,i=t.filter(function(t){var e=t.type;return Hi.indexOf(e)<0}),o=i.length>0?i:t;null!=n&&"function"==typeof n.canPlayType&&(r=Ki(o,e,n,!1));null==r&&(r=Ki(o,e,document.createElement("video"),!0));return r},Vi),Xi=function(t,e){return zi[t]-zi[e]};R(R.S+R.F*!fr(function(t){}),"Array",{from:function(t){var e,n,r,i,o=rt(t),s="function"==typeof this?this:Array,u=arguments.length,a=u>1?arguments[1]:void 0,c=void 0!==a,l=0,f=Mn(o);c&&(a=D(a,u>2?arguments[2]:void 0,2));if(null==f||s==Array&&Nn(f))for(n=new s(e=G(o.length));e>l;l++)ei(n,l,c?a(o[l],l):o[l]);else for(i=f.call(o),n=new s;!(r=i.next()).done;l++)ei(n,l,c?On(i,a,[r.value,l],!0):r.value);n.length=l;return n}});var Yi=t(function(t,e){function n(t,e){var n=[],r=[];null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(e)).join(".")+"]"});return function(i,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this);~s?r.splice(s,1/0,i):r.push(i);~n.indexOf(o)&&(o=e.call(this,i,o))}else n.push(o);return null==t?o:t.call(this,i,o)}}(t.exports=function(t,e,r,i){return JSON.stringify(t,n(e,i),r)}).getSerialize=n}),Zi=(Yi.getSerialize,function t(e,n){switch(typeof e){case"object":if(null==e)return e;if(null!=e.nodeType)return"[DOM "+function(t){if(null==t)return"null";if(1!==t.nodeType)return"node";try{var e=(t.nodeName||"unknown").toLowerCase();null!=t.id&&(e+="#"+t.id);t.classList&&t.classList.length>0&&(e+="."+Array.from(t.classList).join("."));return e}catch(t){return"err"}}(e)+"]";if(n.indexOf(e)>=0)return"[Circular]";n.push(e);var r=Array.isArray(e)?[]:{},i=function(t){for(var e=[],n=u(t);n;){e.push(n);n=u(n)}return e}(e).filter(function(t){return t!==Object.prototype});return function t(e){if(null==e)return e;var n=Object.keys(e);if(1!==n.length||"message"!==n[0])return e;var r=e.message;Array.isArray(r)&&1===r.length&&(r=r[0]);return t(r)}([e].concat(i).map(function(t){return Object.getOwnPropertyNames(t)}).reduce(function(r,i){i.forEach(function(i){try{e instanceof Error&&"stack"===i||(r[i]=t(e[i],n))}catch(t){r[i]="[Error: "+(t.message||t)+"]"}});return r},r));case"function":if(n.length>0)return;return"[Function "+(e.name||"anonymous")+"]";default:return e}}),to=function(t){try{var e=Zi(t,[])||t;switch(typeof e){case"string":return e;case"number":return""+e;default:return Yi(e)}}catch(t){return"[Error]"}},eo=Symbol("subscribers"),no=Symbol("published"),ro=function(){function t(){this[eo]={};this[no]=[]}var e=t.prototype;e.subscribe=function(t,e,n){void 0===n&&(n=null);null==this[eo][e]&&(this[eo][e]=[]);this[eo][e].push({fn:t,ctx:n})};e.unsubscribe=function(t,e){var n=this[eo][e];if(null!=n)for(var r=n.length-1;r>=0;--r)n[r].fn===t&&n.splice(r,1)};e.publish=function(t,e){void 0===e&&(e=[]);if(!(Ge.indexOf(t)>=0&&this.didPublish(t))){e=this._normalizeEventArgs(t,e);this[no].push({name:t,args:e});if(null!=this[eo][t])for(var n=this[eo][t].slice(),r=0;r<n.length;++r){var i=n[r],o=i.fn,s=i.ctx;o.apply(s,e)}}};e.didPublish=function(t){return this[no].some(function(e){var n=e.name;return t===n})};e._normalizeEventArgs=function(t,e){switch(t){case Ue.AdClickThru:var n=e[0],r=e[1],i=e[2];return["string"==typeof n?n:void 0,null!=r?r:"",null==i||!!i];default:return e}};n(t,[{key:"published",get:function(){return this[no]}}]);return t}(),io=Symbol("runtime"),oo=Symbol("init"),so=Symbol("setGuest"),uo=Symbol("ensureContainer"),ao=Symbol("slot"),co=Symbol("videoSlot"),lo=Symbol("phaser"),fo=Symbol("pubSub"),ho=Symbol("clickThroughUrl"),po=Symbol("config"),vo=Symbol("logger"),mo=oo,go=io,yo=function(){function t(){this[po]=null;this[go]=null;this.dispose=wi(this.dispose)}n(t,null,[{key:"id",get:function(){throw new Error("Method is abstract")}},{key:"defaultConfig",get:function(){return null}}]);var e=t.prototype;e.init=function(){};e.dispose=function(){};e.publish=function(t,e){void 0===e&&(e=[]);return this[go].publish(t,e,"plugin-"+this.constructor.id)};e.track=function(){var t;(t=this[go]).track.apply(t,arguments)};e.trackPixel=function(t,e){this[go].trackPixel(t,e)};e.trackError=function(){var t;(t=this[go]).trackError.apply(t,arguments)};e.setConfig=function(t){this[po]=Object.assign({},this.constructor.defaultConfig,t)};e[mo]=function(t,e){if(null!=this[po])throw new Error("Already configured");this[go]=t;this.setConfig(e);this.init()};n(t,[{key:"runtime",get:function(){return this[go]}},{key:"config",get:function(){return this[po]}},{key:"host",get:function(){return this[go].host}},{key:"guest",get:function(){return this[go].guest}},{key:"logger",get:function(){return this[vo]}}]);return t}(),_o=oo,bo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);return e}(yo),wo=Object.create(null),ko=new(function(){function t(){this._contents=Object.create(null)}var e=t.prototype;e.register=function(t){var e=t.id;if(null!=this._contents[e]&&this._contents[e]!==t)throw new Error('Plugin "'+e+'" already registered');this._provisionParent(e);this._contents[e]=t};e.create=function(t,e,n){if(null==this._contents[t])throw new Error('Plugin "'+t+'" not registered');var r=new(0,this._contents[t]);r[_o](n,e);return r};e._provisionParent=function(t){var e=t.indexOf(".");if(!(e<0)){var i=t.substr(0,e);null==this._contents[i]&&(this._contents[i]=function(t){null==wo[t]&&(wo[t]=function(e){function i(){return e.apply(this,arguments)||this}r(i,e);n(i,null,[{key:"id",get:function(){return t}}]);return i}(bo));return wo[t]}(i))}};return t}()),Ao=Symbol("plugin"),So=Symbol("disposed"),Eo=ao,Po=co,Io=function(){function t(t){if(null==t)throw new Error("Must specify the plugin");this[Ao]=t;this[So]=!1}var e=t.prototype;e.dispose=function(){this[So]=!0};e.getAdVolume=function(){var t=this;return this._genericCall("getAdVolume",function(){return t[Ao].host.getAdVolume()},-1)};e.getAdDuration=function(){var t=this;return this._genericCall("getAdDuration",function(){return t[Ao].host.getAdDuration()},-1)};e.subscribe=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._genericCall("subscribe",function(){var e;return(e=t[Ao].host).subscribe.apply(e,n)})};e.unsubscribe=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._genericCall("unsubscribe",function(){var e;return(e=t[Ao].host).unsubscribe.apply(e,n)})};e.getPlayer=function(){var t=this;return this._genericCall("getPlayer",function(){return t[Ao][Po]})};e.getSlot=function(){var t=this;return this._genericCall("getSlot",function(){return t[Ao][Eo]})};e.getPreviousEvents=function(){var t=this;return this._genericCall("getPreviousEvents",function(){return t[Ao].runtime.hostInfo.publishedEvents.map(function(t){return t.name})},[])};e._genericCall=function(t,e,n){void 0===n&&(n=void 0);if(this[So]);else try{return e()}catch(t){}return n};return t}(),To=1,Co=2,Oo=Symbol("name"),xo=Symbol("states"),Do=Symbol("infos"),No=Symbol("state"),Ro=Symbol("initialState"),Mo=Symbol("timings"),jo=0,Fo=function(){function t(t,e,n){void 0===e&&(e=jo);void 0===n&&(n=void 0);this[Oo]=t;this[xo]=[];this[Do]=[];this[Mo]=[];this[Ro]=e;this.set(e,n)}var e=t.prototype;e.getInfo=function(t){if(t<=this.state)return this[Do][t]};e.set=function(t,e){void 0===e&&(e=void 0);var n=this[No];if(t<n)throw new Error("Invalid "+this[Oo]+" state change: "+n+" â "+t);if(t!==n){this._ensureStates(t);for(var r=n+1;r<t;++r)this[xo][r].resolve();this[xo][t].resolve(e);this[Do][t]=e;this[Mo][t]=ki();this[No]=t;this[Ro]}};e.maybeSet=function(t,e){void 0===e&&(e=void 0);if(this.reached(t))return!1;this.set(t,e);return!0};e.reach=function(t){return new Promise(function(e,n){this._ensureStates(t);return e(this[xo][t].promise)}.bind(this))};e.reached=function(t){return t<=this.state};e.time=function(t){return this[Mo][t]};e.timeBetween=function(t,e){if(t>e)throw new Error("toState ("+e+") must be greater than or equal to fromState ("+t+")");return this.time(e)-this.time(t)};e._ensureStates=function(t){for(var e=this[xo].length;e<=t;++e){this[xo].push(xr());this[Do].push(void 0);this[Mo].push(void 0)}};n(t,[{key:"name",get:function(){return this[Oo]}},{key:"state",get:function(){return this[No]}}]);return t}(),Vo=function(t,e,n,r){e=e||"&";n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,h,d,p=t[c].replace(o,"%20"),v=p.indexOf(n);if(v>=0){l=p.substr(0,v);f=p.substr(v+1)}else{l=p;f=""}h=decodeURIComponent(l);d=decodeURIComponent(f);a(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},Lo=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Uo=function(t,e,n,r){e=e||"&";n=n||"=";null===t&&(t=void 0);return"object"==typeof t?Object.keys(t).map(function(r){var i=encodeURIComponent(Lo(r))+n;return Array.isArray(t[r])?t[r].map(function(t){return i+encodeURIComponent(Lo(t))}).join(e):i+encodeURIComponent(Lo(t[r]))}).join(e):r?encodeURIComponent(Lo(r))+n+encodeURIComponent(Lo(t)):""},Wo=t(function(t,e){e.decode=e.parse=Vo;e.encode=e.stringify=Uo}),Ho=(Wo.decode,Wo.parse,Wo.encode,Wo.stringify),zo="cdn.doubleverify.com",Go="rtb0.doubleverify.com",Bo="tps.doubleverify.com",qo="https://"+zo+"/dvtp_src.js",Qo="https://"+zo+"/dvbs_src.js",$o={tagtype:"video",dvtagver:"6.1.src",tagformat:"2",msrapi:"jsVpaid",dvp_zjsver:"0.19.29"},Ko=Symbol("facade"),Jo=Symbol("proxyCb"),Xo=function(){function t(t){this[Ko]=t;dn({href:"//"+zo,rel:"preconnect",pr:"1.0"})}var e=t.prototype;e.start=function(){return new Promise(function(t,e){var n=this;this[Jo]=new kn(function(){return n.facade.proxy});this.facade.config.adid=this[Jo].name;return t()}.bind(this))};e.decide=function(){return new Promise(function(t,e){return t(3)})};e.enableDecisionTimeout=function(){return new Promise(function(t,e){return t()})};e.dispose=function(){return new Promise(function(t,e){if(null!=this[Jo]){this[Jo].remove();this[Jo]=null}return t()}.bind(this))};e._insertScript=function(t){return new Promise(function(e,n){var r;r=t+"?"+Ho(this.facade.config);return Promise.resolve(li(r)).then(function(t){try{return e()}catch(t){return n(t)}},n)}.bind(this))};n(t,[{key:"facade",get:function(){return this[Ko]}},{key:"logger",get:function(){return this.facade.logger}}]);return t}(),Yo=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.start=function(){return new Promise(function(e,n){return Promise.resolve(t.prototype.start.call(this)).then(function(t){try{return Promise.resolve(this.facade.creative.reach(1)).then(function(t){try{return Promise.resolve(this._insertScript(qo)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))};return e}(Xo),Zo=2,ts=Symbol("state"),es=Symbol("recommendationFromDvCb"),ns=Symbol("ackConfirmationFromDvCb"),rs=Symbol("timedOut"),is=Symbol("shouldAcknowledge"),os=function(t){function e(e){var n;(n=t.call(this,e)||this)[ts]=new Fo("blocking-state");n[es]=null;n[ns]=null;n[rs]=!1;n[is]=!1;n._scheduleAndProcessRecommendationTimeout=wi(n._scheduleAndProcessRecommendationTimeout);dn({href:"//"+Go,rel:"preconnect",pr:"1.0"});dn({href:"//"+Bo,rel:"preconnect",pr:"1.0"});return n}r(e,t);var n=e.prototype;n.start=function(){return new Promise(function(e,n){return Promise.resolve(t.prototype.start.call(this)).then(function(t){try{this[es]=new kn(this._processRecommendationFromDv.bind(this));this.facade.config.DVP_DCB=this[es].name;this[ts].set(1);return Promise.resolve(this._insertScript(Qo)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),n)}.bind(this))};n.decide=function(){return new Promise(function(t,e){return t(this[ts].reach(Zo))}.bind(this))};n.enableDecisionTimeout=function(){return new Promise(function(t,e){this._scheduleAndProcessRecommendationTimeout();return t()}.bind(this))};n.dispose=function(){return new Promise(function(e,n){function r(){if(null!=this[es]){this[es].remove();this[es]=null}if(null!=this[ns]){this[ns].remove();this[ns]=null}return Promise.resolve(t.prototype.dispose.call(this)).then(function(t){try{return e()}catch(t){return n(t)}},n)}return this[ts].reached(1)?Promise.resolve(this.enableDecisionTimeout()).then(function(t){try{if(this[is]&&!this[ts].reached(3))return Promise.resolve(this[ts].reach(3)).then(function(t){try{return e.call(this)}catch(t){return n(t)}}.bind(this),n);function e(){return r.call(this)}return e.call(this)}catch(t){return n(t)}}.bind(this),n):r.call(this)}.bind(this))};n._getBlockingTimeout=function(){var t=this.facade.config.blkto,e=null!=t?parseInt(t,10):500;return isNaN(e)?500:Math.min(Math.max(e,100),900)};n._scheduleAndProcessRecommendationTimeout=function(){return new Promise(function(t,e){var n,r,i;return Promise.resolve(this[ts].reach(1)).then(function(o){try{n=this[ts].time(1);r=this._getBlockingTimeout();if((i=n+r-ki())>0)return Promise.resolve(qr(i)).then(function(t){try{return s.call(this)}catch(t){return e(t)}}.bind(this),e);function s(){this[rs]=this[ts].maybeSet(Zo,"block"===this.facade.config.blktoa?To:Co);this[rs]&&(this.facade.timedOut=this[rs]);return t()}return s.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n._processRecommendationFromDv=function(t,e){this[is]=!0;this[ts].maybeSet(Zo,t);this._sendRecommendationAckToDv(e,ki())};n._sendRecommendationAckToDv=function(t,e){return new Promise(function(n,r){var i,o,s,u,a,c,l,f,h;i=this;return Promise.resolve(new Promise(function(t,e){return this.facade.creative.reached(3)?t([!1,!1]):Promise.resolve(Promise.race([this.facade.decide().then(function(t){return!!t&&i.facade.creative.reach(1).then(function(){return!0})}),this.facade.creative.reach(3).then(function(){return!1})])).then(function(n){try{return t([n,!this[rs]])}catch(t){return e(t)}}.bind(this),e)}.bind(this))).then(function(i){try{s=(o=i)[0],u=o[1];a=this.facade.creative.time(1)||-1;c=this.facade.creative.time(2)||-1;l=xr();this[ns]=new kn(function(){l.resolve()});f=[s,u,a,c,e,this[ns].name];var d=function(){try{this[ts].set(3);return n()}catch(t){return r(t)}}.bind(this),p=function(t){try{return d()}catch(t){return r(t)}};try{(h=new kn(t)).invoke.apply(h,f);return Promise.resolve(Promise.race([l.promise,qr(500)])).then(function(t){try{return d()}catch(t){return p()}},p)}catch(t){p()}}catch(t){return r(t)}}.bind(this),r)}.bind(this))};return e}(Xo),ss=function(t){return new(t.blockingEnabled?os:Yo)(t)},us=Symbol("logger"),as=Symbol("config"),cs=Symbol("proxy"),ls=Symbol("mode"),fs=Symbol("decision"),hs=Symbol("selectMode"),ds=Symbol("timedOut"),ps=Symbol("creativeState"),vs=function(){function t(t){void 0===t&&(t=ss);this[ps]=new Fo("dvf-creative");this[fs]=xr();this[hs]=t;this[ls]=null;this[ds]=!1;this.start=wi(this.start);this._determineDecision=wi(this._determineDecision);this.dispose=wi(this.dispose)}var e=t.prototype;e.start=function(t,e){return new Promise(function(n,r){this[cs]=e;this[as]=Object.assign({},t,$o);var i=function(){try{return n()}catch(t){return r(t)}},o=function(t){try{this[fs].reject(t);return i()}catch(t){return r(t)}}.bind(this);try{this[ls]=new this[hs](this);return Promise.resolve(this[ls].start()).then(function(t){try{return i()}catch(t){return o(t)}},o)}catch(t){o(t)}}.bind(this))};e.decide=function(){return new Promise(function(t,e){if(null==this[ls])return e(new Error("Not started yet"));this._awaitAndResolveDecision();return t(this[fs].promise)}.bind(this))};e.decideWithTimeout=function(){return new Promise(function(t,e){if(null==this[ls])return e(new Error("Not started yet"));this[ls].enableDecisionTimeout();return t(this.decide())}.bind(this))};e.onStartCreativeLoad=function(){this.creative.maybeSet(1)};e.onEndCreativeLoad=function(){this.creative.maybeSet(2)};e.dispose=function(){return new Promise(function(t,e){function n(){return t()}this.creative.maybeSet(3);return null!=this[ls]?Promise.resolve(this[ls].dispose()).then(function(t){try{this[ls]=null;return n.call(this)}catch(t){return e(t)}}.bind(this),e):n.call(this)}.bind(this))};e._awaitAndResolveDecision=function(){return new Promise(function(t,e){var n;return Promise.resolve(this[ls].decide()).then(function(r){try{n=r!==To||this.dryRun;this[fs].resolve(n);return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};n(t,[{key:"logger",get:function(){return this[us]}},{key:"blockingEnabled",get:function(){return"1"===this[as].blk}},{key:"dryRun",get:function(){return"1"===this[as].dry}},{key:"timedOut",get:function(){return this[ds]},set:function(t){this[ds]=t}},{key:"creative",get:function(){return this[ps]}},{key:"config",get:function(){return this[as]}},{key:"proxy",get:function(){return this[cs]}}]);return t}(),ms=Symbol("dvFacade"),gs=ao,ys=co,_s=function(t){function e(){var e;(e=t.call(this)||this)[ms]=new vs;return e}r(e,t);n(e,null,[{key:"id",get:function(){return"dv"}}]);var i=e.prototype;i.init=function(){this[ms].start(this.config,new Io(this))};i.dispose=function(){return this[ms].dispose()};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this[gs]=o.slot;this[ys]=o.videoSlot;this[ms].onStartCreativeLoad();this._awaitAndHandleBlockDecision();return t()}.bind(this))};i.beforeAdLoaded=function(){return new Promise(function(t,e){this[ms].onEndCreativeLoad();return Promise.resolve(this[ms].decideWithTimeout()).then(function(n){try{return n?t():e(new Error("Ad blocked"))}catch(t){return e(t)}},e)}.bind(this))};i._awaitAndHandleBlockDecision=function(){return new Promise(function(t,e){return Promise.resolve(this[ms].decide()).then(function(n){try{if(!n){this.trackBlockingResult(!0,this[ms].timedOut?"timeout":null);this.publish(Ue.AdError,["Ad blocked"])}return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i.trackBlockingResult=function(t,e){void 0===e&&(e=null);var n=t?"dv-res-block":"dv-res-allow",r=null!=e?{197:e}:null;this.track(n,r,null,!0)};return e}(yo),bs=Symbol("domEventTracker"),ws=Symbol("initialVideoSource"),ks=function(t){return"currentSrc"in t?t.currentSrc:t.src},As=function(t){function e(){var e;(e=t.call(this)||this)[bs]=new Yr;e[ws]=null;return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){if(null==o)return t();var n=o.videoSlot;if(null==n)return t();this[ws]=ks(n);var r=this._preventEarlyPlayback.bind(this);this[bs].addMany(n,{loadedmetadata:r,loadeddata:r,canplay:r,canplaythrough:r,playing:r});return t()}.bind(this))};i.beforeStartAd=function(){this[bs].removeAll()};i.dispose=function(){t.prototype.dispose.call(this);this[bs].removeAll()};i._preventEarlyPlayback=function(){var t=this.runtime.hostInfo.videoSlot;!t.paused&&this._hasVideoSourceChanged()&&t.pause()};i._hasVideoSourceChanged=function(){var t=this.runtime.hostInfo.videoSlot;return ks(t)!==this[ws]};n(e,null,[{key:"id",get:function(){return"quirk.early-start"}}]);return e}(yo),Ss=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onload=function(){if(r.status<200||r.status>=300)n(new Error("HTTP "+r.status));else{var t=r.status,i=function(t){var e={},n=null;try{n=t.getResponseHeader("content-type")}catch(t){}null!=n&&(e["content-type"]=n);return e}(r),o=function(t){return{text:t.responseText,xml:t.responseXML}}(r);e({statusCode:t,headers:i,body:o})}};r.onerror=function(){n(new Error("Unknown error"))};r.open("GET",t);r.send()})},Es=function(t,e){return Array.prototype.find.call(t.childNodes,function(t){return t.localName===e})},Ps=function(t){return new Promise(function(e,n){var r,i,o,s;return Promise.resolve(Ss(t)).then(function(t){try{i=(r=t).headers;if(null==(o=r.body.xml)||null==o.documentElement||"VAST"!==o.documentElement.localName){s=i["content-type"]||"unknown";return n(new Error("Invalid response: "+s))}return e(o)}catch(t){return n(t)}},n)})},Is=function(t){var e=Es(t.documentElement,"Ad");if(null==e)throw new Error("No ads");if(null!=Es(e,"InLine"))return null;var n=Es(e,"Wrapper");if(null==n)throw new Error("No InLine or Wrapper");var r=Es(n,"VASTAdTagURI");if(null==r)throw new Error("No VASTAdTagURI");return r.textContent.trim()},Ts=function(t,e,n){var r=new Error(t);r.vastUrl=e;r.wrapperCount=n;return r},Cs=["dns","tcpHandshake","secureConnection","response","requestStartUntilResponseEnd"],Os=function(t){return null!=t?Cs.map(function(e){return"number"==typeof(n=t[e])?n:"";var n}).join(":"):""},xs=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;i.init=function(){return new Promise(function(t,e){var n,r;this._vastUrl=this.config.vastUrl;this._strategies=this.config.strategies;this._dimensions=((n={})[9]="warmup",n[102]=this._vastUrl,n);this._metrics=((r={})[9]=this.config.originChainLength,r);this._runStrategies();return t()}.bind(this))};i._runStrategies=function(){return new Promise(function(t,e){var n;!function(t){for(var e=t.length-1;e>0;--e){var n=Math.floor(Math.random()*e),r=t[e];t[e]=t[n];t[n]=r}}(n=this._strategies.slice());var r=function(){try{this._trackBenchmarkSuccess();return t()}catch(t){return e(t)}}.bind(this),i=function(n){try{return t()}catch(t){return e(t)}};try{return Promise.resolve(Promise.all(n.map(this._runStrategy.bind(this)))).then(function(t){try{return r()}catch(t){return i()}},i)}catch(t){i()}}.bind(this))};i._runStrategy=function(t){return new Promise(function(e,n){var r,i;r=this._buildVastUrl(t);t.chain=[];var o=function(){try{var o=function(e){try{this._trackBenchmarkError(t.name,e);throw e}catch(t){return n(t)}}.bind(this);try{i=ki();return Promise.resolve((s=r,u=t.chain,new Promise(function(t,e){function n(){if(!(null!=s&&i++<5))return[1];o={url:s};u.push(o);o.startTime=ki();a=void 0;var t=function(t){try{throw Ts(t.message,s,i)}catch(t){return e(t)}};try{return Promise.resolve(Ps(s)).then(function(r){try{a=r;return function(){try{o.endTime=ki();o.timings=ci(s);try{s=Is(a,s)}catch(t){throw Ts(t.message,s,i)}return n}catch(t){return e(t)}}()}catch(e){return t(e)}},t)}catch(e){t(e)}}function r(){return null!=s?e(Ts("Wrapper limit exceeded",s,i)):t()}var i,o,a,c;i=0;return(c=function(t){for(;t;){if(t.then)return void t.then(c,e);try{if(t.pop){if(t.length)return t.pop()?r.call(this):t;t=n}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(n)}))).then(function(r){try{t.totalTime=ki()-i;return function(){try{return e()}catch(t){return n(t)}}()}catch(t){return o(t)}},o)}catch(t){o(t)}}catch(t){return n(t)}var s,u}.bind(this),s=function(t){try{return o()}catch(t){return n(t)}};try{return Promise.resolve(this._warmUp(r)).then(function(t){try{return o()}catch(t){return s()}},s)}catch(t){s()}}.bind(this))};i._buildVastUrl=function(t){if(null==t.endpoint)return this._vastUrl;var e=encodeURIComponent(this._vastUrl);return"https://"+t.endpoint+"/1?t=vast&src="+e};i._warmUp=function(t){return new Promise(function(e,n){var r;r=function(t){var e=t.indexOf("//");if(e<0)return null;var n=t.indexOf("/",e+2);return n<0?t:t.substr(0,n)}(t);return Promise.resolve(Ss(r)).then(function(t){try{return e()}catch(t){return n(t)}},n)})};i._trackBenchmarkSuccess=function(){for(var t=0;t<this._strategies.length;++t){var e=10*(t+1),n=this._strategies[t];this._addSuccessDimensions(e,n);this._addSuccessMetrics(e,n)}this.track("benchmark-end",this._dimensions,this._metrics,!0)};i._trackBenchmarkError=function(t,e){this._dimensions[10]=t;this._dimensions[110]=to(e);if(null!=e.vastUrl){this._dimensions[102]=ri(e.vastUrl);this._metrics[8]=e.wrapperCount}this.track("benchmark-error",this._dimensions,this._metrics,!0)};i._addSuccessDimensions=function(t,e){var n,r=e.name,i=e.chain;Object.assign(this._dimensions,((n={})[t]=r,n[t+1]=i.map(function(t){return t.endTime-t.startTime}).join(","),n[t+2]=i.map(function(t){return ri(t.url)}).join(","),n[t+3]=function(t){return t.map(function(t){return t.timings}).map(Os).join(",")}(i),n))};i._addSuccessMetrics=function(t,e){var n,r=e.chain,i=e.totalTime;Object.assign(this._metrics,((n={})[t]=i,n[t+1]=r.length,n));var o=r[0].timings;if(null!=o)for(var s=0;s<Cs.length;++s){var u=o[Cs[s]];"number"==typeof u&&(this._metrics[t+2+s]=u)}};n(e,null,[{key:"id",get:function(){return"unwrapper-benchmark"}}]);return e}(yo);ko.register(_s);ko.register(As);ko.register(xs);var Ds=function(){return"__forensiqcb__"+yn()},Ns=Symbol("cbName"),Rs=function(t){function e(){var e;(e=t.call(this)||this)[Ns]=Ds();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n,r,i,o,s,u=function(){try{this._trackResult(n,i,r);this._handleResult(n,r);return t()}catch(t){return e(t)}}.bind(this),a=function(t){try{s=t&&"Timed out"===t.message?[204,null]:[0,t];n=s[0];r=s[1];return u()}catch(t){return e(t)}};try{o=this._getForensiqStatus();return Promise.resolve(o).then(function(t){try{n=t;i=o.time;return u()}catch(t){return a(t)}},a)}catch(t){a(t)}}.bind(this))};i.dispose=function(){delete window[this[Ns]]};i._getForensiqStatus=function(){var t,e,n=this,r=(t=this[Ns],e=function(e,n){return{callback:t,org:n.org,sk:n.sk,s:n.s,p:n.p,a:n.a,cmp:n.cmp,url:window.location.href,ua:navigator.userAgent}}(0,this.config),"https://s.fqtag.com/a/?"+Ho(e)),i=new Promise(function(t){window[n[Ns]]=function(e){t(e);delete window[n[Ns]]}});return xi(function(){return new Promise(function(t,e){return Promise.resolve(li(r)).then(function(n){try{return t(Di(i,1500,"Timed out"))}catch(t){return e(t)}},e)})})()};i._handleResult=function(t,e){if(200===t);else if(500===t)throw new Error("Ad blocked")};i._trackResult=function(t,e,n){var r={190:e};null!=n?this.trackError("fq-res-"+t,n,null,r,!0):this.track("fq-res-"+t,null,r,!0)};n(e,null,[{key:"id",get:function(){return"fq"}}]);return e}(yo);ko.register(Rs);var Ms=Sn.set,js=function(t,e,n){var r,i=e.constructor;i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&h(r)&&Ms&&Ms(t,r);return t},Fs="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Vs="["+Fs+"]",Ls=RegExp("^"+Vs+Vs+"*"),Us=RegExp(Vs+Vs+"*$"),Ws=function(t,e,n){var r={},i=p(function(){return!!Fs[t]()||"âÂ"!="âÂ"[t]()}),o=r[t]=i?e(Hs):Fs[t];n&&(r[n]=o);R(R.P+R.F*i,"String",r)},Hs=Ws.trim=function(t,e){t=String(V(t));1&e&&(t=t.replace(Ls,""));2&e&&(t=t.replace(Us,""));return t},zs=Ws,Gs=At.f,Bs=Ct.f,qs=k.f,Qs=zs.trim,$s=l.Number,Ks=$s,Js=$s.prototype,Xs="Number"==j(wt(Js)),Ys="trim"in String.prototype,Zs=function(t){var e=b(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=Ys?e.trim():Qs(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2;i=49;break;case 79:case 111:r=8;i=55;break;default:return+e}for(var s,u=e.slice(2),a=0,c=u.length;a<c;a++)if((s=u.charCodeAt(a))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!$s(" 0o1")||!$s("0b1")||$s("+0x1")){$s=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof $s&&(Xs?p(function(){Js.valueOf.call(n)}):"Number"!=j(n))?js(new Ks(Zs(e)),n,$s):Zs(e)};for(var tu,eu=v?Gs(Ks):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),nu=0;eu.length>nu;nu++)P(Ks,tu=eu[nu])&&!P($s,tu)&&qs($s,tu,Bs(Ks,tu));$s.prototype=Js;Js.constructor=$s;O(l,"Number",$s)}for(var ru=function(t){var e,n,r,i,o=(n=function(){var t=function(t){return void 0!==t},e=function(){var e="u";try{t(window.opera)&&t(window.opera.buildNumber)?e="o":t(window.mozInnerScreenY)?e="g":t(window.chrome)&&t(window.chrome.csi)?e="c":t(window.msWriteProfilerMark)&&t(window.crypto)?e="e":t(window.attachEvent)||t(window.msCrypto)?e="i":t(window.WebKitPoint)&&(e="w")}catch(t){}return e}(),n=function(){var e,n=function(){var e={g:"",q:""};try{e.q=window.parent.parent.parent.parent.parent.parent.parent.parent.parent.parent.location.href}catch(o){var n,r=(r=o.message).substring(r.lastIndexOf("<")+1,r.lastIndexOf(">"));if((n=t(r))&&(n=!1,t(window.navigator)&&t(window.navigator.userAgent))){var i=window.navigator.userAgent.match(/Firefox\/([\.0-9]+)/);null!==i&&2==i.length&&(i=i[1].split("."),3==parseInt(i[0],10)&&6>=parseInt(i[1],10)&&(3==i.length?13>=parseInt(i[2],10)&&(n=!0):n=!0))}n&&(e.g=r)}return e},r={};try{r.a=encodeURIComponent(top.location.href)}catch(t){}try{r.b=encodeURIComponent(parent.location.href)}catch(t){}if(window!=top){try{r.c=encodeURIComponent(parent.document.referrer)}catch(t){}try{r.e=encodeURIComponent(window.document.referrer)}catch(t){}}try{r.d=encodeURIComponent(window.location.href)}catch(t){}try{var i=n();r.g=encodeURIComponent(i.g);r.q=encodeURIComponent(i.q)}catch(t){}r=function(e){var n,r,i={};for(r in e)e.hasOwnProperty(r)&&(n=e[r],t(i[n])?i[n]+=r:i[n]=r);e={};for(r in i)i.hasOwnProperty(r)&&(e[n=i[r]]=r);return e}(r=function(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];""!==r&&"null"!==r&&"undefined"!==r&&null!==r&&t(r)||delete e[n]}return e}(r)),n=[];for(e in r)r.hasOwnProperty(e)&&n.push({key:e,val:r[e]});n.sort(function(t,e){return t.val.length>e.val.length?1:t.val.length<e.val.length?-1:0});return n}();return{br:e,urls:n}},r=function(t,e,n){var r=["//"+y.getFwServerDomain(),"/db2/video/",e+"/",n+"/","skeleton.js?videoId=",l.getVideoId()].join("");e=function(t){r=[r,"&adsafe_url=",t.val,"&adsafe_type=",t.key].join("")};try{t.urls.forEach(e),r=[r,"&adsafe_jsinfo=br:",t.br].join("")}catch(t){a.report(p.DIAGNOSTIC.BUILD_VIDEOAPI_URL,t)}return r},i=function(){if(this.readyState==p.XHR.READY_STATE.DONE)if(this.status==p.HTTP.STATUS_CODE.OK)try{e("failed"===JSON.parse(this.responseText).action?p.BLOCKING_RESPONSE.BLOCK:p.BLOCKING_RESPONSE.SAFE)}catch(t){a.report(p.DIAGNOSTIC.BLOCK_AD,t)}else a.report(p.DIAGNOSTIC.BLOCKING_URL_REQUEST_ERR,{message:this.status})},{init:function(t,o,s){var u=n();t=r(u,t,o);e=s;y.sendUrlRequest(t,i)}}),s=function(){var t=window;return{getWin:function(){return t},setWin:function(e){(e=e&&e.ownerDocument)&&e.defaultView?t=e.defaultView:e&&e.parentWindow?t=e.parentWindow:a.report(p.DIAGNOSTIC.SET_CONTEXT,{message:""})},getDoc:function(){return t.document}}}(),u=function(){var t,e=[],n=!1,r=function(t){var e="";Object.keys(t).forEach(function(n){-1===["advEntityId","pubEntityId","partner","debug"].indexOf(n)&&(e+="&"+n+"="+t[n])});return e},i=function n(i){if(l.isEstablished()){var o;try{(o=y.stringify(i))&&("AdImpression"===i.messageType?y.getWindow()[t](o):y.getWindow().postMessage(o,"*"))}catch(t){a.report(p.DIAGNOSTIC.DISPATCH_MESSAGE,t)}}else if(l.canNeverBeEstablished()){o=y.getFwServerDomain();var s=u.config;try{"AdImpression"===i.messageType&&(u.isCmTag?y.sendUrlRequest(["//"+o,"/mon?",r(s)].join("")):u.isFwTag&&y.sendUrlRequest(["//"+o,"/rfw/st/",s.advEntityId+"/"+s.pubEntityId,"/skeleton.js"].join("")))}catch(n){a.report(p.DIAGNOSTIC.DISPATCH_MESSAGE,n)}}else try{e.push(i)}catch(t){a.report(p.DIAGNOSTIC.CACHE_MESSAGE,t)}},o=function(t,e){y.sendMonitoringDebugPixel(p.MONITORING.AD_STOPPED,u.monitoringQS());s(t,e)},s=function(t,e){try{i({messageType:t,id:l.getVideoId(),time:y.now(),partner:c.getPartnerCode(),eventData:e})}catch(t){a.report(p.DIAGNOSTIC.SEND_EVENT,t)}},f={AdImpression:function(t,e){var r=g.getInjector();n||(e&&(e.ext_passthrough=u.passThroughObj),n=!0,y.sendMonitoringDebugPixel(p.MONITORING.AD_IMPRESSION,u.monitoringQS()),r.onInjectionResolution(function(){s(t,e)}),r.resolveInjection())},AdStopped:o,AdVideoComplete:o,AdError:function(t,e){y.sendMonitoringDebugPixel(p.MONITORING.AD_ERROR,u.monitoringQS());s(t,e)}};return{sendEvent:function(t,e){var n=f[t]||s;g.vans.hasBegun()&&n(t,e)},setImpressionCallback:function(e){t=e},flushUnsentEvents:function(){try{e.forEach(i)}catch(t){a.report(p.DIAGNOSTIC.FLUSH_UNSENT_EVENTS,t)}},passThroughObj:{},monitoringQS:function(){},clearSessionState:function(){n=!1;e.length=0}}}(),a=function(){var t={};return{report:function(e,n,r){if(!t[e])try{t[e]=!0;var i="//"+y.getFwServerDomain()+"/jsdiagnostic?code:vans-js_"+encodeURIComponent(c.getPartnerCode())+"_"+e+"&err:"+encodeURIComponent(n.message);r&&(i+="&config:"+encodeURIComponent(JSON.stringify(r)));y.sendUrlRequest(i)}catch(t){}}}}(),c={initCM:function(t,e){v.initCM(t,e)},initFW:function(t,e,n){v.initFW(t,e,n)},getPartnerCode:function(){return g.get().partnerCode},getPassThroughObj:function(){return g.get().passThroughObj},getAltMonDomain:function(){return g.get().monDomain},hasDebugEnabled:function(){return g.get().debugEnabled}},l=function(){var t,e=!1,n=!1,r=function(t,n){t==i()&&(e=!0,u.setImpressionCallback(n),y.sendMonitoringDebugPixel(p.MONITORING.HANDSHAKE_SUCCESS,u.monitoringQS()),u.flushUnsentEvents());return e?p.VIDEO_CHANNEL:null},i=function(){t||(t=y.generateUID());return t};return{getVideoId:i,setNodeInterface:function(t){var e,n,o,s=i();try{e="IASid"+s,n="blockAd"+s,o="getIasVidBridgeVersion"+s,t.className+=" integral-vid-"+s,t[n]=y.noop,t[e]=r,t[o]=function(){return"2"},t.getVersion=function(){return p.INTERNAL_VERSION}}catch(t){a.report(p.DIAGNOSTIC.SET_NODE_INTERFACE,t)}},isEstablished:function(){return e},canNeverBeEstablished:function(){return n},giveUpOnHandshaking:function(){n=!0;u.flushUnsentEvents()},resetHandshake:function(){n=e=!1}}}(),f=function(){var t=function(){var t=[];return{addCallback:function(e,n){var r=0;n=n||Number.MAX_VALUE;t.push(function(){r<n&&(r++,e.apply({},arguments))})},executeCallbacks:function(){var e=arguments;t.forEach(function(t){t.apply({},e)})}}}();return{addCallback:function(e){t.addCallback(e,1)},executeCallbacks:t.executeCallbacks}},h=function(t){var e=!1,n=!1,r=new f,i=!1,o=function(o){var s,u=function(){!e&&t.parentNode?(t.parentNode.appendChild(o),clearInterval(s),n=e=!0,y.sendMonitoringDebugPixel(p.MONITORING.FWJS_INJECTED,m.buildMonitoringQS())):i&&(n=!0,clearInterval(s),l.giveUpOnHandshaking());n&&r.executeCallbacks()};u();e||(s=setInterval(u,200))},s=function(){var e=t&&t.ownerDocument,n=e&&e.parentWindow;return!!(e&&e.defaultView||n)};return{injectTagScript:function(t,e){var r,i=y.getDocument();if(s())try{(r=i.createElement("script")).src=function(t,e){var n,r=y.getFwServerDomain();try{n=["//",r,t,"?videoId=",l.getVideoId(),function(t){var e="";Object.keys(t).forEach(function(n){"advEntityId"!=n&&"pubEntityId"!=n&&"partner"!=n&&(e+="&"+n+"="+t[n])});return e}(e)].join("")}catch(t){a.report(p.DIAGNOSTIC.BUILD_SRC_URL,t)}return n}(t,e),r.addEventListener("load",function(t){y.sendMonitoringDebugPixel(p.MONITORING.FWJS_LOAD_SUCCESS,m.buildMonitoringQS())}),r.addEventListener("error",function(t){l.giveUpOnHandshaking();y.sendMonitoringDebugPixel(p.MONITORING.FWJS_LOAD_ERROR,m.buildMonitoringQS())}),o(r)}catch(t){l.giveUpOnHandshaking(),y.sendMonitoringPixel(p.MONITORING.INJECTION_ERR)}else n=!0,l.giveUpOnHandshaking()},sendInjectionDiagnostics:function(){var e=t&&t.ownerDocument,n=t&&t.parentNode,r=e&&(e.defaultView||e.parentWindow),i=p.MONITORING.AD_NODE_TYPE+"_"+(t?t.constructor.name||t.nodeName||typeof t:"null");t||y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NULL,m.buildMonitoringQS());t&&!n&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_DETACHED,m.buildMonitoringQS());t&&!e&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NO_DOC,m.buildMonitoringQS());e&&!r&&y.sendMonitoringDebugPixel(p.MONITORING.AD_NODE_NO_WINDOW,m.buildMonitoringQS());y.sendMonitoringDebugPixel(i,m.buildMonitoringQS())},onInjectionResolution:function(t){r.addCallback(t);n&&r.executeCallbacks()},resolveInjection:function(){i=!0}}},d=function(){var t,e=!1,n=function e(n){var r,i=!1;try{i="unloadComplete"===(r=JSON.parse(n.data)).msg&&r.id==l.getVideoId()}catch(t){}i&&(t(),y.getWindow().removeEventListener("message",e))};return{registerMeasurementCompleteHandler:function(r){t=r;e||(y.getWindow().addEventListener("message",n),e=!0)}}},p={INTERNAL_VERSION:"3.6.0",VIDEO_CHANNEL:"jv3",PROD_DOMAIN:"pixel.adsafeprotected.com",DIAGNOSTIC_MONITORING_DOMAIN:"spixel.adsafeprotected.com",S4_ITERATIONS:8,EVENTS:{AD_IMPRESSION:"AdImpression"},PSUEDO_IMPRESSION_ID_PREFIX:"vidId_",DIAGNOSTIC:{INIT_FW:"ifw",INIT_CM:"icm",FLUSH_UNSENT_EVENTS:"fue",CACHE_MESSAGE:"cm",SEND_EVENT:"se",BLOCK_AD:"ba",SEND_MONITORING_PIXEL:"smp",SET_NODE_INTERFACE:"sni",BUILD_SRC_URL:"bsurl",BUILD_VIDEOAPI_URL:"bvu",BLOCKING_URL_REQUEST_ERR:"blk_url_req_err",DISPATCH_MESSAGE:"dm",SET_CONTEXT:"sc",STRINGIFY_EVENT_ERROR:"ser"},MONITORING:{INJECTION_ERR:"inj_err",VANS_INITIALIZED:"init",HANDSHAKE_SUCCESS:"hs",AD_IMPRESSION:"ai",DEFERRED_INTERFACE:"vans_defer",AD_STOPPED:"adstop",AD_ERROR:"aderr",AD_NODE_NULL:"adnode_null",AD_NODE_DETACHED:"adnode_detached",AD_NODE_NO_DOC:"adnode_nodoc",AD_NODE_NO_WINDOW:"adnode_nowin",AD_NODE_TYPE:"adnode_type",FWJS_INJECTED:"fwjsinj",FWJS_LOAD_SUCCESS:"fwjsload",FWJS_LOAD_ERROR:"fwjsload_err",IMPRESSION_DOMAIN_BLOCKING:"impblock"},HTTP:{VERBS:{GET:"GET"},STATUS_CODE:{OK:200}},BLOCKING_RESPONSE:{BLOCK:"block",SAFE:"safe"},XHR:{READY_STATE:{DONE:4}}},v=function(){var t=function(t,e,n,r){l.setNodeInterface(n);"function"==typeof e.onMeasurementComplete&&(new d).registerMeasurementCompleteHandler(e.onMeasurementComplete);var i={};Object.getOwnPropertyNames(e).forEach(function(t){"debug"!==t&&"onMeasurementComplete"!==t&&(i[t]=e[t])});r.injectTagScript(t,i)};return{initCM:function(e,n){var r;if(!g.vans.hasBegun()){if(!e||!e.partner)throw Error("Missing partner code");s.setWin(n);g.setPreErrorConfig(e,"cm");try{if(!e.anId)throw Error("Missing anId");g.vans.begin();r=new h(n);g.setInjector(r);g.setConfig(e);y.sendMonitoringDebugPixel(p.MONITORING.VANS_INITIALIZED,m.buildMonitoringQS());y.sendMonitoringDebugPixel(p.MONITORING.IMPRESSION_DOMAIN_BLOCKING,m.buildMonitoringQS(),y.getFwServerDomain());r.sendInjectionDiagnostics();t("/jsvid",e,n,r)}catch(t){a.report(p.DIAGNOSTIC.INIT_CM,t)}}},initFW:function(e,n,r){var i,u;if(!g.vans.hasBegun()){if(!e||!e.partner)throw Error("Missing partner code");s.setWin(n);g.setPreErrorConfig(e,"fw");try{if(!e.advEntityId||!e.pubEntityId)throw Error("Missing client id: advEntityId: "+e.advEntityId+" ,pubEntityId: "+e.pubEntityId);g.vans.begin();u=new h(n);g.setInjector(u);g.setConfig(e);y.sendMonitoringDebugPixel(p.MONITORING.VANS_INITIALIZED,m.buildMonitoringQS());y.sendMonitoringDebugPixel(p.MONITORING.IMPRESSION_DOMAIN_BLOCKING,m.buildMonitoringQS(),y.getFwServerDomain());u.sendInjectionDiagnostics();r&&o.init(e.advEntityId,e.pubEntityId,r);i="/fwjsvid/st/"+e.advEntityId+"/"+e.pubEntityId+"/skeleton.js";t(i,e,n,u)}catch(t){a.report(p.DIAGNOSTIC.INIT_FW,t)}}}}}(),m={buildMonitoringQS:function(){var t=p.PSUEDO_IMPRESSION_ID_PREFIX+l.getVideoId(),e=g.getInfoParams();return["&chanId="+e.anId,"planId="+e.advEntityId,"placementId="+e.pubEntityId,"advId="+e.campId,"pubOrder="+e.placementId,"pubCreative="+e.creativeId,"impId="+(e.impId||t),"ts="+Date.now(),"custom="+p.INTERNAL_VERSION,"custom2=jv3&custom3="+g.get().tagType,"adsafe_par"].join("&")}},g=function(){var t,e={},n=!1,r={};return{vans:{hasBegun:function(){return n},begin:function(){n=!0}},setInjector:function(e){t=e},getInjector:function(){return t},setPreErrorConfig:function(t,n){e.tagType=n;var r;r="string"==typeof(r=t.partner)?r.replace(/[^\w-.]/g,""):r;e.partnerCode=r;e.debugEnabled=t.debug&&t.debug.enabled;e.debugEnabled&&(e.monDomain=t.debug.monDomain)},setConfig:function(t){!function(t){"impId creativeId campId placementId advEntityId pubEntityId anId".split(" ").forEach(function(e){r[e]=t[e]});r.monDomain=e.monDomain}(t);e.passThroughObj={vv:p.INTERNAL_VERSION,vanstag:e.tagType,xcamp:r.campId,xplac:r.placementId,xcreat:r.creativeId,ximp:r.impId,xpc:e.partnerCode};e.config=t;!function(t){u.monitoringQS=m.buildMonitoringQS;u.passThroughObj=e.passThroughObj;Object.keys(t).forEach(function(e){u[e]=t[e]})}({isFwTag:"fw"===e.tagType,isCmTag:"cm"===e.tagType,config:t})},getInfoParams:function(){return r},get:function(){return e}}}(),y={now:function(){return(new Date).getTime()},sendMonitoringPixel:function(t){try{this.sendUrlRequest(["//"+y.getFwServerDomain(),"/mon?anId=10173&campId=",encodeURIComponent(c.getPartnerCode()),"&pubId=",encodeURIComponent("vans-js_"+t)].join(""))}catch(t){a.report(p.DIAGNOSTIC.SEND_MONITORING_PIXEL,t)}},sendMonitoringDebugPixel:function(){var t=[p.MONITORING.AD_STOPPED],e={};return function(n,r,i){var o=c.hasDebugEnabled(),s=-1<t.indexOf(n)&&e[n];if(o&&!s)try{var u,l=p.DIAGNOSTIC_MONITORING_DOMAIN,f=c.getAltMonDomain(),h=(f=(i=i||f||l)===f?"925116":"10173",y.addProtocolToDomain(i)),d=encodeURIComponent(n),v=encodeURIComponent(c.getPartnerCode());u=r.replace(/=undefined&/g,"=&");y.sendUrlRequest(h+"/mon?anId="+f+"&campId="+v+"&pubId="+d+u);e[n]=!0}catch(t){a.report(p.DIAGNOSTIC.SEND_MONITORING_PIXEL,t)}}}(),sendUrlRequest:function(t,e){var n,r;if(t){n=this.getWindow();try{r=new n.XMLHttpRequest,e&&(r.onreadystatechange=e),r.open(p.HTTP.VERBS.GET,t),r.send()}catch(t){}}},stringify:function(t){if("AdImpression"!==t.messageType)return JSON.stringify(t);var e={};e.passthroughObj=c.getPassThroughObj();var n="";try{n=JSON.stringify(t)}catch(t){a.report(p.DIAGNOSTIC.STRINGIFY_EVENT_ERROR,t,e);return}return n},addProtocolToDomain:function(t){return t.match(/^[a-zA-Z]+:\/\//)?t:"https://"+t},getWindow:function(){return s.getWin()},getDocument:function(){return s.getDoc()},generateUID:function(){var t,e="";try{for(t=0;t<p.S4_ITERATIONS;t++)e=[e,Math.floor(65536*(1+Math.random())).toString(16).substring(1)].join("")}catch(t){}return e},getFwServerDomain:function(){return t||p.PROD_DOMAIN},noop:function(){}};return{initFW:c.initFW,initCM:c.initCM,sendEvent:u.sendEvent}},iu={ad_duration:"getAdDuration",width:"getAdWidth",height:"getAdHeight",volume:"getAdVolume"},ou=[Ue.AdLoaded,Ue.AdImpression,"resizeAd"],su=["planId","uId","impId","bidPr","bidurl"],uu=Symbol("integral"),au=Symbol("viewMode"),cu=Symbol("adNode"),lu=Symbol("measurementCompleted"),fu=wi(function(){dn({href:"//pixel.adsafeprotected.com",rel:"preconnect",pr:"1.0"});dn({href:"//dt.adsafeprotected.com",rel:"preconnect",pr:"1.0"});dn({href:"//sc.iasds01.com",rel:"preconnect",pr:"1.0"})}),hu=function(t){function e(){var e;(e=t.call(this)||this)[lu]=xr();fu();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this[uu]=new ru(this.config.fwServerDomain);this[au]=n;this[cu]=o?o.slot:null;return t()}.bind(this))};i.beforeResizeAd=function(t,e,n){return new Promise(function(t,e){this[au]=n;return t()}.bind(this))};i.beforeAdSkipped=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i.beforeAdError=function(){return new Promise(function(t,e){return Promise.resolve(this._completeMeasurement()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._completeMeasurement=function(){return new Promise(function(t,e){return Promise.resolve(Promise.race([this[lu].promise,qr(250)])).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._sendEvent=function(t,e){if(null!=this[uu]){"AdSizeChange"===t&&(t="resizeAd");var n=this._buildEventContext(t,e);this[uu].sendEvent(t,n)}};i._buildEventContext=function(t,e){for(var n=this.host,r={},i=Object.keys(iu),o=0;o<i.length;++o){var s=i[o],u=iu[s],a=void 0;try{a=n[u]()}catch(t){}"number"!=typeof a&&(a=Le);r[s]=a}ou.indexOf(t)>=0&&(r.viewMode=this[au]);return r};n(e,[{key:"normalizedConfig",get:function(){var t=this,e=this.config,n=Object.assign({},e);delete n.debug;delete n.monDomain;delete n.fwServerDomain;delete n.monitoring;if(!0===e.debug){n.debug=n.debug||{};n.debug.enabled=!0}if(null!=e.monDomain){n.debug=n.debug||{};n.debug.monDomain=e.monDomain}su.some(function(t){return!(e=n[t],null==e||""===e||Array.isArray(e)&&null==e.length);var e})&&(n.adsafe_par="");null==n.partner&&(n.partner="iasz");n.onMeasurementComplete=function(){t[lu].resolve()};return n}},{key:"_integral",get:function(){return this[uu]}},{key:"_adNode",get:function(){return this[cu]}}]);return e}(yo),du=hu.prototype,pu=Object.keys(Ue).map(function(t){return Ue[t]}),vu=function(t){var e=pu[t],n="before"+e,r=du[n];du[n]=function(){var t=arguments;return new Promise(function(n,i){function o(){return n()}var s,u,a;for(s=t.length,u=new Array(s),a=0;a<s;a++)u[a]=t[a];this._sendEvent(e,u);return null!=r?Promise.resolve(r.apply(this,u)).then(function(t){try{return o.call(this)}catch(t){return i(t)}}.bind(this),i):o.call(this)}.bind(this))}},mu=0;mu<pu.length;++mu)vu(mu);var gu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.beforeInitAd=function(e,n,r,i,o,s){return new Promise(function(u,a){return Promise.resolve(t.prototype.beforeInitAd.call(this,e,n,r,i,o,s)).then(function(t){try{this._integral.initCM(this.normalizedConfig,this._adNode);return u()}catch(t){return a(t)}}.bind(this),a)}.bind(this))};n(e,null,[{key:"id",get:function(){return"ias.cm"}}]);return e}(hu),yu=Symbol("deciding"),_u=Symbol("didBlock"),bu=["safe","block","monitor"],wu=xi(function(){return Di(function(t,e,n,r){return new Promise(function(i,o){try{if(!0===r){t.initFW(e,n);i("monitor")}else t.initFW(e,n,i)}catch(t){o(t)}})}.apply(void 0,arguments),1500,"Timed out")}),ku=wi(function(){dn({href:"//static.adsafeprotected.com",rel:"preconnect",pr:"1.0"})}),Au=function(t){function e(){var e;e=t.call(this)||this;ku();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(e,n,r,i,o,s){return new Promise(function(u,a){return Promise.resolve(t.prototype.beforeInitAd.call(this,e,n,r,i,o,s)).then(function(t){try{this[_u]=!1;this[yu]=wu(this._integral,this.normalizedConfig,this._adNode,this.config.monitoring);return u()}catch(t){return a(t)}}.bind(this),a)}.bind(this))};i.beforeAdLoaded=function(){return new Promise(function(e,n){var r,i,o=function(){try{this._trackFwResult(r,this[yu].time,i);if("block"===r){console.warn("IAS FW: Ad blocked");this[_u]=!0;this._sendEvent(Ue.AdImpression);return n(new Error("Ad blocked"))}return Promise.resolve(t.prototype.beforeAdLoaded.call(this)).then(function(t){try{return e()}catch(t){return n(t)}},n)}catch(t){return n(t)}}.bind(this),s=function(t){try{if("Timed out"===(t&&t.message)){console.warn("IAS FW: Timed out");r="timeout"}else{console.warn("IAS FW: Error: "+i.message);r="error";i=t}return o()}catch(t){return n(t)}};try{return Promise.resolve(this[yu]).then(function(t){try{if(!function(t){return bu.indexOf(t)>=0}(r=t)){console.warn('IAS FW: Invalid decision "'+r+'"');r="invalid"}return o()}catch(t){return s(t)}},s)}catch(t){s(t)}}.bind(this))};i._buildEventContext=function(e,n){var r=t.prototype._buildEventContext.call(this,e,n);if(e===Ue.AdImpression){var i=null!=this[yu]?this[yu].time:0;Object.assign(r,{integral_didBlock:this[_u],integral_timeToDecision:i})}return r};i._trackFwResult=function(t,e,n){var r={190:e};null!=n?this.trackError("ias-fw-res-"+t,n,null,r,!0):this.track("ias-fw-res-"+t,null,r,!0)};n(e,null,[{key:"id",get:function(){return"ias.fw"}}]);return e}(hu),Su="Advertisement. Your video will begin in [T] seconds.",Eu=Symbol("message"),Pu=Symbol("positionX"),Iu=Symbol("positionX"),Tu=Symbol("counter"),Cu=Symbol("interval"),Ou=function(t){function e(){var e;(e=t.call(this)||this)[Eu]=Su;e[Pu]="center";e[Iu]="bottom";e[Tu]=null;e[Cu]=null;return e}r(e,t);var i=e.prototype;i._loadConfig=function(){var t,e=this,n=this.config.flags;if(null!=n){var r=function(t,n){return function(){e[Pu]=n;e[Iu]=t}},i=((t={frtimer:function(){e[Eu]="PublicitÃ©: Votre vidÃ©o commence dans [T] secondes."},gertimer:function(){e[Eu]="Nur ein Werbespot. Das Video beginnt in [T] Sekunden."}}).topleftcount=r("top","left"),t.topmiddlecount=r("top","center"),t.toprightcount=r("top","right"),t.bottomleftcount=r("bottom","left"),t.bottomrightcount=r("bottom","right"),t);n.split("|").map(function(t){return i[t]}).forEach(function(t){return t&&t()})}};i._createCountdown=function(t){var e,n=(t.ownerDocument||document).createElement("div");Wr(n,((e={"background-color":"rgba(0, 0, 0, 0.7)"})[this[Iu]]="bottom"===this[Iu]?"10px":"0px",e.right="0px",e.width="100%",e.position="absolute",e.color="white",e["font-size"]="12px",e["font-weight"]="200",e["font-family"]="Arial, Helvetica, sans-serif",e["text-align"]=this[Pu],e["z-index"]="10000001",e),!0);this[Tu]=n;this._updateCountdown();t.appendChild(n)};i._updateCountdown=function(){var t=Math.round(this.host.getAdRemainingTime());t<0&&(t=Math.max(this.host.getAdDuration(),0));var e=this[Eu].replace("[T]",t);this[Tu].innerHTML!==e&&(this[Tu].innerHTML=e)};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this._loadConfig();this._createCountdown(o.slot);return t()}.bind(this))};i.afterAdStarted=function(){return new Promise(function(t,e){var n=this;if(null!==this[Tu]){this._updateCountdown();this[Cu]=setInterval(function(){return n._updateCountdown()},250)}return t()}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){if(null!==this[Cu]){clearInterval(this[Cu]);this[Cu]=null}return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"ias.countdown"}}]);return e}(yo),xu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.afterAdLoaded=function(){return new Promise(function(t,e){this.host.startAd();return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"force.start"}}]);return e}(yo),Du=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);e.prototype.afterAdClickThru=function(){return new Promise(function(t,e){this.host.resumeAd();return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"force.click.continue"}}]);return e}(yo);ko.register(gu);ko.register(Au);ko.register(Ou);ko.register(xu);ko.register(Du);var Nu=function(t){function e(){var e;(e=t.call(this)||this)._shouldHaveDuration=xr();e._shouldHaveDuration.fulfilled=!1;return e}r(e,t);n(e,null,[{key:"id",get:function(){return"moat"}}]);var i=e.prototype;i.afterAdDurationChange=function(){this._checkIfAdDurationIsPresent()};i.afterAdRemainingTimeChange=function(){this._checkIfAdDurationIsPresent()};i.afterAdStarted=function(){this._checkIfAdDurationIsPresent()};i.afterAdVideoStart=function(){this._checkIfAdDurationIsPresent()};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){function n(){this._moatApi=function(t,e,n,r){var i=document.createElement("script"),o={events:[],addEvent:function(t){u.sendEvent?(o.events&&(u.sendEvent(o.events),o.events=!1),u.sendEvent(t)):o.events.push(t)}},s=function(e){return function(){var n,r=-1;t&&t.getAdVolume&&(n=t.getAdVolume());"number"==typeof n&&!isNaN(n)&&0<=n&&(r=n);o.addEvent({type:e,adVolume:r});if(-1!==h.indexOf(e)&&t&&t.unsubscribe&&!f){f=!0;for(var i in l)if(l.hasOwnProperty&&l.hasOwnProperty(i))try{t.unsubscribe(l[i],i)}catch(t){}}}},u={adData:{ids:n,vpaid:t,duration:t.getAdDuration(),build:"cc07a80-clean"},dispatchEvent:o.addEvent};n="_moatApi"+Math.floor(1e8*Math.random());var a,c,l={AdStarted:s("AdStarted"),AdStopped:s("AdStopped"),AdSkipped:s("AdSkipped"),AdLoaded:s("AdLoaded"),AdLinearChange:s("AdLinearChange"),AdSizeChange:s("AdSizeChange"),AdExpandedChange:s("AdExpandedChange"),AdSkippableStateChange:s("AdSkippableStateChange"),AdDurationChange:s("AdDurationChange"),AdRemainingTimeChange:s("AdRemainingTimeChange"),AdVolumeChange:s("AdVolumeChange"),AdImpression:s("AdImpression"),AdClickThru:s("AdClickThru"),AdInteraction:s("AdInteraction"),AdVideoStart:s("AdVideoStart"),AdVideoFirstQuartile:s("AdVideoFirstQuartile"),AdVideoMidpoint:s("AdVideoMidpoint"),AdVideoThirdQuartile:s("AdVideoThirdQuartile"),AdVideoComplete:s("AdVideoComplete"),AdUserAcceptInvitation:s("AdUserAcceptInvitation"),AdUserMinimize:s("AdUserMinimize"),AdUserClose:s("AdUserClose"),AdPaused:s("AdPaused"),AdPlaying:s("AdPlaying"),AdError:s("AdError")},f=!1,h=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(t&&t.subscribe)for(var e in l)l.hasOwnProperty&&l.hasOwnProperty(e)&&t.subscribe(l[e],e)}();try{c=(a=e.ownerDocument).defaultView||a.parentWindow}catch(t){a=document,c=window}c[n]=u;i.type="text/javascript";e&&e.insertBefore(i,e.childNodes[0]||null);i.src="https://z.moatads.com/"+r+"/moatvideo.js#"+n;return u}(this.guest,r,this.config,this.config.pcode);this._dispatchPreviousEvents();this._forwardVPAIDDurationToMoat();return t()}var r;if(null!=o&&null!=o.slot){r=o.slot;return n.call(this)}return Promise.resolve(Mr(document)).then(function(t){try{r=document.createElement("div");document.body.appendChild(r);return n.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i._dispatchPreviousEvents=function(){var t=this,e=this.host.getAdVolume();this.runtime.hostInfo.publishedEvents.forEach(function(n){var r=n.name;t._moatApi.dispatchEvent({type:r,adVolume:e})})};i._forwardVPAIDDurationToMoat=function(){return new Promise(function(t,e){var n;return Promise.resolve(this._shouldHaveDuration.promise).then(function(r){try{n=this.host.getAdDuration();this._moatApi.adData.duration=n;this._moatApi.dispatchEvent({type:"AdDurationChange",adVolume:this.host.getAdVolume(),duration:n});return t()}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i._checkIfAdDurationIsPresent=function(){if(!this._shouldHaveDuration.fulfilled&&this.host.getAdDuration()>0){this._shouldHaveDuration.resolve();this._shouldHaveDuration.fulfilled=!0}};return e}(yo);ko.register(Nu);for(var Ru=function(t){function e(){var e;(e=t.call(this)||this)._installVpaidHistory();return e}r(e,t);var i=e.prototype;i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n,r,i;r=(n=o||{}).slot,i=n.videoSlot;this._ownerDocument=i&&i.ownerDocument||r&&r.ownerDocument||document;return Promise.resolve(this._installWhiteOpsScript()).then(function(n){try{return t()}catch(t){return e(t)}},e)}.bind(this))};i._installWhiteOpsScript=function(){return new Promise(function(t,e){var n,r=function(){try{return t()}catch(t){return e(t)}},i=function(t){try{return r()}catch(t){return e(t)}};try{n=this._getWhiteOpsScriptUri();return Promise.resolve(li(n)).then(function(t){try{this._maybeTriggerHistoryUpdate();return r()}catch(t){return i()}}.bind(this),i)}catch(t){i()}}.bind(this))};i._getWhiteOpsParams=function(){var t=Object.assign({},this.config,{oz_vp:2,oz_vid:this._adVideoSlot&&this._adVideoSlot.id,oz_flash_id:this._bridgeId});delete t.ci;delete t.script;return t};i._getWhiteOpsScriptUri=function(){return t=this.config.ci,e=this._getWhiteOpsParams(),"https://s.tpcserve.com/2/"+t+"/pagespeed.js?"+Ho(e);var t,e};i._installVpaidHistory=function(){if(null==this._bridgeId){this._bridgeId="bridge"+ki();this._history=[];this._callback=null;this._historyDirty=!1;if(window){null==window.__ozoki_vpaid&&(window.__ozoki_vpaid=[]);this._history=window.__ozoki_vpaid}else this._history=[]}};i._pushHistory=function(t,e){void 0===e&&(e=null);var n=[this._bridgeId,ki(),t,e];this._history.push(n);this._triggerHistoryUpdate()};i._triggerHistoryUpdate=function(){null==this._callback&&null!=window&&null!=window.__ozoki_call&&(this._callback=window.__ozoki_call);this._historyDirty=!0;if(null!=this._callback)try{this._callback.call(window);this._historyDirty=!1}catch(t){}};i._maybeTriggerHistoryUpdate=function(){this._historyDirty&&this._triggerHistoryUpdate()};i.beforeSubscribeSync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._pushHistory("subscribe",e)};i.beforeUnsubscribeSync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._pushHistory("unsubscribe",e)};n(e,null,[{key:"id",get:function(){return"wo"}}]);return e}(yo),Mu=function(t,e){var n=""+t+Si(e),r=Ru.prototype[n];Ru.prototype[n]=function(){var t=arguments;return new Promise(function(n,i){function o(){return n()}var s,u,a;for(s=t.length,u=new Array(s),a=0;a<s;a++)u[a]=t[a];this._pushHistory(e,u);return null!=r?Promise.resolve(r.apply(this,u)).then(function(t){try{return o.call(this)}catch(t){return i(t)}}.bind(this),i):o.call(this)}.bind(this))}},ju=function(t,e){var n=""+t+Si(e),r=Ru.prototype[n];Ru.prototype[n]=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._pushHistory(e,n);null!=r&&r.apply(this,n)}},Fu=Object.keys(Ue).map(function(t){return Ue[t]}),Vu=0;Vu<Fu.length;++Vu)Mu("before",Fu[Vu]);for(var Lu=Object.keys(He).map(function(t){return He[t]}),Uu=0;Uu<Lu.length;++Uu)Mu("before",Lu[Uu]);Mu("before","setAdVolume");ju("after","handshakeVersion");for(var Wu=Object.keys(We),Hu=0;Hu<Wu.length;++Hu)ju("after","get"+Si(Wu[Hu]));ko.register(Ru);var zu=Object.keys(We),Gu=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,null,[{key:"id",get:function(){return"debug"}}]);return e}(yo),Bu=function(t){var e,n=Si(t),r="before"+n,i="after"+n;Object.assign(Gu.prototype,((e={})[r]=function(){var t=arguments;return new Promise(function(e,n){for(var i,o=t.length,s=new Array(o),u=0;u<o;u++)s[u]=t[u];(i=console).log.apply(i,["[debug] "+r].concat(s));return e()})},e[i]=function(){var t=arguments;return new Promise(function(e,n){for(var r,o=t.length,s=new Array(o),u=0;u<o;u++)s[u]=t[u];s.pop();(r=console).log.apply(r,["[debug] "+i].concat(s));return e()})},e))},qu=function(t){for(var e=0;e<t.length;++e)Bu(t[e])};qu(Object.keys(He).map(function(t){return He[t]}));qu(Object.keys(Ue).map(function(t){return Ue[t]}));qu(zu.map(function(t){return"set"+Si(t)}));for(var Qu=function(t){var e=zu[t],n="afterGet"+Si(e),r=void 0;Gu.prototype[n]=function(){var t,n=(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t];if(r!==n){console.log("[debug] "+e+":",r,"â",n);r=n}}},$u=0;$u<zu.length;++$u)Qu($u);ko.register(Gu);var Ku=k.f,Ju=At.f,Xu=l.RegExp,Yu=Xu,Zu=Xu.prototype,ta=/a/g,ea=/a/g,na=new Xu(ta)!==ta;if(v&&(!na||p(function(){ea[ut("match")]=!1;return Xu(ta)!=ta||Xu(ea)==ea||"/a/i"!=Xu(ta,"i")}))){Xu=function(t,e){var n=this instanceof Xu,r=tn(t),i=void 0===e;return!n&&r&&t.constructor===Xu&&i?t:js(na?new Yu(r&&!i?t.source:t,e):Yu((r=t instanceof Xu)?t.source:t,r&&i?pn.call(t):e),n?this:Zu,Xu)};for(var ra=function(t){t in Xu||Ku(Xu,t,{configurable:!0,get:function(){return Yu[t]},set:function(e){Yu[t]=e}})},ia=Ju(Yu),oa=0;ia.length>oa;)ra(ia[oa++]);Zu.constructor=Xu;Xu.prototype=Zu;O(l,"RegExp",Xu)}ir("RegExp");var sa=Symbol("play"),ua=function(t){function e(){var e;(e=t.call(this)||this)[sa]=null;return e}r(e,t);var i=e.prototype;i._createPlay=function(t){var e=this,n=t.ownerDocument||document,r=Hr(n,"svg",{width:"100%",height:"100%",viewBox:"0 0 100 100"},{display:"none",position:"absolute","z-index":"10000001","background-color":"rgba(0, 0, 0, 0.3)",cursor:"pointer"},!0),i=Hr(n,"circle",{cx:"50%",cy:"50%",r:"25%",fill:"none",stroke:"white","stroke-width":"2px"},!0);r.appendChild(i);var o=Hr(n,"polygon",{points:"45,40,45,60,60,50",fill:"white"},!0);r.appendChild(o);this[sa]=r;t.appendChild(r);r.addEventListener("click",function(){e.host.resumeAd()})};i._isEnabled=function(){var t=this.config.acceptMedia,e=this.runtime.guestInfo.mediaFile.type,n=!0;if("string"==typeof t&&"string"==typeof e)try{n=new RegExp(t).test(e)}catch(t){}return n};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){this._isEnabled()&&this._createPlay(o.slot);return t()}.bind(this))};i.afterAdPaused=function(){return new Promise(function(t,e){null!==this[sa]&&Wr(this[sa],{display:"block"},!0);return t()}.bind(this))};i.beforeAdPlaying=function(){return new Promise(function(t,e){null!==this[sa]&&Wr(this[sa],{display:"none"},!0);return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"play"}}]);return e}(yo),aa=Symbol("skip"),ca=Symbol("interval"),la={position:"absolute",bottom:"10%",right:"0px",padding:"12px","z-index":"10000001","background-color":"rgba(0, 0, 0, 0.7)",color:"white","font-size":"12px","font-weight":"200","font-family":"Arial, Helvetica, sans-serif","border-color":"rgba(255, 255, 255, 0.5)","border-width":"0px","border-style":"solid",cursor:"default","user-select":"none"},fa=Object.assign({},la,{"font-size":"18px","border-width":"1px 0px 1px 1px",cursor:"pointer"}),ha=function(t){function e(){var e;(e=t.call(this)||this)[aa]=null;e[ca]=null;return e}r(e,t);var i=e.prototype;i._createSkip=function(t){var e=this,n=(t.ownerDocument||document).createElement("div");n.addEventListener("click",function(){return e._maybeSkip()});this[aa]=n;this._updateSkip();t.appendChild(n)};i._updateSkip=function(){var t=this._getSkipTimeRemaining(),e=!isNaN(t)||this.host.getAdSkippableState();Wr(this[aa],{display:e?"block":"none"},!0);var n=t>0,r="Skip ad";n&&(r="You can skip to video in [T]".replace("[T]",Math.round(t)));this[aa].innerHTML!==r&&(this[aa].innerHTML=r);Wr(this[aa],n?la:fa,!0)};i._getSkipTimeRemaining=function(){var t=this.runtime.config.skipOffset;if("number"!=typeof t)return NaN;var e=this.host.getAdDuration(),n=this.host.getAdRemainingTime();return e<0||n<0?NaN:t-Math.max(e-n,0)};i._maybeSkip=function(){return new Promise(function(t,e){function n(){return t()}if(this._getSkipTimeRemaining()>0)return t();if(!0===this.guest.getAdSkippableState()){this.host.skipAd();return n.call(this)}return Promise.resolve(this.publish("AdSkipped")).then(function(t){try{this.host.stopAd();return n.call(this)}catch(t){return e(t)}}.bind(this),e)}.bind(this))};i._isEnabled=function(){var t=this.config.acceptMedia;return null==t||"string"==typeof t&&null!=this.runtime.guestInfo.mediaFile.type.match(new RegExp(t))};i.beforeInitAd=function(t,e,n,r,i,o){return new Promise(function(t,e){var n=this;if(this._isEnabled()){this._createSkip(o.slot);this[ca]=setInterval(function(){return n._updateSkip()},250)}return t()}.bind(this))};i.afterAdSkippableStateChange=function(){return new Promise(function(t,e){this._isEnabled()&&this._updateSkip();return t()}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){if(null!==this[ca]){clearInterval(this[ca]);this[ca]=null}return t()}.bind(this))};n(e,null,[{key:"id",get:function(){return"skip"}}]);return e}(yo);ko.register(ua);ko.register(ha);var da=function(t,e){return e.offset.value-t.offset.value},pa=function(t){function e(){var e;(e=t.call(this)||this)._startTime=0;e._elapsedTime=0;e._interval=null;e._trackingPixels={};e._progressPixels={};e._remainingAbsoluteProgressEvents=[];e._remainingRelativeProgressEvents=[];return e}r(e,t);var i=e.prototype;i.init=function(){var t=this;this._trackingPixels={};Object.keys(Qe).forEach(function(e){t._trackingPixels[e]=[];Qe[e].forEach(function(n){var r;(r=t._trackingPixels[e]).push.apply(r,t.config[n])})});this._progressPixels=this.config.progress};i.beforeAdVideoStart=function(){return new Promise(function(t,e){if(null!=this._progressPixels){this._initTimer();this._indexProgressEvents()}return t()}.bind(this))};i.beforeAdPlaying=function(){return new Promise(function(t,e){null!=this._progressPixels&&this._initTimer();return t()}.bind(this))};i.beforeAdPaused=function(){return new Promise(function(t,e){null!=this._progressPixels&&this._pauseTimer();return t()}.bind(this))};i.beforeAdStopped=function(){return new Promise(function(t,e){null!=this._progressPixels&&this._stopProgressTimer();return t()}.bind(this))};i._indexProgressEvents=function(){var t=this;this._remainingAbsoluteProgressEvents=[];this._remainingRelativeProgressEvents=[];this._progressPixels.forEach(function(e){"RelativeTimeOffset"===e.offset.$type?t._remainingRelativeProgressEvents.push(e):"AbsoluteTimeOffset"===e.offset.$type&&t._remainingAbsoluteProgressEvents.push(e)});this._remainingAbsoluteProgressEvents.sort(da);this._remainingRelativeProgressEvents.sort(da)};i._initTimer=function(){var t=this;0===this._startTime&&(this._startTime=ki());this._interval=setInterval(function(){t._updateTimer()},100)};i._updateTimer=function(){var t=this._startTime>0?ki()-this._startTime:0,e=(this._elapsedTime+t)/1e3,n=this.host.getAdDuration();if(n>=0){var r=e/parseFloat(n)*100;this._dispatchProgressEvents(this._remainingAbsoluteProgressEvents,e);this._dispatchProgressEvents(this._remainingRelativeProgressEvents,r)}this._hasRemainingProgressEvents()||this._stopProgressTimer()};i._dispatchProgressEvents=function(t,e){for(var n=this,r=t.length;r>0&&e>=t[r-1].offset.value;)--r;r<t.length&&t.splice(r).forEach(function(t){var e=t.uri;n.trackPixel(e)})};i._hasRemainingProgressEvents=function(){return this._remainingAbsoluteProgressEvents.length+this._remainingRelativeProgressEvents.length>0};i._pauseTimer=function(){if(this._startTime>0){this._elapsedTime+=ki()-this._startTime;this._startTime=0}this._updateTimer()};i._stopProgressTimer=function(){if(null!=this._interval){clearInterval(this._interval);this._interval=null;this._updateTimer()}};i._getPixelUris=function(t){var e=this._trackingPixels[t];return null!=e?e.map(function(t){return t.uri}):[]};i._onVpaidEventHook=function(t,e){var n=this;"before"===t&&this._getPixelUris(e).forEach(function(t){n.trackPixel(t,e===Ue.AdError?{errorcode:901}:{})})};n(e,null,[{key:"id",get:function(){return"vast-tracking"}}]);return e}(yo);!function(t,e){for(var n=function(n){for(var r=Je[n],i=function(n){var i=Xe[n],o=""+r+i,s=t[o];t[o]=function(){var t=arguments;return new Promise(function(n,o){var u,a,c,l,f;for(u=t.length,a=new Array(u),c=0;c<u;c++)a[c]=t[c];l=e.call.apply(e,[this,r,i].concat(a));return Promise.resolve((f=l,new Promise(function(t,e){function n(){return t()}return Ke(f)?Promise.resolve(f).then(function(t){try{return n.call(this)}catch(t){return e(t)}}.bind(this),e):n.call(this)}))).then(function(t){try{if(null!=s)return Promise.resolve(s.apply(this,a)).then(function(t){try{return e.call(this)}catch(t){return o(t)}}.bind(this),o);function e(){return n()}return e.call(this)}catch(t){return o(t)}}.bind(this),o)}.bind(this))}},o=0;o<Xe.length;++o)i(o)},r=0;r<Je.length;r++)n(r)}(pa.prototype,pa.prototype._onVpaidEventHook);ko.register(pa);var va,ma,ga="event",ya=function(t){function e(e){var n;(n=t.call(this,e)||this).setHitType(ga);return n}r(e,t);var n=e.prototype;n.setEventCategory=function(t){return this.set("ec",t)};n.setEventAction=function(t){return this.set("ea",t)};n.setEventLabel=function(t){return this.set("el",t)};n.setEventValue=function(t){return this.set("ev",t)};return e}(function(){function t(t){this._options=Object.assign({},t);this._params={};this.setProtocolVersion(1)}var e=t.prototype;e.build=function(){return this._baseUrl+"?"+this.buildQueryString()};e.buildQueryString=function(){return Wo.stringify(this._params)+"&z="+this.buildCacheBuster()};e.buildCacheBuster=function(){if(this._params.hasOwnProperty("z")){var t=this._params.z;delete this._params.z;return encodeURIComponent(t)}if(this._options.vast)return"[CACHEBUSTING]";var e=1e6+Math.floor(9e6*Math.random());return""+(new Date).getTime()+e};e.setBaseUrl=function(t){this._baseUrl=t;return this};e.set=function(t,e){null!=e&&(this._params[t]=e);return this};e.setProtocolVersion=function(t){return this.set("v",t)};e.setTrackingId=function(t){return this.set("tid",t)};e.setClientId=function(t){return this.set("cid",t)};e.setHitType=function(t){return this.set("t",t)};e.setDocumentReferrer=function(t){return this.set("dr",t)};e.setCampaignName=function(t){return this.set("cn",t)};e.setCampaignSource=function(t){return this.set("cs",t)};e.setCampaignMedium=function(t){return this.set("cm",t)};e.setCampaignKeyword=function(t){return this.set("ck",t)};e.setCampaignContent=function(t){return this.set("cc",t)};e.setCampaignId=function(t){return this.set("ci",t)};e.setCustomDimension=function(t,e){return this.set("cd"+t,e)};e.setCustomMetric=function(t,e){return this.set("cm"+t,e)};n(t,[{key:"options",get:function(){return this._options}}]);return t}()),_a=10,ba={timeout:2e3,postAllowed:!1,styles:{position:"absolute",top:0,left:0,width:0,height:0,border:0,pointerEvents:"none",visibility:"hidden"}},wa=function(){},ka=function(){function t(t,e){void 0===e&&(e={});this._url=t;this._options=Object.assign({},ba,e);var n=window,r=0;try{for(;r<_a&&n.parent!==n&&null!=n.parent.document.createElement("img");){n=n.parent;++r}}catch(t){}this._window=n}var e=t.prototype;e.load=function(){if(null!=this._deferred)return Promise.reject(new Error("Already loading"));this._deferred=function(){var t={};t.promise=new Promise(function(e,n){t.resolve=e;t.reject=n});return t}();this._deferred.promise.catch(wa);(this._options.postAllowed&&"function"==typeof navigator.sendBeacon?this._sendBeacon:this._loadPixel).call(this);return this._deferred.promise};e.dispose=function(){this._rejectWith("Disposed")};e._sendBeacon=function(){navigator.sendBeacon(this._url,"")?this._deferred.resolve():this._deferred.reject(new Error("Failed"))};e._loadPixel=function(){this._image=this._window.document.createElement("img");this._image.src=this._url;Object.assign(this._image.style,this._options.styles);this._image.onload=this._onImageLoad.bind(this);this._image.onerror=this._onImageError.bind(this);this._window.document.body.appendChild(this._image);setTimeout(this._onImageTimeout.bind(this),this._options.timeout)};e._onImageLoad=function(){this._deferred.resolve();this._remove()};e._onImageError=function(){this._rejectWith("Unknown error")};e._onImageTimeout=function(){this._rejectWith("Timed out")};e._rejectWith=function(t){this._deferred.reject(new Error(t));this._remove()};e._remove=function(){if(null!=this._image){null!=this._image.parentNode&&this._image.parentNode.removeChild(this._image);this._image=null}};n(t,[{key:"promise",get:function(){return null!=this._deferred?this._deferred.promise:null}}]);return t}(),Aa=Symbol("tracking"),Sa=function(){},Ea=[],Pa=function(){function t(){this[Aa]=[]}var e=t.prototype;e.complete=function(){return new Promise(function(t,e){function n(){if(this[Aa].length>0){i=this[Aa];this[Aa]=[];return Promise.resolve(Promise.all(i)).then(function(t){try{return n}catch(t){return e(t)}},e)}return[1]}function r(){return t()}var i,o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,e);try{if(t.pop){if(t.length)return t.pop()?r.call(this):t;t=n}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(n)}.bind(this))};e.track=function(t,e){void 0===e&&(e={});var n=new ka(t,e),r=n.load().catch(Sa);this[Aa].push(r);Ea.push(r);return n};return t}(),Ia=function(t){t.setBaseUrl("https://pxsrv.net/")},Ta=/^(?:(\w+):)?\/\/(.*)/,Ca=/[_%]/g,Oa=function(t){return"_"===t?"_5F":"_"},xa=function(t){function e(e){var n;n=t.call(this,e)||this;Ia(i(n));return n}r(e,t);var n=e.prototype;n.setRedirectUrl=function(t){this._redirectUrl=t;return this};n.build=function(){if(null==this._redirectUrl)return t.prototype.build.call(this);var e=Ta.exec(this._redirectUrl);if(null==e)throw new Error("Invalid redirect URL: "+this._redirectUrl);return this._baseUrl+"t/"+this._buildEmbeddedQueryString()+"/"+(e[1]||"https")+"/"+e[2]};n._buildEmbeddedQueryString=function(){return this.buildQueryString().replace(Ca,Oa)};return e}(ya),Da={placement:"ZA-",embed:"ZO-",wrapper:"ZW-"},Na=Object.keys(Da),Ra=(va=function(t){function e(e){var n;void 0===e&&(e=null);n=t.call(this)||this;null!=e&&(n.config=e);return n}r(e,t);e.prototype.trackEvent=function(t,e,n,r){if(null==this._trackingId)throw new Error("Invalid pxsrv configuration");var i;i=null!=n&&"object"!=typeof n?Object.assign({},r,{label:n}):Object.assign({},n);var o=(new xa).setTrackingId(this._trackingId).setClientId(this._clientId).setEventCategory(t).setEventAction(e);null!=i.label&&o.setEventLabel(i.label);null!=i.value&&o.setEventValue(i.value);Object.keys(i.customDimensions||{}).forEach(function(t){o.setCustomDimension(t,i.customDimensions[t])});Object.keys(i.customMetrics||{}).forEach(function(t){o.setCustomMetric(t,i.customMetrics[t])});null!=i.redirectUrl&&o.setRedirectUrl(i.redirectUrl);if(null!=this._baseUrl){var s="function"==typeof this._baseUrl?this._baseUrl(t,e,i):this._baseUrl;o.setBaseUrl(s)}var u=o.build();return this.track(u,{postAllowed:!0})};n(e,[{key:"config",set:function(t){this._trackingId=function(t){null!=t.placement&&null!=t.campaign&&(t={placement:t.campaign+"-"+t.placement});for(var e=0;e<Na.length&&null==t[Na[e]];)++e;if(e===Na.length)throw new Error("Invalid pxsrv configuration");var n=Na[e];return Da[n]+t[n]}(t);this._baseUrl=t.baseUrl;this._clientId=t.client||function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^(new Date/1e9%1+Math.random())%1*(20^t?16:4):4).toString(16):"-");return e}()}}]);return e}(Pa),ma=null,function(){null===ma&&(ma=new va);return ma}),Ma=["GuestNotAvailableError","MethodNotAvailableError"],ja=["initAd","startAd","stopAd","skipAd"],Fa=io,Va=function(t,e,n){null==t[e]&&(t[e]=function(){var t=null;try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=this._phasedGuestCallSync(e,i)}catch(e){if(!(null!=e&&Ma.indexOf(e.name)>=0))throw e;t=n}return t})},La=function(t,e){null==t[e]&&(t[e]=function(){var t=this;ja.indexOf(e)>=0&&this[Fa].track(e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this._phasedGuestCall(e,r).catch(function(n){t._onError(n,e)})})},Ua=function(t){if(null!=t){var e=t.error;return null!=e?e:{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno}}return"[Unknown error]"},Wa=function(){var t=window.navigator&&window.navigator.connection&&window.navigator.connection.downlink;return null!=t?1024*t:1/0},Ha=Symbol("timings"),za=Symbol("eventCount"),Ga=Symbol("lastEventTime"),Ba=Symbol("handlers"),qa=Symbol("configured"),Qa=Symbol("configuring"),$a=io,Ka=["start","load","initAd","AdLoaded","startAd","AdStarted"],Ja=ki(),Xa=180,Ya=Math.random()<.1,Za=document,tc=function(){var t=window,e=0;try{for(;e<10&&t.parent!==t&&null!=t.parent.location&&null!=t.parent.location.hostname;){t=t.parent;++e}}catch(t){}return t}().location.hostname,ec=function(){function t(t){var e=this;this[Ha]={start:Ja};this[za]=0;this[Ga]=Ja;this[Ba]=[];this[qa]=!1;this[Qa]=xr();var n=function(e){var n=t[$a].guestInfo.mediaFile;return null!=n?n[e]:void 0};this.addDimension(100,function(){return t[$a].hostInfo.viewMode});this.addDimension(101,function(){return n("type")});this.addDimension(103,function(){return n("uri")});this.addDimension(105,function(){return"vpaid-transformer@0.19.29+js"});this.addDimension(107,function(){return Za.readyState});this.addDimension(171,function(){return tc});this.addMetric(100,function(){return t.getAdWidth()});this.addMetric(101,function(){return t.getAdHeight()});this.addMetric(104,function(){return t.getAdVolume()});this.addMetric(105,function(){return n("width")});this.addMetric(106,function(){return n("height")});this.addMetric(107,function(){return n("bitrate")});this.addMetric(108,function(){return t[$a].hostInfo.desiredBitrate});this.addMetric(109,function(){var t=Wa();return isFinite(t)?t:-1});this.addMetric(110,function(){return ki()-Ja});this.addMetric(111,function(){var t=ki(),n=t-e[Ga];e[Ga]=t;return n});this.addMetric(112,function(){return t[$a].hostInfo.width});this.addMetric(113,function(){return t[$a].hostInfo.height});this.addMetric(167,function(){return t.getAdDuration()});for(var r=function(t){var n=Xa+t,r=Ka[t],i=Ka[t+1];e.addMetric(n,function(){return e._getTimingInfo(r,i)})},i=0;i<Ka.length-1;i++)r(i);window.addEventListener("unload",function(){return e.track("global-unload")});window.addEventListener("error",function(t){return e.trackError("global-error",Ua(t))});var o=function(n){return t.subscribe(function(){return e.track(n)},n)};o(Ue.AdLoaded);o(Ue.AdStarted);o(Ue.AdImpression);o(Ue.AdStopped);t.subscribe(function(t){return e.trackError(Ue.AdError,t)},Ue.AdError);this.track("load")}var e=t.prototype;e.configure=function(t){var e=this,n=t.wrapperId,r=t.customDimensions,i=t.customMetrics,o=t.trackingHost,s=t.adServingId;if(!this[qa]&&null!=n){var u={wrapper:n};null!=o&&(u.baseUrl="https://"+o);null!=s&&(u.client=s);Ra().config=u;null!=r&&Object.keys(r).forEach(function(t){e.addDimension(t,function(){return r[t]})});null!=i&&Object.keys(i).forEach(function(t){e.addMetric(t,function(){return i[t]})});this[qa]=!0;this[Qa].resolve()}};e.track=function(t,e,n,r){void 0===e&&(e=null);void 0===n&&(n=null);void 0===r&&(r=!1);try{this._addTiming(t);if(!r&&(!Ya||this[za]>=100))return;this[za]++;var i=t+(r?"":"/10"),o=this._getPixelInfo(e,n);this._pxsrvTrack("vpaid",i,o)}catch(t){}};e.trackError=function(t,e,n,r,i){void 0===n&&(n=null);void 0===r&&(r=null);void 0===i&&(i=!1);var o=to(e=e||"[Unknown error]"),s=Object.assign({},n,{110:o.substring(0,1e3)});this.track(t,s,r,i)};e.addDimension=function(t,e){this._addField("customDimensions",t,e)};e.addMetric=function(t,e){this._addField("customMetrics",t,e)};e._addField=function(t,e,n){this[Ba].push(function(r){r[t][""+e]=n()})};e._addTiming=function(t){null==this[Ha][t]&&(this[Ha][t]=ki())};e._pxsrvTrack=function(t,e,n){var r=this;this[qa]?Ra().trackEvent(t,e,n):this[Qa].promise.then(function(){n=r._mergeOptions(r._getPixelInfo(null,null),n);Ra().trackEvent(t,e,n)})};e._mergeOptions=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{customDimensions:Object.assign.apply(Object,[{}].concat(e.map(function(t){return t.customDimensions}))),customMetrics:Object.assign.apply(Object,[{}].concat(e.map(function(t){return t.customMetrics})))}};e._getPixelInfo=function(t,e){var n={customDimensions:{},customMetrics:{}};this[Ba].forEach(function(t){try{t(n)}catch(t){}});Object.assign(n.customDimensions,t);Object.assign(n.customMetrics,e);return n};e._getTimingInfo=function(t,e){var n=this[Ha][t],r=this[Ha][e];return null!=n&&n>0&&null!=r&&r>0?r-n:void 0};n(t,[{key:"configured",get:function(){return this[qa]}}]);return t}(),nc={width:"100%",height:"100%",pointerEvents:"auto",position:"absolute",top:0,left:0},rc={timestamp:function(){return encodeURIComponent((e=(t=new Date).getTimezoneOffset(),r=((n=Math.floor(e/60))<0?"+"+oi(-n):"-"+oi(n))+":"+oi(e%60),t.getFullYear()+"-"+oi(t.getMonth()+1)+"-"+oi(t.getDate())+"T"+oi(t.getHours())+":"+oi(t.getMinutes())+":"+oi(t.getSeconds())+"."+si(t.getMilliseconds())+r));var t,e,n,r},cachebusting:gn,errorcode:function(t){var e=t.errorcode;return null!=e?e:900}},ic=/\[([A-Z_]+)]/g,oc=Symbol("host"),sc=Symbol("guest"),uc=Symbol("config"),ac=Symbol("tracking"),cc=Symbol("hostInfo"),lc=Symbol("guestInfo"),fc=Symbol("container"),hc=Symbol("containerSelector"),dc=fo,pc=lo,vc=oo,mc=so,gc=uo,yc={wrapperId:null,duration:null,skipOffset:null,mediaFiles:[],adParameters:null,plugins:[],flags:0},_c=function(t,e){var n=(t.ownerDocument||document).createElement("div");n.id=e;Object.assign(n.style,nc);t.appendChild(n);return n},bc=function(t){function e(e){var n;(n=t.call(this)||this)[oc]=e;return n}r(e,t);n(e,[{key:"publishedEvents",get:function(){return this[oc][dc].published}},{key:"width",get:function(){return this._get("width")}},{key:"height",get:function(){return this._get("height")}},{key:"viewMode",get:function(){return this._get("viewMode")}},{key:"desiredBitrate",get:function(){return this._get("desiredBitrate")}},{key:"environmentVariables",get:function(){return this._get("environmentVariables")}},{key:"slot",get:function(){return this._get("slot")}},{key:"videoSlot",get:function(){return this._get("videoSlot")}},{key:"vastChain",get:function(){return this._get("vastChain")}}]);return e}(Jr),wc=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"mediaFile",get:function(){return this._get("mediaFile")}}]);return e}(Jr),kc=function(){function t(t){this[oc]=t;this[sc]=null;this[cc]=new bc(t);this[lc]=new wc;this[uc]=Object.assign({},yc);this[ac]=new ec(t);this[fc]=null;this[hc]=null;this[gc]=wi(this[gc])}var e=t.prototype;e.publish=function(t,e,n){void 0===e&&(e=[]);void 0===n&&(n=null);return this[oc]._publish(t,e,n)};e.track=function(){var t;(t=this[ac]).track.apply(t,arguments)};e.trackPixel=function(t,e){t=function(t,e){void 0===e&&(e={});return t.replace(ic,function(t,n){var r=n.toLowerCase();return null!=rc[r]?rc[r](e):null!=e[r]?encodeURIComponent(""+e[r]):""})}(t,e);return new ka(t).load()};e.trackError=function(){var t;(t=this[ac]).trackError.apply(t,arguments)};e.isFlagEnabled=function(t){return 0!=(this[uc].flags&t)};e[vc]=function(t){this[uc]=Object.assign({},yc,t);this[ac].configure(t)};e[mc]=function(t){this[sc]=t};e[gc]=function(){var t=this[cc].slot,e=t.ownerDocument||document,n="vpaid-container-"+gn(),r=n+"-0",i=e.createElement("style");i.textContent="#"+r+", #"+r+" :not(html) { \n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  background: none;\n  opacity: 1;\n  border: none;\n  outline: none;\n  top: auto;\n  bottom: auto;\n  left: auto;\n  right: auto;\n }";t.appendChild(i);for(var o=_c(t,r),s=o,u="#"+o.id,a=1;a<5;++a)u+=" #"+(s=_c(s,n+"-"+a)).id;this[fc]=s;this[hc]=u};n(t,[{key:"host",get:function(){return this[oc]}},{key:"guest",get:function(){return this[sc]}},{key:"hostInfo",get:function(){return this[cc]}},{key:"guestInfo",get:function(){return this[lc]}},{key:"config",get:function(){return this[uc]}},{key:"plugins",get:function(){return this[oc][pc].plugins}},{key:"tracking",get:function(){return this[ac]}},{key:"container",get:function(){return this[fc]}},{key:"containerSelector",get:function(){return this[hc]}}]);return t}(),Ac=function(t){function e(){var e;(e=t.call(this,"Guest VPAID not available")||this).name="GuestNotAvailableError";return e}r(e,t);return e}(Tn),Sc=function(t){function e(e){var n;(n=t.call(this,'Method "'+e+'" not available')||this)._methodName=e;n.name="MethodNotAvailableError";return n}r(e,t);n(e,[{key:"methodName",get:function(){return this._methodName}}]);return e}(Tn),Ec=Symbol("guest"),Pc=Symbol("guestVpaidVersion"),Ic=Symbol("guestIframe"),Tc=Symbol("guestSubscriptions"),Cc=Symbol("managingSlotSize"),Oc=Symbol("hadError"),xc=lo,Dc=fo,Nc=io,Rc=ho,Mc=function(){function t(){this[xc]=new Ci;this[Dc]=new ro;this[Ec]=null;this[Ic]=null;this[Tc]=[];this[Cc]=!1;this[Oc]=!1;this[Nc]=new kc(this)}var e=t.prototype;e.subscribe=function(t,e,n){var r=this;void 0===n&&(n=null);this[xc].runPhaseSync("subscribe",[t,e,n],function(){r[Dc].subscribe(t,e,n)},function(t){return r._onError(t,"subscribe")})};e.unsubscribe=function(t,e){var n=this;this[xc].runPhaseSync("unsubscribe",[t,e],function(){n[Dc].unsubscribe(t,e)},function(t){return n._onError(t,"unsubscribe")})};e.handshakeVersion=function(t){this[Pc]=t;return"2.0"};e.initAd=function(t,e,n,r,i,o){this[Nc].track("initAd");this._initAdAsync(t,e,n,r,i,o)};e.resizeAd=function(t,e,n){var r=this,i=this[Nc].hostInfo;try{i._putAll({width:t,height:e,viewMode:n});this._phasedGuestCall("resizeAd",[t,e,n]).catch(function(t){r._onError(t,"resizeAd")})}catch(t){this._onError(t,"resizeAd")}};e._createGuest=function(t){return new Promise(function(t,e){return e(new Error("Method is abstract"))})};e._initAdAsync=function(t,e,n,r,i,o){return new Promise(function(s,u){var a,c,l,f,h,d,p,v,m;c=(a=this[Nc]).hostInfo;var g=function(){try{return s()}catch(t){return u(t)}},y=function(t){try{this._onError(t,"initAd");return g()}catch(t){return u(t)}}.bind(this);try{c._putAll({width:t,height:e,viewMode:n,desiredBitrate:r,environmentVariables:o});if(null==o)a.track("no-envvars");else{l=o.slot,f=o.videoSlot;c._putAll({slot:l,videoSlot:f});if(null==l)a.track("no-slot");else{this[Cc]=null!=l.style&&(0===l.clientWidth||0===l.clientHeight);this._maybeResizeSlot(t,e)}null==f&&a.track("no-video-slot")}return Promise.resolve(this._createGuest({width:t,height:e,viewMode:n,desiredBitrate:r,creativeData:i,envVars:o})).then(function(i){try{d=(h=i).iframe,p=h.vpaid,v=h.adParameters;this[Ec]=p;this[Ic]=d;this._guestSubscribeAll();return Promise.resolve(this._phasedGuestCall("handshakeVersion",[this[Pc]],!0)).then(function(i){try{m={AdParameters:v};return Promise.resolve(this._phasedGuestCall("initAd",[t,e,n,r,m,o])).then(function(t){try{return g()}catch(t){return y(t)}},y)}catch(t){return y(t)}}.bind(this),y)}catch(t){return y(t)}}.bind(this),y)}catch(t){y(t)}}.bind(this))};e._maybeResizeSlot=function(t,e){if(this[Cc]){var n=this[Nc].hostInfo.slot;Object.assign(n.style,{width:t+"px",height:e+"px"})}};e._publish=function(t,e,n){void 0===e&&(e=[]);void 0===n&&(n=null);switch(t){case Ue.AdError:if(!this._processErrorAndDecideOnPublish(e[0],n))return Promise.resolve();"guest"!==n&&(e[0]=to(e[0]));break;case Ue.AdClickThru:"string"!=typeof e[0]&&(e[0]=this[Rc])}return this._phasedGuestEvent(t,e)};e._guestSubscribeAll=function(){for(var t=this,e=Object.keys(Ue).map(function(t){return Ue[t]}),n=function(n){var r=e[n],i=[function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t._onGuestEvent(r,n)},r];t._guestCall("subscribe",i);t[Tc].push(i)},r=0;r<e.length;++r)n(r)};e._guestUnsubscribeAll=function(){if(null!=this[Ec])for(var t=this[Tc].splice(0),e=0;e<t.length;++e)try{this._guestCall("unsubscribe",t[e])}catch(t){}};e._onGuestEvent=function(t,e){this._publish(t,e,"guest")};e._guestCall=function(t,e){if(null==this[Ec])throw new Ac;"resizeAd"===t&&this._maybeResizeSlot.apply(this,e);var n=this[Ec][t];if("function"!=typeof n)throw new Sc(t);return n.apply(this[Ec],e)};e._phasedGuestCallSync=function(t,e){var n=this;return this[xc].runPhaseSync(t,e,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n._guestCall(t,r)},function(e){return n._onError(e,t)})};e._phasedGuestCall=function(t,e,n){var r=this;void 0===n&&(n=!1);return this._runPhase(t,e,function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var s=r._guestCall(t,i);return n?s:null},function(){return r[Oc]})};e._phasedGuestEvent=function(t,e){var n=this;return this._runPhase(t,e,function(){var e=arguments;return new Promise(function(r,i){function o(){for(s=e.length,u=new Array(s),a=0;a<s;a++)u[a]=e[a];n[Dc].publish(t,u);return r()}var s,u,a;return $e.indexOf(t)>=0?Promise.resolve(n._dispose()).then(function(t){try{return o.call(this)}catch(t){return i(t)}}.bind(this),i):o.call(this)})},function(){return n[Oc]&&$e.indexOf(t)<0})};e._runPhase=function(t,e,n,r){return new Promise(function(i,o){var s=function(){try{if(t===Ue.AdStopped&&null!=this[Ic]){try{this[Ic].parentNode.removeChild(this[Ic])}catch(t){}this[Ic]=null}return i()}catch(t){return o(t)}}.bind(this),u=function(e){try{this._onError(e,t);return s()}catch(t){return o(t)}}.bind(this);try{return Promise.resolve(this[xc].runPhase(t,e,n,r)).then(function(t){try{return s()}catch(t){return u(t)}},u)}catch(t){u(t)}}.bind(this))};e._addPlugin=function(t){this[xc].addPlugin(t)};e._processErrorAndDecideOnPublish=function(t,e){if(null!=t&&"GuestNotAvailableError"===t.name)return!1;var n=!this[Oc];if(n){this[Oc]=!0;this._guestUnsubscribeAll()}return n};e._onError=function(t,e){this._processErrorAndDecideOnPublish(t,e)&&this._phasedGuestEvent(Ue.AdError,[t.message])};e._dispose=function(){return new Promise(function(t,e){var n=function(){try{var n=function(){try{return t()}catch(t){return e(t)}},r=function(t){try{return n()}catch(t){return e(t)}};try{return Promise.resolve(new Promise(function(t,e){function n(){if(Ea.length>0){i=Ea;Ea=[];return Promise.resolve(Promise.all(i)).then(function(t){try{return n}catch(t){return e(t)}},e)}return[1]}function r(){return t()}var i,o;return(o=function(t){for(;t;){if(t.then)return void t.then(o,e);try{if(t.pop){if(t.length)return t.pop()?r.call(this):t;t=n}else t=t.call(this)}catch(t){return e(t)}}}.bind(this))(n)})).then(function(t){try{return n()}catch(t){return r()}},r)}catch(t){r()}}catch(t){return e(t)}},r=function(t){try{return n()}catch(t){return e(t)}};try{return Promise.resolve(this[xc].dispose()).then(function(t){try{return n()}catch(t){return r()}},r)}catch(t){r()}}.bind(this))};return t}();!function(t){!function(t){for(var e=Object.keys(We),n=0;n<e.length;n++){var r=e[n],i=We[r],o=i.defaultValue,s=i.writable,u=Si(r);Va(t,"get"+u,o);s&&La(t,"set"+u)}}(t);!function(t){for(var e=Object.keys(He).map(function(t){return He[t]}),n=0;n<e.length;++n){var r=e[n];La(t,r)}}(t)}(Mc.prototype);var jc,Fc,Vc=/\/js\/vpaid-transformer\/[^\/]+\/[a-z0-9-]+\.js#/,Lc=document.currentScript||function(){for(var t=document.querySelectorAll("script"),e=t.length-1;e>=0;--e){var n=t[e],r=n.src;if(null!=r&&Vc.test(r))return n}return null}(),Uc=io,Wc=oo,Hc=so,zc=Symbol("loaders"),Gc=function(t){function e(e){var n;(n=t.call(this)||this)[zc]=e;n._preprocessHashConfig();return n}r(e,t);var n=e.prototype;n.getAdDuration=function(){return this._getPropertyValueWithConfigFallback("adDuration",this[Uc].config.duration)};n.getAdWidth=function(){return this._getPropertyValueWithConfigFallback("adWidth",this[Uc].hostInfo.width)};n.getAdHeight=function(){return this._getPropertyValueWithConfigFallback("adHeight",this[Uc].hostInfo.height)};n._getPropertyValueWithConfigFallback=function(e,n){var r=t.prototype["get"+Si(e)].call(this);return r===We[e].defaultValue&&null!=n?n:r};n._createGuest=function(t){return new Promise(function(e,n){var r,i,o,s,u;r=function(e){var n=function(t){return null==t||"string"==typeof t?t:t.AdParameters}(t.creativeData);try{return JSON.parse(n)}catch(t){throw new Error('Failed to parse AdParameters "'+n+'"')}}();this._loadConfig(r);return this[Uc].tracking.configured?Promise.resolve(this._loadMediaFile(r.mediaFiles,r.adParameters,t)).then(function(t){try{o=(i=t).iframe,s=i.vpaid,u=i.adParameters;this[Uc][Hc](s);return e({iframe:o,vpaid:s,adParameters:u})}catch(t){return n(t)}}.bind(this),n):n(new Error("Invalid configuration"))}.bind(this))};n._loadMediaFile=function(t,e,n){var r=function(t,e,n,r,i,o,s){void 0===o&&(o=Object.keys(Ji));void 0===s&&(s={});return function(t,e,n){for(var r=Object.keys(t).sort(Xi),i=null,o=0;null==i&&o<r.length;){var s=r[o],u=t[s];i=(0,Ji[s])(u,e,n);++o}return i}(function(t,e,n){for(var r={},i=0;i<t.length;++i){var o=t[i],s=bi(o);if(e.indexOf(s)>=0){null==r[s]&&(r[s]=[]);r[s].push(o)}}n&&function(t){if((function(){var t=null;try{t=window.parent.google.ima.VERSION}catch(t){}return"string"==typeof t}()||Li.test(window.location.href))&&null!=t.vpaid){var e=t.vpaid.filter(function(t){return e=t.uri,!Ui.test(e);var e});e.length>0?t.vpaid=e:Object.keys(t).length>1&&delete t.vpaid}}(r);return r}(t,o,s.noImaVpaid),function(t,e,n){var r=$i(t*Wi),i=$i(e*Wi),o=$i(t),s=$i(e),u=$i(n);return[{filter:function(t){var e=t.width,n=t.height,a=t.bitrate;return e>=o&&e<=r&&n>=s&&n<=i&&a<=u},selector:Bi},{filter:function(t){var e=t.width,n=t.height,r=t.bitrate;return e<=o&&n<=s&&r<=u},selector:qi},{filter:function(t){return t.bitrate<=u},selector:qi},{filter:function(){return!0},selector:Bi}]}(e,n,r),i)}(t,n.width,n.height,n.desiredBitrate,n.envVars.videoSlot,Object.keys(this[zc]),{noImaVpaid:this[Uc].isFlagEnabled(2)});if(null==r)throw new Error("No valid media files");this[Uc].guestInfo._put("mediaFile",r);var i=bi(r),o=this[zc][i];if(null==o)throw new Error("Unsupported media file");return o(this,r,e,n)};n._preprocessHashConfig=function(){var t=function(){if(null!=Lc&&null!=Lc.src){var t=Lc.src,e=t.indexOf("#");if(!(e<0))return t.substr(e+1)}}();this._loadConfig(decodeURIComponent(t))};n._loadConfig=function(t){if(null!=t){this[Uc][Wc](t);this._addPlugins(t.plugins)}};n._addPlugins=function(t){if(!(null==t||this[Uc].plugins.length>0)&&0!==t.length)for(var e={},n=0;n<t.length;++n){var r=t[n],i=r.id,o=r.config,s=void 0,u=i.indexOf(".");if(u<0)s=e[i]=o||{};else{var a=i.substr(0,u);s=Object.assign({},e[a],o)}try{this._createAndAddPlugin(i,s)}catch(t){console.warn('Error creating plugin "'+i+'": '+t)}}};n._createAndAddPlugin=function(t,e){var n=ko.create(t,e,this[Uc]);this._addPlugin(n);return n};return e}(Mc),Bc={visibility:"hidden",position:"absolute",left:0,top:0,width:0,height:0,margin:0,padding:0,border:0},qc=/^https?:\/\//,Qc=function(t){var e=null;try{e=t.document.baseURI}catch(t){}return null!=e&&qc.test(e)?e:null},$c=io,Kc={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},Jc=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],Xc=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],Yc=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],Zc="undefined"!=typeof window&&void 0!==window.document?window.document:{},tl="fullscreenEnabled"in Zc&&Object.keys(Kc)||Jc[0]in Zc&&Jc||Xc[0]in Zc&&Xc||Yc[0]in Zc&&Yc||[],el={get changeEventType(){return tl[Kc.fullscreenchange]},isActive:function(t){var e=t.ownerDocument,n=tl[Kc.fullscreenElement];return null!=e&&e[n]===t},request:function(t){if(el.isActive(t))return Promise.resolve();var e=tl[Kc.requestFullscreen];return"function"!=typeof t[e]?Promise.reject(new Error("Not supported")):Di(t[e](),3e3)},exit:function(t){var e=tl[Kc.exitFullscreen];return"function"!=typeof t[e]?Promise.reject(new Error("Not supported")):Di(t[e](),1e3)}},nl=Symbol("url"),rl=Symbol("options"),il=Symbol("pubSub"),ol=Symbol("skippable"),sl=Symbol("slot"),ul=Symbol("videoSlot"),al=Symbol("clickSlot"),cl=Symbol("width"),ll=Symbol("height"),fl=Symbol("viewMode"),hl=Symbol("volumeImpaired"),dl=Symbol("volume"),pl=Symbol("paused"),vl=Symbol("loaded"),ml=Symbol("clicked"),gl=Symbol("requested"),yl=Symbol("domEventTracker"),_l=Symbol("tickInterval"),bl=Symbol("quartile"),wl=Symbol("monitors"),kl={noMutedAutoplayFallback:!1,noPauseOnClickThrough:!1,skipOffset:null},Al={position:"absolute",left:"0",top:"0",border:"0",margin:"0",padding:"0"},Sl=Object.assign({},Al,{cursor:"pointer"}),El=((jc={}).duration=[["getAdDuration"],"AdDurationChange"],jc.remainingTime=[["getAdRemainingTime"],"AdRemainingTimeChange"],jc.volume=[["getAdVolume"],"AdVolumeChange"],jc.skippableState=[["getAdSkippableState"],"AdSkippableStateChange"],jc.size=[["getAdWidth","getAdHeight"],"AdSizeChange"],jc),Pl=function(){function t(t,e){this[nl]=t;this[rl]=Object.assign({},kl,e);this[il]=new ro;this[ol]=null==this[rl].skipOffset;this[cl]=Le;this[ll]=Le;this[fl]=null;this[hl]=!1;this[dl]=Le;this[sl]=null;this[ul]=null;this[pl]=!0;this[vl]=!1;this[ml]=!1;this[yl]=new Yr;this[gl]={};this[_l]=null;this[bl]=-1;this[wl]=this._buildMonitors();this._onTick=this._onTick.bind(this);for(var n=0;n<Be.length;++n){var r=Be[n];this[r]=wi(this[r]).bind(this)}dn({rel:"preconnect",href:t,pr:"1.0"})}var e=t.prototype;e._getSlot=function(){return this[sl]};e.getAdLinear=function(){return!0};e.getAdWidth=function(){return this._isFullscreen()?screen.width:this[cl]};e.getAdHeight=function(){return this._isFullscreen()?screen.height:this[ll]};e.getAdExpanded=function(){return!1};e.getAdSkippableState=function(){return this[ol]};e.getAdRemainingTime=function(){if(this[vl]&&null!=this[ul]){var t=this[ul],e=t.currentTime,n=t.duration;if(isFinite(e)&&isFinite(n))return n-e}return Le};e.getAdDuration=function(){if(this[vl]&&null!=this[ul]){var t=this[ul].duration;if(isFinite(t)&&t>0)return t}return Le};e.getAdVolume=function(){if(this[vl]&&null!=this[ul]){var t=this[ul],e=t.volume,n=t.muted;if("boolean"==typeof n&&n)return 0;if(isFinite(e))return e}return this[dl]};e.setAdVolume=function(t){this[dl]=t;if(null!=this[ul]){this._setVolume(t);this[hl]&&this._notifyMonitor("volume")}};e.getAdCompanions=function(){return""};e.getAdIcons=function(){return!1};e.handshakeVersion=function(){return"2.0"};e.initAd=function(t,e,n,r,i,o){var s=this,u=o||{},a=u.videoSlot,c=u.slot,l=null==c||null==c.ownerDocument;if(l){c=document.createElement("div");Wr(c,Al)}if(null==a){a=c.ownerDocument.createElement("video");Wr(a,Al);c.appendChild(a)}this[sl]=c;this[ul]=a;this[al]=c.ownerDocument.createElement("div");Wr(this[al],Sl,!0);c.appendChild(this[al]);this[hl]=!("volume"in a&&"muted"in a);this._setDimensions(t,e,n,!1);this._preloadSrc(this[nl]);var f=function(){s._publish(Ue.AdLoaded)};l?Mr(document).then(function(){document.body.appendChild(c);f()}):f()};e.resizeAd=function(t,e,n){this._setDimensions(t,e,n,!0)};e.startAd=function(){this._request(Ue.AdImpression);this._addDomListeners();this[ul].pause();if(this[dl]>=0){this._setVolume(this[dl]);this._notifyMonitor("volume")}this._initVideoSlot(this[nl]);this[vl]=!0;this._publish(Ue.AdStarted);this[pl]=!1;this._play()};e.stopAd=function(){this._stop()};e.skipAd=function(){this._request(Ue.AdSkipped);this._stop()};e.pauseAd=function(){this._pause()};e.resumeAd=function(){this._resume()};e.expandAd=function(){};e.collapseAd=function(){};e.subscribe=function(t,e,n){void 0===n&&(n=null);this[il].subscribe(t,e,n)};e.unsubscribe=function(t,e){this[il].unsubscribe(t,e)};e._publish=function(t,e){void 0===e&&(e=[]);this[il].publish(t,e)};e._addDomListeners=function(){if(!(this[yl].count>0)){var t=this[ul].ownerDocument||document;this[yl].add(this[al],"click",this._onClickSlotClick,this).add(t,el.changeEventType,this._onFullscreenchange,this).addMany(this[ul],{durationchange:this._onVideoDurationchange,volumechange:this._onVideoVolumechange,playing:this._onVideoSlotPlaying,play:this._onVideoSlotPlay,pause:this._onVideoSlotPause,seeked:this._onVideoSeeked,ended:this._onVideoEnded,error:this._onVideoSlotError},this)}};e._onClickSlotClick=function(){if(this[ml]&&this[pl]){if(this[pl]){this[ml]=!1;this._resume()}}else{this[rl].noPauseOnClickThrough||this[pl]||this._pause();this[ml]=!0;this._publish(Ue.AdClickThru,[null,null,!0])}};e._onVideoDurationchange=function(){this._notifyMonitor("duration");this._notifyMonitor("remainingTime")};e._onVideoVolumechange=function(){this._notifyMonitor("volume")};e._onVideoSlotPlaying=function(){this._satisfy(Ue.AdImpression);this._satisfy(Ue.AdPlaying);this._startTicking()};e._onVideoSlotPlay=function(){};e._onVideoSlotPause=function(){this._stopTicking();this._satisfy(Ue.AdPaused);this._satisfyStopRequest()};e._onVideoSeeked=function(){this._notifyMonitor("remainingTime")};e._onVideoEnded=function(){this._onTick();this._stop()};e._onVideoSlotError=function(){var t=null!=this[ul].error?this[ul].error:new Error("Video error");this._onError(t)};e._onError=function(t){this._publish(Ue.AdError,[t.message]);this._stop()};e._preloadSrc=function(t){var e=this[ul],n=e.src,r=e.currentSrc;null!=n&&""!==n||null!=r&&""!==r||this._initVideoSlot(t)};e._initVideoSlot=function(t){if("function"==typeof this[ul].setAttribute){this[ul].setAttribute("playsinline","true");this[ul].setAttribute("webkit-playsinline","true")}else this[ul].playsInline=!0;this[ul].autoplay=!1;this[ul].controls=!1;this[ul].loop=!1;this[ul].src=t};e._setDimensions=function(t,e,n,r){var i=this;"fullscreen"===n?this._requestFullscreen().catch(function(t){i._publishAdLog("Fullscreen mode failed: "+t)}):this._exitFullscreen().catch(Rr).then(function(){i._setDimensionsNormal(t,e);r&&i._notifyMonitor("size")})};e._setDimensionsNormal=function(t,e){this[cl]=t;this[ll]=e;this[fl]="normal";var n={width:t+"px",height:e+"px"};Wr(this[ul],n);Wr(this[sl],n);Wr(this[al],n,!0)};e._requestFullscreen=function(){return this._isFullscreen()?Promise.resolve():el.request(this[ul]).then(function(){},function(t){throw t})};e._exitFullscreen=function(){return this._isFullscreen()?el.exit(this[ul].ownerDocument).catch(function(t){throw t}):Promise.resolve()};e._onFullscreenchange=function(){var t=this._isFullscreen()?"fullscreen":"normal";if(t!==this[fl]){this[fl]=t;this._notifyMonitor("size")}};e._isFullscreen=function(){return null!=this[ul]&&el.isActive(this[ul])};e._setVolume=function(t){this[ul].volume!==t&&(this[ul].volume=t);var e=0===t;this[ul].muted!==e&&(this[ul].muted=e)};e._play=function(){var t=this,e=this[rl].noMutedAutoplayFallback,n=this[ul].muted,r=this[ul].play();null!=r&&"function"==typeof r.catch?r.catch(function(r){if(n)throw r;t._publishAdLog("Unmuted playback failed: "+r);if(t[pl])t._publishAdLog("Unmuted playback failed and ad is paused, not falling back to muted playback");else{if(!e){t._publishAdLog("Unmuted playback failed, attempting fallback to muted playback");t[ul].muted=!0;return t[ul].play()}t._publishAdLog("Unmuted playback failed and fallback to muted playback disabled, giving up")}}).catch(function(e){t._publishAdLog("Muted playback failed: "+e)}):this._publishAdLog("Video slot does not report disallowed play attempts")};e._pause=function(){this[pl]=!0;if(null==this[ul]||this[ul].paused)this._publish(Ue.AdPaused);else{this._request(Ue.AdPaused);this[ul].pause()}};e._resume=function(){this[pl]=!1;if(null!=this[ul]&&this[ul].paused){this._request(Ue.AdPlaying);this._play()}else this._publish(Ue.AdPlaying)};e._stop=function(){this._stopTicking();this[pl]=!0;this._request(Ue.AdStopped);null==this[ul]||this[ul].paused||this[ul].ended?this._satisfyStopRequest():this[ul].pause()};e._satisfyStopRequest=function(){if(this._requested(Ue.AdStopped)){this[yl].removeAll();null!=this[ul]&&this._resetMediaSrc();this._satisfy(Ue.AdSkipped);this._satisfy(Ue.AdStopped)}};e._resetMediaSrc=function(){var t=this[ul];if("function"==typeof t.removeAttribute){t.removeAttribute("src");t.load()}else t.src="";this[vl]=!1};e._startTicking=function(){if(null==this[_l]){this[_l]=setInterval(this._onTick,250);this._onTick()}};e._stopTicking=function(){if(null!=this[_l]){this._onTick();clearInterval(this[_l]);this[_l]=null}};e._onTick=function(){if(this[vl]){var t=this[ul];if(!(null==t||t.readyState<1||null!=t.error)){this._notifyMonitor("duration");this._notifyMonitor("remainingTime");this._handleSkippableState();this._handleQuartiles()}}};e._handleSkippableState=function(){var t=this[rl].skipOffset,e=this[ul].currentTime;if(!this[ol]&&"number"==typeof t&&e>=t){this[ol]=!0;this._notifyMonitor("skippableState")}};e._handleQuartiles=function(){var t,e=this[ul],n=e.currentTime,r=e.duration,i=e.ended,o=e.played,s=null!=o?(t=o,Array.apply(null,t).reduce(function(e,n,r){return e+t.end(r)-t.start(r)},0)):n;if(!(!isFinite(s)||s<0||!isFinite(r)||r<=0)){var u=this[bl],a=i?.25:0;this[bl]=Math.min(Math.max(u,Math.floor((s+a)/r*4)),4);for(var c=u+1;c<=this[bl];++c)this._publish(qe[c])}};e._request=function(t){this[gl][t]=!0};e._requested=function(t){return!!this[gl][t]};e._satisfy=function(t){if(this._requested(t)){this[gl][t]=!1;this._publish(t)}};e._buildMonitors=function(){for(var t={},e=Object.keys(El),n=0;n<e.length;++n){var r=e[n],i=El[r],o=i[0],s=i[1];t[r]=this._buildMonitor(o,s)}return t};e._buildMonitor=function(t,e){var n=this,r=function(){return t.map(function(t){return n[t]()}).join("\0")},i=r();return function(){var t=r();if(t!==i){i=t;n._publish(e)}}};e._notifyMonitor=function(t){this[wl][t]()};e._publishAdLog=function(t){this._publish(Ue.AdLog,[t])};return t}(),Il=io,Tl=ho,Cl=function(t){return t.creatives.toArray().map(function(t){return t.linear}).find(Boolean)},Ol=function(t){var e={},n=t.impressions,r=t.errors;n.length>0&&(e.impression=n.map(function(t){return{uri:t.uri}}));r.length>0&&(e.error=r.map(function(t){return{uri:t}}));var i=Cl(t);if(null!=i&&null!=i.trackingEvents){var o=i.trackingEvents;Object.assign.apply(Object,[e].concat(o.types.map(function(t){var e;return(e={})[t]=o.get(t).map(function(t){return{uri:t.uri,offset:t.offset}}),e})))}return e},xl=t(function(t){function e(){}function n(t,e,n){this.fn=t;this.context=e;this.once=n||!1}function r(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,i||t,o),a=u?u+e:e;t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++);return t}function i(t,n){0==--t._eventsCount?t._events=new e:delete t._events[n]}function o(){this._events=new e;this._eventsCount=0}var s=Object.prototype.hasOwnProperty,u="~";if(Object.create){e.prototype=Object.create(null);(new e).__proto__||(u=!1)}o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n};o.prototype.listeners=function(t){var e=u?u+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o};o.prototype.listenerCount=function(t){var e=u?u+t:t,n=this._events[e];return n?n.fn?1:n.length:0};o.prototype.emit=function(t,e,n,r,i,o){var s=u?u+t:t;if(!this._events[s])return!1;var a,c,l=this._events[s],f=arguments.length;if(l.fn){l.once&&this.removeListener(t,l.fn,void 0,!0);switch(f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,a=new Array(f-1);c<f;c++)a[c-1]=arguments[c];l.fn.apply(l.context,a)}else{var h,d=l.length;for(c=0;c<d;c++){l[c].once&&this.removeListener(t,l[c].fn,void 0,!0);switch(f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!a)for(h=1,a=new Array(f-1);h<f;h++)a[h-1]=arguments[h];l[c].fn.apply(l[c].context,a)}}}return!0};o.prototype.on=function(t,e,n){return r(this,t,e,n,!1)};o.prototype.once=function(t,e,n){return r(this,t,e,n,!0)};o.prototype.removeListener=function(t,e,n,r){var o=u?u+t:t;if(!this._events[o])return this;if(!e){i(this,o);return this}var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||i(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this};o.prototype.removeAllListeners=function(t){var n;if(t){n=u?u+t:t;this._events[n]&&i(this,n)}else{this._events=new e;this._eventsCount=0}return this};o.prototype.off=o.prototype.removeListener;o.prototype.addListener=o.prototype.on;o.prefixed=u;o.EventEmitter=o;t.exports=o}),Dl=function(t){return function(e){return e.nodeType===t}},Nl=Dl(1),Rl=Dl(3),Ml=Dl(4),jl=function(t,e){return Array.prototype.filter.call(t.childNodes,e)},Fl=function(t){return Rl(t)||Ml(t)},Vl=/^\s*(\d+):(\d+):(\d+(?:\.\d+)?)\s*$/,Ll=function(t){var e=Vl.exec(t);if(null==e)throw new Error('Failed to parse time "'+t+'"');return 60*(60*parseInt(e[1],10)+parseInt(e[2],10))+parseFloat(e[3])},Ul=((Fc={}).b=function(t){return"true"===t||"1"===t},Fc.i=function(t){return parseInt(t,10)},Fc.f=parseFloat,Fc.t=Ll,Fc),Wl=function(){var t=/^[A-Z]+/,e=function(t){return 1===t.length?t.toLowerCase():t.substr(0,t.length-1).toLowerCase()+t.charAt(t.length-1)};return function(n){return n.replace(t,e)}}(),Hl=function(t,e,n){return null!=t[e]&&~t[e].indexOf(n)},zl=function(){function t(t){var e=t.collections,n=t.freeforms,r=t.types;this._collections=e;this._freeforms=n;this._types=r}var e=t.prototype;e.unmarshal=function(t){return this._createNode(t)};e._createNode=function(t){var e=Object.create(null);e._value=this._convertPropertyValue(jl(t,Fl).map(function(t){return t.nodeValue}).join("").trim(),t.nodeName,"_value");this._copyAttributes(e,t);this._createCollections(e,t);this._createChildren(e,t);return e};e._createFreeformNode=function(t){var e=Object.create(null);this._copyAttributes(e,t);e._value=t;return e};e._copyAttributes=function(t,e){for(var n=e.nodeName,r=0;r<e.attributes.length;++r){var i=e.attributes[r],o=i.nodeName,s=i.nodeValue;t[o]=this._convertPropertyValue(s,n,o)}};e._createCollections=function(t,e){null!=this._collections[e.nodeName]&&this._collections[e.nodeName].forEach(function(e){t[Wl(e)]=[]})};e._createChildren=function(t,e){var n=this,r=e.nodeName;jl(e,Nl).forEach(function(e){var i=e.nodeName,o=Wl(i);n._isFreeformParent(r)?n._isFreeformChild(r,i)&&n._addFreeformChild(e,o,t):n._addNodeChild(e,o,t,r,i)})};e._addNodeChild=function(t,e,n,r,i){var o=this._createNode(t);if(null==n[e])n[e]=o;else{if(!this._isCollection(r,i))throw new Error("Multiple values for "+r+"."+i);n[e].push(o)}};e._addFreeformChild=function(t,e,n){n[e]=n[e]||[];n[e].push(this._createFreeformNode(t))};e._convertPropertyValue=function(t,e,n){var r=null!=this._types[e]?this._types[e][n]:null;return null!=r?Ul[r](t):t};e._isCollection=function(t,e){return Hl(this._collections,t,e)};e._isFreeformParent=function(t){return null!=this._freeforms[t]};e._isFreeformChild=function(t,e){return Hl(this._freeforms,t,e)};return t}(),Gl={collections:{AdVerifications:["Verification"],Companion:["CompanionClickTracking"],CompanionAds:["Companion"],CreativeExtensions:["CreativeExtension"],Creatives:["Creative"],Extensions:["Extension"],Icon:["IconViewTracking"],IconClicks:["IconClickTracking"],Icons:["Icon"],InLine:["Category","Error","Impression","Survey"],MediaFiles:["MediaFile","InteractiveCreativeFile"],NonLinear:["NonLinearClickTracking"],NonLinearAds:["NonLinear"],TrackingEvents:["Tracking"],VAST:["Error","Ad"],Verification:["JavaScriptResource","FlashResource"],ViewableImpression:["Viewable","NotViewable","ViewUndetermined"],VideoClicks:["ClickTracking","CustomClick"],Wrapper:["Impression","Error"]},freeforms:{CreativeExtensions:["CreativeExtension"],Extensions:["Extension"]},types:{Ad:{sequence:"i"},AdParameters:{xmlEncoded:"b"},Companion:{width:"i",height:"i",expandedWidth:"i",expandedHeight:"i"},Creative:{sequence:"i"},Duration:{_value:"t"},Icon:{width:"i",height:"i",offset:"t",duration:"t"},MediaFile:{bitrate:"i",minBitrate:"i",maxBitrate:"i",width:"i",height:"i",scalable:"b",maintainAspectRatio:"b"},NonLinear:{width:"i",height:"i",assetWidth:"i",assetHeight:"i",expandedWidth:"i",expandedHeight:"i",scalable:"b",maintainAspectRatio:"b",minSuggestedDuration:"t"},Pricing:{_value:"f"},Wrapper:{followAdditionalWrappers:"b",allowMultipleAds:"b",fallbackOnNoAd:"b"}}},Bl=function(){function t(){this._sequence=null}n(t,[{key:"sequence",get:function(){return this._sequence},set:function(t){this._sequence=t}}]);return t}(),ql=function(){function t(){this._contents=[]}var e=t.prototype;e.add=function(t){this._contents.push(t);this._contents.sort(function(t,e){return(t.sequence||0)-(e.sequence||0)})};e.remove=function(t){for(var e=this._contents.indexOf(t);e>=0;){this._contents.splice(e,1);e=this._contents.indexOf(t,e)}};e.get=function(t){return this._contents[t]};e.clear=function(){this._contents.length=0};e[Symbol.iterator]=function(){var t=this,e=0;return{next:function(){return e<t.length?{value:t.get(e++),done:!1}:{value:void 0,done:!0}}}};e.toArray=function(){return this._contents.slice()};n(t,[{key:"length",get:function(){return this._contents.length}},{key:"$type",get:function(){return"SortedList"}}]);return t}(),Ql=function(t){function e(){var e;(e=t.call(this)||this)._id=null;e._conditionalAd=!1;e._adSystem=null;e._impressions=[];e._pricing=null;e._errors=[];e._viewableImpression=null;e._verifications=[];e._extensions=[];e._creatives=new ql;return e}r(e,t);n(e,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"conditionalAd",get:function(){return this._conditionalAd},set:function(t){this._conditionalAd=t}},{key:"adSystem",get:function(){return this._adSystem},set:function(t){this._adSystem=t}},{key:"impressions",get:function(){return this._impressions}},{key:"pricing",get:function(){return this._pricing},set:function(t){this._pricing=t}},{key:"errors",get:function(){return this._errors}},{key:"viewableImpression",get:function(){return this._viewableImpression},set:function(t){this._viewableImpression=t}},{key:"verifications",get:function(){return this._verifications}},{key:"extensions",get:function(){return this._extensions}},{key:"creatives",get:function(){return this._creatives}}]);return e}(Bl),$l=function(t){function e(){var e;(e=t.call(this)||this)._adTitle=null;e._categories=[];e._description=null;e._surveys=[];return e}r(e,t);n(e,[{key:"adTitle",get:function(){return this._adTitle},set:function(t){this._adTitle=t}},{key:"categories",get:function(){return this._categories}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"advertiser",get:function(){return this._advertiser},set:function(t){this._advertiser=t}},{key:"surveys",get:function(){return this._surveys}},{key:"$type",get:function(){return"InLine"}}]);return e}(Ql),Kl=function(t){function e(){var e;(e=t.call(this)||this)._followAdditionalWrappers=!0;e._allowMultipleAds=!1;e._fallbackOnNoAd=!1;e._vastAdTagURI=null;return e}r(e,t);n(e,[{key:"followAdditionalWrappers",get:function(){return this._followAdditionalWrappers},set:function(t){this._followAdditionalWrappers=t}},{key:"allowMultipleAds",get:function(){return this._allowMultipleAds},set:function(t){this._allowMultipleAds=t}},{key:"fallbackOnNoAd",get:function(){return this._fallbackOnNoAd},set:function(t){this._fallbackOnNoAd=t}},{key:"vastAdTagURI",get:function(){return this._vastAdTagURI},set:function(t){this._vastAdTagURI=t}},{key:"$type",get:function(){return"Wrapper"}}]);return e}(Ql),Jl=function(){function t(){this._clickThrough=null;this._clickTrackings=[]}n(t,[{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}}]);return t}(),Xl=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"IconClicks"}}]);return e}(Jl),Yl=function(t){function e(){var e;(e=t.call(this)||this)._customClicks=[];return e}r(e,t);n(e,[{key:"customClicks",get:function(){return this._customClicks}},{key:"$type",get:function(){return"VideoClicks"}}]);return e}(Jl),Zl=function(){function t(){this._version=null;this._name=null}n(t,[{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"$type",get:function(){return"AdSystem"}}]);return t}(),tf=function(){function t(){this._authority=null;this._code=null}n(t,[{key:"authority",get:function(){return this._authority},set:function(t){this._authority=t}},{key:"code",get:function(){return this._code},set:function(t){this._code=t}},{key:"$type",get:function(){return"Category"}}]);return t}(),ef=function(){function t(){this._id=null;this._uri=null}n(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"Click"}}]);return t}(),nf=function(t){function e(){var e;(e=t.call(this)||this)._id=null;e._adID=null;e._apiFramework=null;e._universalAdId=null;e._extensions=[];e._linear=null;e._companionAds=null;e._nonLinearAds=null;return e}r(e,t);n(e,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"adID",get:function(){return this._adID},set:function(t){this._adID=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"universalAdId",get:function(){return this._universalAdId},set:function(t){this._universalAdId=t}},{key:"extensions",get:function(){return this._extensions}},{key:"linear",get:function(){return this._linear},set:function(t){this._linear=t}},{key:"companionAds",get:function(){return this._companionAds},set:function(t){this._companionAds=t}},{key:"nonLinearAds",get:function(){return this._nonLinearAds},set:function(t){this._nonLinearAds=t}},{key:"$type",get:function(){return"Creative"}}]);return e}(Bl),rf=function(){function t(){this._program=null;this._width=null;this._height=null;this._xPosition=null;this._yPosition=null;this._duration=null;this._offset=null;this._apiFramework=null;this._pxratio=null;this._resource=null;this._clicks=null;this._viewTrackings=[]}n(t,[{key:"program",get:function(){return this._program},set:function(t){this._program=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"xPosition",get:function(){return this._xPosition},set:function(t){this._xPosition=t}},{key:"yPosition",get:function(){return this._yPosition},set:function(t){this._yPosition=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"pxratio",get:function(){return this._pxratio},set:function(t){this._pxratio=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"clicks",get:function(){return this._clicks},set:function(t){this._clicks=t}},{key:"viewTrackings",get:function(){return this._viewTrackings}},{key:"$type",get:function(){return"Icon"}}]);return t}(),of=function(){function t(){this._id=null;this._uri=null}n(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"Impression"}}]);return t}(),sf=function(){function t(){this._type=null;this._apiFramework=null;this._url=null}n(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"InteractiveCreativeFile"}}]);return t}(),uf=function(){function t(){this._delivery=null;this._type=null;this._width=null;this._height=null;this._codec=null;this._id=null;this._bitrate=null;this._minBitrate=null;this._maxBitrate=null;this._scalable=!1;this._maintainAspectRatio=!1;this._apiFramework=null;this._uri=null}n(t,[{key:"delivery",get:function(){return this._delivery},set:function(t){this._delivery=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"codec",get:function(){return this._codec},set:function(t){this._codec=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"bitrate",get:function(){return this._bitrate},set:function(t){this._bitrate=t}},{key:"minBitrate",get:function(){return this._minBitrate},set:function(t){this._minBitrate=t}},{key:"maxBitrate",get:function(){return this._maxBitrate},set:function(t){this._maxBitrate=t}},{key:"scalable",get:function(){return this._scalable},set:function(t){this._scalable=t}},{key:"maintainAspectRatio",get:function(){return this._maintainAspectRatio},set:function(t){this._maintainAspectRatio=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"MediaFile"}}]);return t}(),af=function(){function t(){this._model=null;this._currency=null;this._value=null}n(t,[{key:"model",get:function(){return this._model},set:function(t){this._model=t}},{key:"currency",get:function(){return this._currency},set:function(t){this._currency=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"$type",get:function(){return"Pricing"}}]);return t}(),cf=function(){function t(){this._type=null;this._uri=null}n(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"$type",get:function(){return"Survey"}}]);return t}(),lf=function(){function t(){this._uri=null;this._offset=null}n(t,[{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"offset",get:function(){return this._offset},set:function(t){this._offset=t}},{key:"$type",get:function(){return"TrackingEvent"}}]);return t}(),ff=function(){function t(){this._map=Object.create(null)}var e=t.prototype;e.get=function(t){return this._map[t]||[]};e.add=function(t,e){this._map[t]=this._map[t]||[];this._map[t].push(e)};n(t,[{key:"types",get:function(){return Object.keys(this._map)}},{key:"$type",get:function(){return"TrackingEvents"}}]);return t}(),hf=function(){function t(){this._idRegistry="unknown";this._idValue="unknown";this._creativeIdentifier=null}n(t,[{key:"idRegistry",get:function(){return this._idRegistry},set:function(t){this._idRegistry=t}},{key:"idValue",get:function(){return this._idValue},set:function(t){this._idValue=t}},{key:"creativeIdentifier",get:function(){return this._creativeIdentifier},set:function(t){this._creativeIdentifier=t}},{key:"$type",get:function(){return"UniversalAdId"}}]);return t}(),df=function(t){function e(){var e;(e=t.call(this)||this)._uri=null;e._version=null;e._errors=[];return e}r(e,t);n(e,[{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}},{key:"version",get:function(){return this._version},set:function(t){this._version=t}},{key:"errors",get:function(){return this._errors}},{key:"$type",get:function(){return"VAST"}}]);return e}(function(){function t(){this._ads=new ql;this._adPod=null}n(t,[{key:"ads",get:function(){return this._ads}},{key:"adPod",get:function(){return this._adPod},set:function(t){this._adPod=t}},{key:"$type",get:function(){return"AdBuffet"}}]);return t}()),pf=function(){function t(){this._vendor=null;this._javaScriptResources=[];this._flashResources=[];this._viewableImpression=null}n(t,[{key:"vendor",get:function(){return this._vendor},set:function(t){this._vendor=t}},{key:"javaScriptResources",get:function(){return this._javaScriptResources}},{key:"flashResources",get:function(){return this._flashResources}},{key:"viewableImpression",get:function(){return this._viewableImpression},set:function(t){this._viewableImpression=t}},{key:"$type",get:function(){return"Verification"}}]);return t}(),vf=function(){function t(){this._id=null;this._viewables=[];this._notViewables=[];this._viewUndetermineds=[]}n(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"viewables",get:function(){return this._viewables}},{key:"notViewables",get:function(){return this._notViewables}},{key:"viewUndetermineds",get:function(){return this._viewUndetermineds}},{key:"$type",get:function(){return"ViewableImpression"}}]);return t}(),mf=function(){function t(){this._required=null;this._companions=[]}n(t,[{key:"required",get:function(){return this._required},set:function(t){this._required=t}},{key:"companions",get:function(){return this._companions}},{key:"$type",get:function(){return"CompanionAds"}}]);return t}(),gf=function(){function t(){this._id=null;this._width=null;this._height=null;this._assetWidth=null;this._assetHeight=null;this._expandedWidth=null;this._expandedHeight=null;this._apiFramework=null;this._adSlotID=null;this._pxratio=null;this._resource=null;this._adParameters=null;this._altText=null;this._clickThrough=null;this._clickTrackings=[];this._trackingEvents=null}n(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"assetWidth",get:function(){return this._assetWidth},set:function(t){this._assetWidth=t}},{key:"assetHeight",get:function(){return this._assetHeight},set:function(t){this._assetHeight=t}},{key:"expandedWidth",get:function(){return this._expandedWidth},set:function(t){this._expandedWidth=t}},{key:"expandedHeight",get:function(){return this._expandedHeight},set:function(t){this._expandedHeight=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"adSlotID",get:function(){return this._adSlotID},set:function(t){this._adSlotID=t}},{key:"pxratio",get:function(){return this._pxratio},set:function(t){this._pxratio=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"altText",get:function(){return this._altText},set:function(t){this._altText=t}},{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}},{key:"trackingEvents",get:function(){return this._trackingEvents},set:function(t){this._trackingEvents=t}},{key:"$type",get:function(){return"Companion"}}]);return t}(),yf=function(){function t(){this._skipoffset=null;this._duration=null;this._mezzanine=null;this._mediaFiles=[];this._interactiveCreativeFiles=[];this._adParameters=null;this._videoClicks=null;this._trackingEvents=null;this._icons=[]}n(t,[{key:"skipoffset",get:function(){return this._skipoffset},set:function(t){this._skipoffset=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"mezzanine",get:function(){return this._mezzanine},set:function(t){this._mezzanine=t}},{key:"mediaFiles",get:function(){return this._mediaFiles}},{key:"interactiveCreativeFiles",get:function(){return this._interactiveCreativeFiles}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"videoClicks",get:function(){return this._videoClicks},set:function(t){this._videoClicks=t}},{key:"trackingEvents",get:function(){return this._trackingEvents},set:function(t){this._trackingEvents=t}},{key:"icons",get:function(){return this._icons}},{key:"$type",get:function(){return"Linear"}}]);return t}(),_f=function(){function t(){this._nonLinears=[];this._trackingEvents=null}n(t,[{key:"nonLinears",get:function(){return this._nonLinears}},{key:"trackingEvents",get:function(){return this._trackingEvents},set:function(t){this._trackingEvents=t}},{key:"$type",get:function(){return"NonLinearAds"}}]);return t}(),bf=function(){function t(){this._id=null;this._width=null;this._height=null;this._expandedWidth=null;this._expandedHeight=null;this._scalable=!1;this._maintainAspectRatio=!1;this._minSuggestedDuration=null;this._apiFramework=null;this._resource=null;this._adParameters=null;this._clickThrough=null;this._clickTrackings=[]}n(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"expandedWidth",get:function(){return this._expandedWidth},set:function(t){this._expandedWidth=t}},{key:"expandedHeight",get:function(){return this._expandedHeight},set:function(t){this._expandedHeight=t}},{key:"scalable",get:function(){return this._scalable},set:function(t){this._scalable=t}},{key:"maintainAspectRatio",get:function(){return this._maintainAspectRatio},set:function(t){this._maintainAspectRatio=t}},{key:"minSuggestedDuration",get:function(){return this._minSuggestedDuration},set:function(t){this._minSuggestedDuration=t}},{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}},{key:"resource",get:function(){return this._resource},set:function(t){this._resource=t}},{key:"adParameters",get:function(){return this._adParameters},set:function(t){this._adParameters=t}},{key:"clickThrough",get:function(){return this._clickThrough},set:function(t){this._clickThrough=t}},{key:"clickTrackings",get:function(){return this._clickTrackings}},{key:"$type",get:function(){return"NonLinear"}}]);return t}(),wf=function(){function t(){this._type=null;this._xmlElement=null}n(t,[{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"xmlElement",get:function(){return this._xmlElement},set:function(t){this._xmlElement=t}}]);return t}(),kf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"CreativeExtension"}}]);return e}(wf),Af=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"Extension"}}]);return e}(wf),Sf=function(){function t(){this._uri=null}n(t,[{key:"uri",get:function(){return this._uri},set:function(t){this._uri=t}}]);return t}(),Ef=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"HTMLResource"}}]);return e}(Sf),Pf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"IFrameResource"}}]);return e}(Sf),If=function(t){function e(){var e;(e=t.call(this)||this)._creativeType=null;return e}r(e,t);n(e,[{key:"creativeType",get:function(){return this._creativeType},set:function(t){this._creativeType=t}},{key:"$type",get:function(){return"StaticResource"}}]);return e}(Sf),Tf=function(t){function e(){var e;(e=t.call(this)||this)._apiFramework=null;return e}r(e,t);n(e,[{key:"apiFramework",get:function(){return this._apiFramework},set:function(t){this._apiFramework=t}}]);return e}(Sf),Cf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"FlashResource"}}]);return e}(Tf),Of=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"JavaScriptResource"}}]);return e}(Tf),xf=function(){function t(){this._value=null}n(t,[{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]);return t}(),Df=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"AbsoluteTimeOffset"}}]);return e}(xf),Nf=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);n(e,[{key:"$type",get:function(){return"RelativeTimeOffset"}}]);return e}(xf),Rf=function(){function t(){this._ads=new ql}n(t,[{key:"ads",get:function(){return this._ads}},{key:"$type",get:function(){return"AdPod"}}]);return t}(),Mf=function(t){var e=new kf;e.type=t.type;e.xmlElement=t._value;return e},jf=function(t){var e=new uf;e.id=t.id;e.delivery=t.delivery;e.type=t.type;e.bitrate=t.bitrate;e.minBitrate=t.minBitrate;e.maxBitrate=t.maxBitrate;e.width=t.width;e.height=t.height;e.scalable=t.scalable;e.maintainAspectRatio=t.maintainAspectRatio;e.codec=t.codec;e.apiFramework=t.apiFramework;e.uri=t._value;return e},Ff=function(t){var e=new sf;e.type=t.type;e.apiFramework=t.apiFramework;e.uri=t._value;return e},Vf=function(t){return null!=t.staticResource?function(t){var e=new If;e.creativeType=t.creativeType;e.uri=t._value;return e}(t.staticResource):null!=t.iFrameResource?function(t){var e=new Pf;e.uri=t._value;return e}(t.iFrameResource):null!=t.htmlResource?function(t){var e=new Ef;e.uri=t._value;return e}(t.htmlResource):null},Lf=function(t){var e=new ef;e.id=t.id;e.uri=t._value;return e},Uf=function(t){return"string"==typeof t&&t.length>0},Wf=function(t){return null!=t&&Uf(t._value)},Hf=function(t){return Array.isArray(t)&&t.length>0},zf=function(t,e){return null==t?t:e.indexOf(t)<0?parseInt(t,0):t},Gf=function(t){var e=new rf;e.program=t.program;e.width=t.width;e.height=t.height;e.xPosition=zf(t.xPosition,["left","right"]);e.yPosition=zf(t.yPosition,["top","bottom"]);e.duration=t.duration;e.offset=t.offset;e.apiFramework=t.apiFramework;e.pxratio=t.pxratio;e.resources=Vf(t);null!=t.iconClicks&&(Wf(t.iconClicks.iconClickThrough)||Hf(t.iconClicks.iconClickTracking))&&(e.clicks=function(t){var e=new Xl;null!=t.iconClickThrough&&Wf(t.iconClickThrough)&&(e.clickThrough=Lf(t.iconClickThrough));if(null!=t.iconClickTracking){var n;(n=e.clickTrackings).push.apply(n,t.iconClickTracking.filter(Wf).map(Lf))}return e}(t.iconClicks));if(null!=t.iconViewTracking){var n;(n=e.viewTrackings).push.apply(n,t.iconViewTracking.filter(Wf).map(Lf))}return e},Bf=function(t,e,n){if("%"===t.charAt(t.length-1)){var r=new Nf;r.value=parseFloat(t.substr(0,t.length-1));return r}var i=new Df;try{i.value=Ll(t)}catch(n){e.errorHandler(n)}return i},qf=function(t,e,n){if(null!=t&&Array.isArray(t.tracking)){var r=t.tracking,i=Array.isArray(r),o=0;for(r=i?r:r[Symbol.iterator]();;){var s;if(i){if(o>=r.length)break;s=r[o++]}else{if((o=r.next()).done)break;s=o.value}var u=s;if(Uf(u._value)){var a=new lf;a.uri=u._value;if(Uf(u.offset))try{a.offset=Bf(u.offset)}catch(t){n.errorHandler(t)}e.add(u.event,a)}}}},Qf=function(t){var e=new bf;e.id=t.id;e.width=t.width;e.height=t.height;e.expandedWidth=t.expandedWidth;e.expandedHeight=t.expandedHeight;e.scalable=t.scalable;e.maintainAspectRatio=t.maintainAspectRatio;e.minSuggestedDuration=t.minSuggestedDuration;e.apiFramework=t.apiFramework;e.resource=Vf(t);null!=t.adParameters&&(e.adParameters=t.adParameters._value);null!=t.nonLinearClickThrough&&Wf(t.nonLinearClickThrough)&&(e.clickThrough=Lf(t.nonLinearClickThrough));if(null!=t.nonLinearClickTracking){var n;(n=e.clickTrackings).push.apply(n,t.nonLinearClickTracking.filter(Wf).map(Lf))}return e},$f=function(t){var e=new gf;e.id=t.id;e.width=t.width;e.height=t.height;e.assetWidth=t.assetWidth;e.assetHeight=t.assetHeight;e.expandedWidth=t.expandedWidth;e.expandedHeight=t.expandedHeight;e.apiFramework=t.apiFramework;e.adSlotID=t.adSlotID;e.pxratio=t.pxratio;e.resource=Vf(t);null!=t.adParameters&&Wf(t.adParameters)&&(e.adParameters=t.adParameters._value);null!=t.altText&&Wf(t.altText._value)&&(e.altText=t.altText._value);null!=t.companionClickThrough&&Wf(t.companionClickThrough)&&(e.clickThrough=Lf(t.companionClickThrough));if(null!=t.companionClickTracking){var n;(n=e.clickTrackings).push.apply(n,t.companionClickTracking.filter(Wf).map(Lf))}if(null!=t.trackingEvents&&Hf(t.trackingEvents.tracking)){e.trackingEvents=new ff;qf(t.trackingEvents,e.trackingEvents)}return e},Kf=function(t){var e=new Af;e.type=t.type;e.xmlElement=t._value;return e},Jf=function(t){var e=new of;e.id=t.id;e.uri=t._value;return e},Xf=function(t){var e=new Of;e.apiFramework=t.apiFramework;e.uri=t._value;return e},Yf=function(t){var e=new Cf;e.apiFramework=t.apiFramework;e.uri=t._value;return e},Zf=function(t){return null!=t&&Uf(t._value)},th=function(t,e,n,r){n.id=t.id;n.conditionalAd=t.conditionalAd;n.sequence=t.sequence;null!=e.adSystem&&(n.adSystem=function(t){var e=new Zl;e.version=t.version;e.name=t._value;return e}(e.adSystem));if(null!=e.impression){var i;(i=n.impressions).push.apply(i,e.impression.filter(Zf).map(Jf))}null!=e.pricing&&(n.pricing=function(t){var e=new af;e.model=t.model;e.currency=t.currency;e.value=t._value;return e}(e.pricing));if(null!=e.error){var o;(o=n.errors).push.apply(o,e.error.filter(Zf).map(function(t){return t._value}))}null!=e.viewableImpression&&(n.viewableImpression=function(t){var e=new vf;e.id=t.id;if(null!=t.viewable){var n;(n=e.viewables).push.apply(n,t.viewable.map(function(t){return t._value}))}if(null!=t.notViewable){var r;(r=e.notViewables).push.apply(r,t.notViewable.map(function(t){return t._value}))}if(null!=t.viewUndetermined){var i;(i=e.viewUndetermineds).push.apply(i,t.viewUndetermined.map(function(t){return t._value}))}return e}(e.viewableImpression));null!=e.adVerifications&&e.adVerifications.verification.forEach(function(t){try{var e=function(t){var e=new pf;e.vendor=t.vendor;if(null!=t.javaScriptResource){var n;(n=e.javaScriptResources).push.apply(n,t.javaScriptResource.map(Xf))}if(null!=t.flashResource){var r;(r=e.flashResources).push.apply(r,t.flashResource.map(Yf))}null!=t.viewableImpression&&(e.viewableImpression=t.viewableImpression._value);null!=t.verificationParameters&&(e.parameters=t.verificationParameters._value);return e}(t);n.verifications.push(e)}catch(t){r.errorHandler(t)}});if(null!=e.extensions){var s;(s=n.extensions).push.apply(s,e.extensions.extension.map(Kf))}null!=e.creatives&&e.creatives.creative.forEach(function(t){try{var e=function(t,e){var n=new nf;n.id=t.id;n.sequence=t.sequence;n.adID=t.AdID||t.adID||t.adId;n.apiFramework=t.apiFramework;null!=t.universalAdId&&(n.universalAdId=function(t){var e=new hf;null!=t.idRegistry&&(e.idRegistry=t.idRegistry);null!=t.idValue&&(e.idValue=t.idValue);e.creativeIdentifier=t._value;return e}(t.universalAdId));if(null!=t.creativeExtensions&&t.creativeExtensions.creativeExtension){var r;(r=n.extensions).push.apply(r,t.creativeExtensions.creativeExtension.map(Mf))}null!=t.linear?n.linear=function(t,e){var n=t.linear,r=new yf;Uf(n.skipoffset)&&(r.skipoffset=Bf(n.skipoffset,e));null!=n.duration&&(r.duration=n.duration._value);if(null!=n.mediaFiles){null!=n.mediaFiles.mezzanine&&(r.mezzanine=n.mediaFiles.mezzanine._value);if(null!=n.mediaFiles.mediaFile){var i;(i=r.mediaFiles).push.apply(i,n.mediaFiles.mediaFile.map(jf))}if(null!=n.mediaFiles.interactiveCreativeFile){var o;(o=r.interactiveCreativeFiles).push.apply(o,n.mediaFiles.interactiveCreativeFile.map(Ff))}}null!=n.adParameters&&(r.adParameters=n.adParameters._value);if(null!=n.videoClicks){r.videoClicks=new Yl;!function(t,e){null!=t.clickThrough&&Wf(t.clickThrough)&&(e.clickThrough=Lf(t.clickThrough));if(null!=t.clickTracking){var n;(n=e.clickTrackings).push.apply(n,t.clickTracking.filter(Wf).map(Lf))}if(null!=t.customClick){var r;(r=e.customClicks).push.apply(r,t.customClick.filter(Wf).map(Lf))}}(n.videoClicks,r.videoClicks)}if(null!=n.trackingEvents&&Hf(n.trackingEvents.tracking)){r.trackingEvents=new ff;qf(n.trackingEvents,r.trackingEvents,e)}if(null!=n.icons&&n.icons.icon){var s;(s=r.icons).push.apply(s,n.icons.icon.map(Gf))}return r}(t,e):null!=t.nonLinearAds&&(n.nonLinearAds=function(t){var e=t.nonLinearAds,n=new _f;if(null!=e.nonLinear){var r;(r=n.nonLinears).push.apply(r,e.nonLinear.map(Qf))}if(null!=e.trackingEvents&&Hf(e.trackingEvents.tracking)){n.trackingEvents=new ff;qf(e.trackingEvents,n.trackingEvents)}return n}(t));null!=t.companionAds&&(n.companionAds=function(t){var e=t.companionAds,n=new mf;n.required=e.required;if(null!=e.companion){var r;(r=n.companions).push.apply(r,e.companion.map($f))}return n}(t));null==n.linear&&null==n.nonLinearAds&&null==n.companionAds&&e.errorHandler(new Error("Creative has no ads"));return n}(t,r);n.creatives.add(e)}catch(t){r.errorHandler(t)}});return n},eh=function(t){var e=new tf;e.authority=t.authority;e.code=t._value;return e},nh=function(t){var e=new cf;e.type=t.type;e.uri=t._value;return e},rh=function(t,e){if(null!=t.inLine)return function(t,e){var n=new $l,r=t.inLine;th(t,r,n,e);n.adTitle=null!=r.adTitle?r.adTitle._value:null;if(null!=r.category){var i;(i=n.categories).push.apply(i,r.category.filter(function(t){return null!=t.authority}).map(eh))}n.description=null!=r.description?r.description._value:null;n.advertiser=null!=r.advertiser?r.advertiser._value:null;if(null!=r.survey){var o;(o=n.surveys).push.apply(o,r.survey.filter(function(t){return t._value.length>0}).map(nh))}return n}(t,e);if(null!=t.wrapper)return function(t,e){var n=new Kl,r=t.wrapper;th(t,r,n,e);null!=r.followAdditionalWrappers&&(n.followAdditionalWrappers=r.followAdditionalWrappers);null!=r.allowMultipleAds&&(n.allowMultipleAds=r.allowMultipleAds);n.fallbackOnNoAd=r.fallbackOnNoAd;n.vastAdTagURI=null!=r.vastAdTagURI?r.vastAdTagURI._value:null;return n}(t,e);throw new Error("Unrecognized ad type")},ih=function(t){throw t},oh=function(){},sh={strict:!1,noSingleAdPods:!1},uh={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. Video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General Wrapper error.",301:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element.",302:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response.",303:"No ads VAST response after one or more Wrappers. Also includes number of empty VAST responses from fallback.",400:"General linear error. Video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Timeout of MediaFile URI.",403:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying MediaFile.",406:"Mezzanine was required but not provided. Ad not served.",407:"Mezzanine is in the process of being downloaded for the first time. Download may take several hours. Ad will not be served until mezzanine is downloaded and transcoded.",408:"Conditional ad rejected.",409:"Interactive unit in the InteractiveCreativeFile node was not executed",410:"Verification unit in the Verification node was not executed.",411:"Mezzanine was provided as required, but file did not meet required specification. Ad not served.",500:"General NonLinearAds error.",501:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearresource with supported type.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within Companion display area.",602:"Unable to display Required Companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"Undefined error.",901:"General VPAID error."},ah=function(t){function e(e,n,r){var i;void 0===n&&(n=null);void 0===r&&(r=null);(i=t.call(this,e)||this).cause=n;i.uri=r;i.$type="VASTLoaderError";return i}r(e,t);return e}(function(t){function e(e){var n;void 0===e&&(e=900);(n=t.call(this,"VAST error "+e+(e in uh?": "+uh[e]:""))||this).code=e;n.$type="VASTError";return n}r(e,t);return e}(Tn)),ch=function(t){function e(e,n){var r;(r=t.call(this,"HTTP "+e+(null!=n&&""!==n?": "+n:""))||this).status=e;r.statusText=n;r.$type="HTTPError";return r}r(e,t);return e}(Tn),lh=/^data:(.*?)(;\s*base64)?,(.*)/,fh={maxDepth:10,credentials:"omit",timeout:1e4,noSingleAdPods:!1},hh=function(t){function e(n,r,o){var s;(s=t.call(this)||this)._uri=n;if(null!=o){s._root=o._root;s._options=s._root._options;s._depth=o._depth+1}else{s._root=i(s);s._options=Object.assign({},fh,r);s._depth=1;s._fetch=null!=s._options.fetch?s._options.fetch:e.fetch}return s}r(e,t);var n=e.prototype;n.load=function(){var t=this;return this._load(this._uri).catch(function(e){t._emit("error",{error:e});throw e})};n._load=function(t){var e=this;return Promise.resolve().then(function(){e._emit("willFetch",{uri:t});var n=lh.exec(t);return null==n?e._fetchUri(t):e._parseDataUri(n[3],n[1],null!=n[2])}).then(function(n){var r=n.body,i=n.headers;e._emit("didFetch",{uri:t,body:r,headers:i});e._emit("willParse",{uri:t,body:r,headers:i});var o=function(t,e){void 0===e&&(e={});(e=Object.assign({},sh,e)).errorHandler=e.strict?ih:oh;var n=function(t,e){"string"==typeof t&&(t=(e.domParser||new DOMParser).parseFromString(t,"text/xml"));null!=t.documentElement&&(t=t.documentElement);return t}(t,e);return function(t,e){try{return function(t,e){var n,r=new df;r.version=t.version;(n=r.errors).push.apply(n,t.error.map(function(t){return t._value}).filter(function(t){return""!==t}));var i=function(t){for(var e=[],n=[],r=0;r<t.length;++r){var i=t[r];void 0!==i.sequence?e.push(i):n.push(i)}return[e,n]}(t.ad),o=i[0],s=i[1];if(o.length>0)if(e.noSingleAdPods&&1===t.ad.length&&1===o.length)s.push(o[0]);else{r.adPod=new Rf;for(var u=0;u<o.length;u++)r.adPod.ads.add(rh(o[u],e))}for(var a=0;a<s.length;a++)r.ads.add(rh(s[a],e));return r}(t,e)}catch(t){e.errorHandler(t)}}(new zl(Gl).unmarshal(n),e)}(r,{noSingleAdPods:e._options.noSingleAdPods});o.uri=t;e._emit("didParse",{uri:t,body:r,headers:i,vast:o});if(o.ads.length>0){var s=o.ads.get(0);if(s instanceof Kl||"Wrapper"===s.$type)return e._loadWrapped(s.vastAdTagURI,o)}else if(e._depth>1)throw new ah(303,null,t);return[o]})};n._parseDataUri=function(t,n,r){return{body:r?e.atob(t):decodeURIComponent(t)}};n._loadWrapped=function(t,n){var r=this;return Promise.resolve().then(function(){var n=r._options.maxDepth;if(n>0&&r._depth+1>=n)throw new ah(302,null,t);return new e(t,null,r).load()}).then(function(t){return[n].concat(t)})};n._fetchUri=function(t){var e=this,n=this._fetchWithCredentials(t),r=this._createTimeouter(n,t);return Promise.race([n,r]).then(function(t){r.cancel();return t}).catch(function(n){r.cancel();throw e._depth>1?new ah(301,null,t):n})};n._fetchWithCredentials=function(t){var e=this,n=this._options.credentials;"function"==typeof n&&(n=n(t));Array.isArray(n)||(n=[n]);return n.reduce(function(n,r){return n.catch(function(){return e._tryFetch(t,r)})},Promise.reject(new Error))};n._tryFetch=function(t,e){var n=this;return this._root._fetch(t,{credentials:e}).then(function(e){if(e.ok)return Promise.all([e.text(),e.headers]);var n=new ch(e.status,e.statusText);throw new ah(301,n,t)}).then(function(t){return{body:t[0],headers:t[1]}}).catch(function(r){n._emit("fetchError",{uri:t,credentials:e,error:r});throw r})};n._createTimeouter=function(t,e){var n=this._options.timeout,r=null,i=new Promise(function(t,i){r=setTimeout(function(){i(new ah(301,null,e))},n)});i.cancel=function(){if(null!=r){clearTimeout(r);r=null}};return i};n._emit=function(){var t;(t=this._root).emit.apply(t,arguments)};return e}(xl),dh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";hh.fetch=function(t,e){return e=e||{},new Promise(function(n,r){var i=new XMLHttpRequest,o=[],s=[],u={};for(var a in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(t,e,n){o.push(e=e.toLowerCase()),s.push([e,n]),u[e]=u[e]?u[e]+","+n:n}),n(function t(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(JSON.parse(i.responseText))},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:t,headers:{keys:function(){return o},entries:function(){return s},get:function(t){return u[t.toLowerCase()]},has:function(t){return t.toLowerCase()in u}}}}())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(a,e.headers[a]);i.send(e.body||null)})};hh.atob=function(t){var e="",n=0;do{var r=dh.indexOf(t.charAt(n++)),i=dh.indexOf(t.charAt(n++)),o=dh.indexOf(t.charAt(n++)),s=(63&r)<<2|i>>4&3,u=(15&i)<<4|o>>2&15,a=(3&o)<<6|63&dh.indexOf(t.charAt(n++));e+=String.fromCharCode(s)+(u?String.fromCharCode(u):"")+(a?String.fromCharCode(a):"")}while(n<t.length);return e};var ph,vh,mh=lo,gh=io,yh=ho,_h=["videoClicks","clickThrough","uri"],bh=((ph={}).vpaid=function(t,e,n,r){return new Promise(function(i,o){var s,u,a,c;s=t[$c].isFlagEnabled(4)?"inline":null;return Promise.resolve(function(t,e,n){return new Promise(function(r,i){void 0===n&&(n={});return r(("inline"===n.mode?function(t,e){return new Promise(function(n,r){var i,o,s,u;i=e.ownerDocument;o=i.defaultView;s=o.getVPAIDAd;delete o.getVPAIDAd;return Promise.resolve(li(t,null,i)).then(function(t){try{try{u=o.getVPAIDAd()}finally{o.getVPAIDAd=s}return n({vpaid:u})}catch(t){return r(t)}},r)})}:function(t,e){return new Promise(function(n,r){var i,o,s,u,a;return Promise.resolve(function(t,e,n,r){return new Promise(function(i,o){void 0===n&&(n=!1);void 0===r&&(r="about:blank");return Promise.resolve(Mr(t.ownerDocument)).then(function(s){try{return i(function(t,e,n,r){return new Promise(function(i,o){var s,u;s=t.ownerDocument.createElement("iframe");u=Nr(s,"load");s.loading="eager";s.frameBorder="0";s.scrolling="no";Wr(s,e,n);s.src=r;t.appendChild(s);return Promise.resolve(Promise.race([u,$r(s)])).then(function(t){try{return i(s)}catch(t){return o(t)}},o)})}(t,e,n,r))}catch(t){return o(t)}},o)})}(e,Bc,!0)).then(function(e){try{o=(i=e).contentWindow;s=o.document;u=function(t){return function(t,e,n){for(var r=0,i=e(t);null==i&&t!==t.parent&&r<10;){i=e(t=t.parent);++r}return i}(t,Qc)}(o);s.write("<html><head>"+(null!=u?'<base href="'+function(t){var e=document.createElement("span");e.textContent=t;return e.innerHTML}(u)+'">':"")+"</head><body></body></html>");s.close();return Promise.resolve(li(t,null,s)).then(function(t){try{a=o.getVPAIDAd();return n({iframe:i,vpaid:a})}catch(t){return r(t)}},r)}catch(t){return r(t)}},r)})})(t,e))})}(e.uri,r.envVars.slot,{mode:s})).then(function(t){try{a=(u=t).iframe,c=u.vpaid;return i({iframe:a,vpaid:c,adParameters:n})}catch(t){return o(t)}},o)})},ph.video=function(t,e,n,r){return new Promise(function(r,i){var o=t[Il].config,s=o.clickThroughUrl,u=o.skipOffset;null==t[Tl]&&(t[Tl]=s);var a=t[Il].isFlagEnabled(1),c=t[Il].isFlagEnabled(8);return r({vpaid:new Pl(e.uri,{skipOffset:u,noMutedAutoplayFallback:a,noPauseOnClickThrough:c}),adParameters:n})})},ph.vast=function(t,e,n,r){return new Promise(function(n,i){var o,s,u,a;return Promise.resolve(function(t,e,n,r){return new Promise(function(n,i){var o,s,u;void 0===r&&(r=null);o=new hh(e,void 0);null!=r&&"function"==typeof(s=hh.prototype._load)&&(hh.prototype._load=function(t){return new Promise(function(e,n){t=r(t);return e(s.call(this,t))}.bind(this))});return Promise.resolve(t[mh]._runStage("beforeLoadVasts",[{uri:e}])).then(function(r){try{o.on("willFetch",function(e){t[mh]._runStage("beforeLoadVast",[e])});o.on("didFetch",function(e){t[mh]._runStage("afterLoadVast",[e])});o.on("didParse",function(e){t[mh]._runStage("afterParseVast",[e])});var s=function(e){try{return Promise.resolve(t[mh]._runStage("afterLoadVasts",[{error:e}])).then(function(t){try{throw e}catch(t){return i(t)}},i)}catch(t){return i(t)}};try{return Promise.resolve(o.load()).then(function(r){try{u=r;t[gh].hostInfo._put("vastChain",u);return Promise.resolve(t[mh]._runStage("afterLoadVasts",[{chain:u,uri:e}])).then(function(t){try{return n(u)}catch(t){return s(t)}},s)}catch(t){return s(t)}},s)}catch(t){s(t)}}catch(t){return i(t)}},i)})}(t,e.uri)).then(function(e){try{s=function(t){var e=t[t.length-1].ads.get(0);if(0===e.creatives.length)throw new Error("VAST does not contain creative");var n=Cl(e);if(null==n)throw new Error("VAST does not contain linear creative");return n}(o=e);!function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r].ads.get(0);t._createAndAddPlugin("vast-tracking",Ol(i))}var o=n.skipoffset;null!=o&&t._createAndAddPlugin("skip",{skipOffset:o});null==t[yh]&&(t[yh]=function(t,e){for(var r=n,i=0;null!=r&&i<e.length;){r=r[e[i]];++i}return r}(0,_h))}(t,o,s);u=s.mediaFiles,a=s.adParameters;return n(t._loadMediaFile(u,a,r))}catch(t){return i(t)}},i)})},ph);vh=function(){!function(t){for(var e=function(t){for(var e=[],n=t,r=0;r++<10&&null!=n&&n!==Object.prototype;){var i=Object.getOwnPropertyDescriptors(n);e.push.apply(e,Object.keys(i).filter(function(t){return e.indexOf(t)<0}));n=Object.getPrototypeOf(n)}return e.filter(function(e){return"function"==typeof t[e]})}(t),n=0;n<e.length;++n){var r=e[n];ni(t,r)}}(Gc);return new Gc(bh)}(),window.getVPAIDAd=function(){return vh}}();
